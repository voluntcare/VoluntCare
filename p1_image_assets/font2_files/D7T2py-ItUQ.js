if (self.CavalryLogger) { CavalryLogger.start_js(["RumBn"]); }

__d("SphericalMediaViewportAnimation",["easeInOutInterpolate","requestAnimationFrame","SphericalMediaViewActions"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("SphericalMediaViewActions").updateViewportAndFOV,i=c("SphericalMediaViewActions").startAnimating,j=c("SphericalMediaViewActions").stopAnimating,k=1e3,l={moveTo:function m(n){__p&&__p();return function(o,p){__p&&__p();var q=p(),r=q.view;if(r.isAnimating)return;o(i());var s=Date.now(),t=n.yaw-r.yaw;if(Math.abs(t)>180)t+=t>0?-360:360;var u=null,v=null,w=null,x=function x(y){__p&&__p();var z=p(),r=z.view;if(!r.isAnimating)return;var A=Date.now();if(A-s>k||u!=null&&u!=r.pitch||v!=null&&v!=r.yaw||w!=null&&w!=r.fov){o(j());return}c("requestAnimationFrame")(function(){x(y)});var B=c("easeInOutInterpolate")((A-s)/k),C=y.deltaPitch*B+y.startPitch,D=y.deltaYaw*B+y.startYaw,E=y.deltaFov*B+y.startFov;o(h(D,C,E));u=C;v=D;w=E};c("requestAnimationFrame")(function(){x({startYaw:r.yaw,deltaYaw:t,startPitch:r.pitch,deltaPitch:n.pitch-r.pitch,startFov:r.fov,deltaFov:n.fov-r.fov})})}}};f.exports=l}),null);
__d("SphericalPhotoHeadingIndicator.redux",["FullScreen","SphericalMediaHeadingIndicator.react","SphericalPhotoConfig","SphericalPhotoProjectionUtils","ReactRedux","SphericalMediaBaseActions","SphericalMediaViewportAnimation"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("ReactRedux").connect,k=c("SphericalMediaBaseActions").tapHeadingIndicator,l=c("SphericalMediaViewportAnimation").moveTo;h=babelHelpers.inherits(m,c("SphericalMediaHeadingIndicator.react"));i=h&&h.prototype;function m(){var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=i.constructor).call.apply(o,[this].concat(r)),this.$SphericalPhotoHeadingIndicator1=function(){this.draw(this.__getDrawData())}.bind(this),p}m.prototype.componentDidMount=function(){i.componentDidMount.call(this);this.props.viewStore.subscribe(this.$SphericalPhotoHeadingIndicator1)};m.prototype.__onClick=function(event){this.props.dispatch(k());var o=this.props.initialFov;if(this.props.showNewPhotoRenderer&&o>179){var p=this.props,q=p.aspectRatio,r=p.partialLeftDegrees,s=p.partialRightDegrees,t=p.partialTopDegrees,u=p.partialBottomDegrees;o=c("SphericalPhotoProjectionUtils").getMaxVfov({partialLeftDegrees:r,partialRightDegrees:s,partialTopDegrees:t,partialBottomDegrees:u},q)}this.props.viewStore.dispatch(l({fov:o,pitch:this.props.initialPitch,yaw:this.props.initialYaw}));event.stopPropagation()};m.prototype.__getDrawData=function(){var o=this.props.viewStore.getState(),p=o.view;return{fov:p.fov,initialYaw:this.props.initialYaw,yaw:p.yaw}};m.__subClassMethods={__onClick:true,__getDrawData:true};var n=function n(o){return{aspectRatio:o.base.aspectRatio,initialFov:o.base.initialFov,initialPitch:o.base.initialPitch,initialYaw:o.base.initialYaw,isActive:o.base.isRendererActive&&o.base.isRendererSetup||o.base.showFallbackUI,viewStore:o.base.viewStore,useLargeHeadingIndicator:o.base.useLargeHeadingIndicator||c("FullScreen").isFullScreen(),isPanning:o.base.isPanning,partialLeftDegrees:o.base.partialLeftDegrees,partialRightDegrees:o.base.partialRightDegrees,partialTopDegrees:o.base.partialTopDegrees,partialBottomDegrees:o.base.partialBottomDegrees,showNewPhotoRenderer:o.base.tiledSphericalConfig.useTiledRenderer&&c("SphericalPhotoConfig").show_new_renderer}};f.exports=j(n)(m)}),null);