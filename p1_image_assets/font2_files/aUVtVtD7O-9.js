if (self.CavalryLogger) { CavalryLogger.start_js(["ZIR+Y"]); }

__d("XNotesCoverPhotoUploadController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/notes/composer/upload/coverphoto/",{note_id:{type:"Int"},media_type:{type:"Enum",enumType:1},original_photo_id:{type:"Int"},original_video_id:{type:"Int"}})}),null);
__d("XNotesPhotoUploadController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/notes/composer/upload/",{note_id:{type:"Int",required:true},original_photo_id:{type:"Int"}})}),null);
__d("CampfirePhotoUploadRequest",["invariant","ActorURI","AsyncRequest","AsyncUploadRequest","DateConsts","FileInputUploader","XNotesCoverPhotoUploadController","XNotesPhotoUploadController"],(function a(b,c,d,e,f,g,h){__p&&__p();var i=2;function j(k,l){"use strict";__p&&__p();this.$CampfirePhotoUploadRequest1=l;this.$CampfirePhotoUploadRequest2=null;this.$CampfirePhotoUploadRequest3=k;this.$CampfirePhotoUploadRequest4=0;if(this.$CampfirePhotoUploadRequest1.files)Object.keys(this.$CampfirePhotoUploadRequest1.files).length===1||h(0);if(this.$CampfirePhotoUploadRequest1.fileInput)this.$CampfirePhotoUploadRequest5();else if(c("AsyncUploadRequest").isSupported()&&this.$CampfirePhotoUploadRequest1.files)this.$CampfirePhotoUploadRequest6();else this.$CampfirePhotoUploadRequest7();this.$CampfirePhotoUploadRequest8()}j.prototype.send=function(){"use strict";this.$CampfirePhotoUploadRequest9.send();if(this.$CampfirePhotoUploadRequest1.originalPhotoID&&this.$CampfirePhotoUploadRequest1.onProgress)this.$CampfirePhotoUploadRequest2=setInterval(function(){this.$CampfirePhotoUploadRequest1.onProgress(this.$CampfirePhotoUploadRequest10())}.bind(this),100)};j.prototype.$CampfirePhotoUploadRequest5=function(){"use strict";__p&&__p();this.$CampfirePhotoUploadRequest9=new(c("FileInputUploader"))(this.$CampfirePhotoUploadRequest1.fileInput);if(this.$CampfirePhotoUploadRequest1.onProgress)this.$CampfirePhotoUploadRequest9.subscribe("progress",function(k,l){var event=l.event;if(event.lengthComputable)this.$CampfirePhotoUploadRequest1.onProgress(event.loaded/event.total*100)}.bind(this));if(this.$CampfirePhotoUploadRequest1.onFinished)this.$CampfirePhotoUploadRequest9.subscribe("success",function(k,l){this.$CampfirePhotoUploadRequest1.onFinished(l.response)}.bind(this))};j.prototype.$CampfirePhotoUploadRequest7=function(){"use strict";__p&&__p();var k=new FormData();for(var l in this.$CampfirePhotoUploadRequest1.files)k.append(l,this.$CampfirePhotoUploadRequest1.files[l]);this.$CampfirePhotoUploadRequest9=new(c("AsyncRequest"))().setMethod("POST").setRawData(k);this.$CampfirePhotoUploadRequest9.setHandler(function(m){this.$CampfirePhotoUploadRequest11();if(this.$CampfirePhotoUploadRequest1.onFinished)this.$CampfirePhotoUploadRequest1.onFinished(m)}.bind(this));if(this.$CampfirePhotoUploadRequest1.onProgress)this.$CampfirePhotoUploadRequest9.setUploadProgressHandler(function(m){this.$CampfirePhotoUploadRequest1.onProgress(m.position/m.totalSize*100)}.bind(this))};j.prototype.$CampfirePhotoUploadRequest6=function(){"use strict";__p&&__p();this.$CampfirePhotoUploadRequest9=new(c("AsyncUploadRequest"))().setAllowCrossOrigin(false).setFiles(this.$CampfirePhotoUploadRequest1.files);if(this.$CampfirePhotoUploadRequest1.onProgress)this.$CampfirePhotoUploadRequest9.subscribe("progress",function(k,l){var m=l.getProgressEvent();this.$CampfirePhotoUploadRequest1.onProgress(m.position/m.totalSize*100)}.bind(this));this.$CampfirePhotoUploadRequest9.subscribe("complete",function(k,l){l.length===1||h(0);this.$CampfirePhotoUploadRequest11();if(this.$CampfirePhotoUploadRequest1.onFinished)this.$CampfirePhotoUploadRequest1.onFinished(l[0].getResponse())}.bind(this))};j.prototype.$CampfirePhotoUploadRequest8=function(){"use strict";__p&&__p();var k=null;if(this.$CampfirePhotoUploadRequest1.isCoverPhoto){k=c("XNotesCoverPhotoUploadController").getURIBuilder();k.setEnum("media_type","photo")}else k=c("XNotesPhotoUploadController").getURIBuilder();k.setInt("note_id",this.$CampfirePhotoUploadRequest3);if(this.$CampfirePhotoUploadRequest1.originalPhotoID)k.setInt("original_photo_id",this.$CampfirePhotoUploadRequest1.originalPhotoID);var l=c("ActorURI").create(k.getURI(),this.$CampfirePhotoUploadRequest1.ownerID);this.$CampfirePhotoUploadRequest9.setURI(l)};j.prototype.$CampfirePhotoUploadRequest10=function(){"use strict";var k=1-Math.exp(-this.$CampfirePhotoUploadRequest4/(2*i*c("DateConsts").MS_PER_SEC));k*=.98*100;var l=Math.random()*350+150;this.$CampfirePhotoUploadRequest4+=l;return k};j.prototype.$CampfirePhotoUploadRequest11=function(){"use strict";if(this.$CampfirePhotoUploadRequest2){clearInterval(this.$CampfirePhotoUploadRequest2);this.$CampfirePhotoUploadRequest2=null;this.$CampfirePhotoUploadRequest4=0}};f.exports=j}),null);
__d("NotesCoverPickerPhotos.react",["cx","AsyncRequest","CssBackgroundImage.react","Grid.react","React","XNotesUserPhotosController","XUISpinner.react","ActorURI","cssURL","mapObject"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j,k=c("Grid.react").GridItem,l=338,m=116,n=149;i=babelHelpers.inherits(o,c("React").Component);j=i&&i.prototype;function o(){var p,q;"use strict";for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=j.constructor).call.apply(p,[this].concat(s)),this.state={photoData:null},q}o.prototype.componentWillMount=function(){"use strict";var p=c("XNotesUserPhotosController").getURIBuilder().setInt("thumb_height",m).setInt("thumb_width",n).getURI();p=c("ActorURI").create(p,this.props.ownerID);new(c("AsyncRequest"))(p).setHandler(function(q){var r=q.payload.photoData;if(r)this.setState({photoData:r})}.bind(this)).send()};o.prototype.render=function(){"use strict";if(!this.state.photoData)return c("React").createElement("div",{className:"_5tki",style:{height:l+"px"}},c("React").createElement(c("XUISpinner.react"),{className:"_5tkj",size:"large"}));var p=c("mapObject")(this.state.photoData,function(q){var r=function(){this.props.onPhotoPicked(q);this.props.onClose()}.bind(this);return c("React").createElement(k,{key:"thumbnail_"+q.originalPhotoData.id,onClick:r},c("React").createElement("div",{className:"_5tkk"},c("React").createElement(c("CssBackgroundImage.react"),{className:"_5tkl",imageURI:q.thumbnailSrc,height:m+"px",width:n+"px"})))}.bind(this));return c("React").createElement(c("Grid.react"),{cols:4,spacing:"_2phz"},p)};f.exports=o}),null);
__d("NotesCoverPickerVideos.react",["cx","AsyncRequest","React","XNotesUserVideosController","XUISpinner.react","Grid.react","ActorURI","cssURL"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j,k=c("Grid.react").GridItem;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;function l(){var m,n;"use strict";for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.state={videoData:null},n}l.prototype.componentWillMount=function(){"use strict";var m=c("XNotesUserVideosController").getURIBuilder().setBool("is_from_cover",true).getURI();m=c("ActorURI").create(m,this.props.ownerID);new(c("AsyncRequest"))(m).setHandler(function(n){var o=n.getPayload().videoData;o&&this.setState({videoData:o})}.bind(this)).send()};l.prototype.render=function(){"use strict";if(!this.state.videoData)return c("React").createElement("div",{className:"_29vm"},c("React").createElement(c("XUISpinner.react"),{className:"_29vo",size:"large"}));var m=Object.keys(this.state.videoData).map(function(n,o){var p=this.state.videoData[n],q=function(){this.props.onVideoPicked(p);this.props.onClose()}.bind(this);return c("React").createElement(k,{key:"thumbnail_"+p.id,onClick:q},c("React").createElement("div",{className:"_29vp"},c("React").createElement("div",{className:"_29vq",style:{backgroundImage:c("cssURL")(p.posterSrc)}})),c("React").createElement("div",{className:"_29vr"},p.title))}.bind(this));return c("React").createElement(c("Grid.react"),{cols:2,spacing:"_2phz"},m)};f.exports=l}),null);
__d("NotesCoverPicker.react",["ix","cx","fbt","glyph","FileInput.react","Image.react","NotesCoverPickerPhotos.react","NotesCoverPickerVideos.react","React","ScrollableArea.react","XUIButton.react","XUIDialogBody.react","XUIDialogFooter.react","XUIDialogHeader.react","XUIDialogHeaderTitle.react","XUINotice.react"],(function a(b,c,d,e,f,g,h,i,j,k){__p&&__p();var l,m,n=c("React").PropTypes,o=338,p=400;l=babelHelpers.inherits(q,c("React").Component);m=l&&l.prototype;function q(){__p&&__p();var r,s;"use strict";for(var t=arguments.length,u=Array(t),v=0;v<t;v++)u[v]=arguments[v];return s=(r=m.constructor).call.apply(r,[this].concat(u)),this.state={photoData:null,videoData:null,selectedTab:"photo"},this.$NotesCoverPicker1=function(w){this.setState({selectedTab:w})}.bind(this),this.renderThumbnailGrid=function(){if(this.state.selectedTab==="photo")return c("React").createElement(c("NotesCoverPickerPhotos.react"),{onPhotoPicked:this.props.onPhotoPicked,onClose:this.props.onClose,ownerID:this.props.ownerID});else if(this.state.selectedTab==="video")return c("React").createElement(c("NotesCoverPickerVideos.react"),{onVideoPicked:this.props.onVideoPicked,onClose:this.props.onClose,ownerID:this.props.ownerID})}.bind(this),this.onFileInputChange=function(event){this.props.onPhotoUpload(event.target);this.props.onClose()}.bind(this),s}q.prototype.render=function(){"use strict";var r=c("React").createElement("div",{className:this.state.selectedTab!=="photo"?"hidden_elem":""},c("React").createElement(c("XUIDialogBody.react"),{className:"_5tkf"},c("React").createElement(c("ScrollableArea.react"),{height:o,shadow:false},this.renderThumbnailGrid())),c("React").createElement(c("XUIDialogFooter.react"),null,c("React").createElement(c("FileInput.react"),{name:"file",onChange:this.onFileInputChange},c("React").createElement(c("XUIButton.react"),{image:c("React").createElement(c("Image.react"),{src:h("101456")}),href:{url:"#"},label:j._("Importer une nouvelle photo")})),c("React").createElement(c("XUIButton.react"),{className:"_5tkg layerCancel",label:j._("Fermer"),use:"confirm"}))),s=c("React").createElement("div",{className:this.state.selectedTab!=="video"?"hidden_elem":""},c("React").createElement(c("XUIDialogBody.react"),{className:"_29vl"},c("React").createElement(c("ScrollableArea.react"),{height:p,shadow:false},c("React").createElement(c("XUINotice.react"),{className:"_3-95"},"Only public videos will show up here. Attaching a video and modifying its privacy may prevent it from playing for viewers of this note."),this.renderThumbnailGrid())));return c("React").createElement("div",null,c("React").createElement(c("XUIDialogHeader.react"),{activeTabKey:this.state.selectedTab,onTabClick:this.$NotesCoverPicker1},c("React").createElement(c("XUIDialogHeaderTitle.react"),{href:"#",key:"photo"},c("React").createElement("span",null,"Photo")),c("React").createElement(c("XUIDialogHeaderTitle.react"),{href:"#",key:"video"},c("React").createElement("span",null,"Video"))),r,s)};q.propTypes={onClose:n.func.isRequired,onPhotoPicked:n.func.isRequired,onPhotoUpload:n.func.isRequired,onVideoPicked:n.func.isRequired};f.exports=q}),null);
__d("NotesCoverPickerDialog",["DialogX","NotesCoverPicker.react","React","emptyFunction"],(function a(b,c,d,e,f,g){__p&&__p();function h(i){"use strict";this.$NotesCoverPickerDialog1=null;this.$NotesCoverPickerDialog2=i.onPhotoPicked;this.$NotesCoverPickerDialog3=i.onPhotoUpload;this.$NotesCoverPickerDialog4=i.onPhotoCancel||c("emptyFunction");this.$NotesCoverPickerDialog5=i.onVideoPicked;this.$NotesCoverPickerDialog6=i.onVideoCancel||c("emptyFunction");this.$NotesCoverPickerDialog7=i.ownerID}h.prototype.hide=function(){"use strict";if(this.$NotesCoverPickerDialog1)this.$NotesCoverPickerDialog1.hide()};h.prototype.show=function(){"use strict";if(!this.$NotesCoverPickerDialog1){this.$NotesCoverPickerDialog1=new(c("DialogX"))({width:690},c("React").createElement(c("NotesCoverPicker.react"),{onClose:function(){return this.hide()}.bind(this),onPhotoPicked:this.$NotesCoverPickerDialog2,onPhotoUpload:this.$NotesCoverPickerDialog3,onVideoPicked:this.$NotesCoverPickerDialog5,ownerID:this.$NotesCoverPickerDialog7}));this.$NotesCoverPickerDialog1.subscribe("cancel",function(){return this.$NotesCoverPickerDialog4()}.bind(this))}this.$NotesCoverPickerDialog1.show()};f.exports=h}),null);
__d("RichComposedTextEditorImagePlaceholder.react",["ix","cx","fbt","Image.react","React","fbglyph","joinClasses"],(function a(b,c,d,e,f,g,h,i,j){__p&&__p();var k,l,m=c("React").PropTypes;k=babelHelpers.inherits(n,c("React").Component);l=k&&k.prototype;n.prototype.render=function(){"use strict";var o=c("joinClasses")(this.props.className,"_3c5-");return c("React").createElement("div",{className:o},c("React").createElement("div",{className:"_3c5_"},c("React").createElement(c("Image.react"),{src:h("128175"),className:"_3c60"}),j._("D\u00e9posez ou cliquez pour ajouter une photo")))};function n(){"use strict";k.apply(this,arguments)}n.propTypes={className:m.string};f.exports=n}),null);
__d("XNotesRemoveCoverPhotoController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/notes/composer/remove_cover_photo/",{})}),null);
__d("CampfireCoverPhotoArea.react",["cx","fbt","ActorURI","AsyncRequest","RichComposedTextEditorImagePlaceholder.react","CampfirePhotoUploadRequest","CssBackgroundImage.react","DataTransfer","FBAnimatedProgressBar.react","NotesCoverPickerDialog","NotesPhotoPickerDialog","React","Video.react","XNotesCoverPhotoUploadController","XNotesRemoveCoverPhotoController","XUIOverlayButton.react","cssURL"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j,k,l=c("React").PropTypes,m=448,n=960;function o(q){return m-n/q}j=babelHelpers.inherits(p,c("React").Component);k=j&&j.prototype;function p(q,r){"use strict";__p&&__p();k.constructor.call(this,q,r);this.$CampfireCoverPhotoArea1=function(){return{photoAdjustmentY:0,mediaInfo:null,uploading:false,uploadPercentage:0}};this.$CampfireCoverPhotoArea12=function(event){var u=event.charCode||event.keyCode;if(u===32||u===13)this.$CampfireCoverPhotoArea9()}.bind(this);this.$CampfireCoverPhotoArea13=function(u){u.preventDefault();this.setState(this.$CampfireCoverPhotoArea1());this.props.onUpdateCoverPhotoPlacement({photoID:null,xOffset:0,yOffset:0});this.$CampfireCoverPhotoArea4=null;var v=c("XNotesRemoveCoverPhotoController").getURIBuilder(),w={note_id:this.props.noteID},x=v.getURI();new(c("AsyncRequest"))(x).setMethod("POST").setData(w).send()}.bind(this);this.$CampfireCoverPhotoArea14=function(u){this.$CampfireCoverPhotoArea4=u.id;this.$CampfireCoverPhotoArea5=o(u.width/u.height);this.setState({photoAdjustmentY:0,mediaInfo:{type:"photo",height:u.height,src:u.src,width:u.width},uploading:false});this.props.onUpdateCoverPhotoPlacement({photoID:this.$CampfireCoverPhotoArea4,xOffset:0,yOffset:this.state.photoAdjustmentY})}.bind(this);this.$CampfireCoverPhotoArea15=function(u){var v=u.posterSrc,w=u.sdSrc,x=u.height,y=u.width,z=u.id;this.setState({mediaInfo:{type:"video",posterSrc:v,videoSrc:w,height:x,width:y},uploading:false});var A=c("XNotesCoverPhotoUploadController").getURIBuilder(),B={note_id:this.props.noteID,media_type:"video",original_video_id:z},C=c("ActorURI").create(A.getURI(),this.props.ownerID);new(c("AsyncRequest"))(C).setMethod("POST").setData(B).send()}.bind(this);this.$CampfireCoverPhotoArea16=function(u){var v=u/this.$CampfireCoverPhotoArea5*100,w=Math.round(this.state.photoAdjustmentY+v);if(w>=0&&w<=100)this.setState({photoAdjustmentY:w})}.bind(this);this.$CampfireCoverPhotoArea9=function(){if(!this.state.mediaInfo)new(c("NotesPhotoPickerDialog"))({onPhotoPicked:this.$CampfireCoverPhotoArea17,onPhotoUpload:this.$CampfireCoverPhotoArea18,ownerID:this.props.ownerID,isDoc:this.props.isDoc,isPageStory:this.props.isPageStory}).show()}.bind(this);this.$CampfireCoverPhotoArea10=function(u){u.preventDefault()};this.$CampfireCoverPhotoArea11=function(u){__p&&__p();u.preventDefault();var v=new(c("DataTransfer"))(u.nativeEvent.dataTransfer),w=v.getFiles()[0];if(!w||w.type!="image/png"&&w.type!="image/jpeg")return;var x=new FileReader();x.onload=function(y){var z=y.target.result,A=new Image();A.src=z;A.onload=function(){this.$CampfireCoverPhotoArea19({files:{coverPhoto:w}});this.$CampfireCoverPhotoArea5=o(A.width/A.height);this.setState({mediaInfo:{type:"photo",height:A.height,src:z,width:A.width}})}.bind(this)}.bind(this);x.readAsDataURL(w)}.bind(this);this.$CampfireCoverPhotoArea6=function(u){this.$CampfireCoverPhotoArea2=true;this.$CampfireCoverPhotoArea3=u.screenY}.bind(this);this.$CampfireCoverPhotoArea7=function(u){if(this.$CampfireCoverPhotoArea2){var v=u.screenY-this.$CampfireCoverPhotoArea3;this.$CampfireCoverPhotoArea3=u.screenY;this.$CampfireCoverPhotoArea16(v)}}.bind(this);this.$CampfireCoverPhotoArea8=function(u){if(this.$CampfireCoverPhotoArea2){this.$CampfireCoverPhotoArea2=false;this.$CampfireCoverPhotoArea3=0;this.props.onUpdateCoverPhotoPlacement({photoID:this.$CampfireCoverPhotoArea4,xOffset:0,yOffset:this.state.photoAdjustmentY})}}.bind(this);this.$CampfireCoverPhotoArea17=function(u){if(u.originalPhotoData){this.$CampfireCoverPhotoArea4=u.originalPhotoData.id;this.$CampfireCoverPhotoArea14({height:u.height,src:u.originalPhotoData.src,width:u.width});this.$CampfireCoverPhotoArea19({originalPhotoID:u.originalPhotoData.id})}else this.$CampfireCoverPhotoArea14({height:u.height,id:u.id,src:u.src,width:u.width})}.bind(this);this.$CampfireCoverPhotoArea20=function(u){this.$CampfireCoverPhotoArea15(u)}.bind(this);this.$CampfireCoverPhotoArea18=function(u){this.$CampfireCoverPhotoArea19({fileInput:u})}.bind(this);this.$CampfireCoverPhotoArea19=function(u){this.setState({uploading:true});var v={isCoverPhoto:true,onFinished:this.$CampfireCoverPhotoArea21,onProgress:this.$CampfireCoverPhotoArea22,ownerID:this.props.ownerID};Object.assign(v,u);new(c("CampfirePhotoUploadRequest"))(this.props.noteID,v).send()}.bind(this);this.$CampfireCoverPhotoArea21=function(u){if(this.$CampfireCoverPhotoArea4||this.state.mediaInfo){this.$CampfireCoverPhotoArea4=u.payload.photoData.id;this.props.onUpdateCoverPhotoPlacement({photoID:this.$CampfireCoverPhotoArea4,xOffset:0,yOffset:this.state.photoAdjustmentY})}else this.$CampfireCoverPhotoArea14(u.payload.photoData);this.setState({uploading:false,uploadPercentage:0})}.bind(this);this.$CampfireCoverPhotoArea22=function(u){this.setState({uploadPercentage:u})}.bind(this);var s=q.initialCoverMediaInfo,t=this.$CampfireCoverPhotoArea1();if(s)if(s.type==="photo"){t.photoAdjustmentY=s.y_offset;t.mediaInfo={type:"photo",height:s.height,src:s.src,width:s.width}}else if(s.type==="video")t.mediaInfo={type:"video",posterSrc:s.posterSrc,videoSrc:s.videoSrc,width:s.width,height:s.height};this.state=t}p.prototype.componentDidMount=function(){"use strict";__p&&__p();var q=this.props.initialCoverMediaInfo;this.$CampfireCoverPhotoArea2=false;this.$CampfireCoverPhotoArea3=0;if(q){if(q.type==="photo"){this.$CampfireCoverPhotoArea4=q.photo_id;this.$CampfireCoverPhotoArea5=o(q.width/q.height)}else if(q.type==="video")this.$CampfireCoverPhotoArea4=q.video_id}else this.$CampfireCoverPhotoArea4=this.$CampfireCoverPhotoArea5=0};p.prototype.render=function(){"use strict";__p&&__p();var q=null,r=this.state.mediaInfo;if(r){if(r.type==="photo")q=c("React").createElement(c("CssBackgroundImage.react"),{imageURI:r.src,className:"_1tih"+(this.state.uploading?" _1tii":""),backgroundPosition:"0 "+this.state.photoAdjustmentY+"%",key:"coverPhoto",onMouseDown:this.$CampfireCoverPhotoArea6,onMouseMove:this.$CampfireCoverPhotoArea7,onMouseUp:this.$CampfireCoverPhotoArea8,onMouseOut:this.$CampfireCoverPhotoArea8});else if(r.type==="video")q=c("React").createElement(c("Video.react"),{poster:r.posterSrc,src:r.videoSrc,width:"100%",height:"100%"})}else q=c("React").createElement("div",{onClick:this.$CampfireCoverPhotoArea9,onDragOver:this.$CampfireCoverPhotoArea10,onDrop:this.$CampfireCoverPhotoArea11,onKeyPress:this.$CampfireCoverPhotoArea12,role:"presentation",tabIndex:this.props.tabIndex},c("React").createElement(c("RichComposedTextEditorImagePlaceholder.react"),null));var s=(!!this.state.mediaInfo||this.state.uploading?"_1tij":"")+" _1tik",t=null;if(this.state.uploading)t=c("React").createElement(c("FBAnimatedProgressBar.react"),{animate:true,className:"_1til",key:"progressBar",percent:this.state.uploadPercentage,duration:1});var u=null;if(this.state.mediaInfo)u=c("React").createElement(c("XUIOverlayButton.react"),{className:"_1tim",label:i._("Supprimer"),onClick:this.$CampfireCoverPhotoArea13});return c("React").createElement("div",{className:s},q,t,u)};p.propTypes={initialCoverMediaInfo:l.object,noteID:l.string.isRequired,onUpdateCoverPhotoPlacement:l.func.isRequired,isDoc:l.bool,isPageStory:l.bool};f.exports=p}),null);
__d("CampfireHeadlineInput.react",["cx","DraftModifier","EditorState","PlainTextEditor.react","React","XUIText.react"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j,k=c("React").PropTypes,l=128;i=babelHelpers.inherits(m,c("React").Component);j=i&&i.prototype;m.prototype.focus=function(){"use strict";this.refs.editor.focus()};m.prototype.$CampfireHeadlineInput1=function(n){"use strict";var o=n.getCurrentContent(),p=o.getPlainText(),q=p.length,r=n.getSelection().getStartOffset();if(q<=l&&r<=l){this.props.onChange(n);return}var s=o.getBlockMap().first().getKey(),t=n.getSelection().merge({anchorKey:s,anchorOffset:l,focusKey:s,focusOffset:q,isBackward:false}),u=c("DraftModifier").removeRange(n.getCurrentContent(),t,"forward"),v=c("EditorState").push(n,u,"remove-range");this.props.onChange(v)};m.prototype.shouldComponentUpdate=function(n){"use strict";return n.titleState!==this.props.titleState};m.prototype.render=function(){"use strict";return c("React").createElement(c("XUIText.react"),{type:"serif",display:"block",className:"_30eg"},c("React").createElement(c("PlainTextEditor.react"),{editorState:this.props.titleState,handleBeforeInput:this.props.handleBeforeInput,onChange:this.$CampfireHeadlineInput1.bind(this),placeholder:this.props.placeholder,className:"_30eh",ref:"editor"}))};function m(){"use strict";i.apply(this,arguments)}m.propTypes={placeholder:k.string,titleState:k.instanceOf(c("EditorState")).isRequired,onChange:k.func.isRequired};f.exports=m}),null);
__d("PagesStoryNUXTour.react",["AsyncRequest","AdsBlueTipTour.react","LayerFadeOnShow","React","XBasicFBNuxViewController","XUIText.react","emptyFunction"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=5300;h=babelHelpers.inherits(k,c("React").Component);i=h&&h.prototype;k.prototype.$PagesStoryNUXTour1=function(){var l=c("XBasicFBNuxViewController").getURIBuilder().setInt("nux_id",j).getURI();new(c("AsyncRequest"))().setURI(l).send()};k.prototype.render=function(){if(this.props.steps.length===0)return null;var l=this.props.steps.map(function(m){if(m.nux_title=="Tell people about your business")this.$PagesStoryNUXTour1();return{content:c("React").createElement("div",null,c("React").createElement(c("XUIText.react"),{display:"block",weight:"bold"},m.nux_title),m.nux_message),context:m.context,position:m.nux_position,offsetX:m.nux_offsiteX,offsetY:5}}.bind(this));return c("React").createElement(c("AdsBlueTipTour.react"),{behaviors:{LayerFadeOnShow:c("LayerFadeOnShow")},highlightContext:false,onComplete:c("emptyFunction"),onXOut:c("emptyFunction"),steps:l})};function k(){h.apply(this,arguments)}f.exports=k}),null);
__d("getCampfireKeyBinding",["CampfireCommands","KeyBindingUtil","getDefaultKeyBinding"],(function a(b,c,d,e,f,g){"use strict";var h=c("KeyBindingUtil").hasCommandModifier;function i(j){if(j.keyCode===75&&h(j))return c("CampfireCommands").TOGGLE_LINK;if(j.keyCode===83&&h(j))return c("CampfireCommands").SAVE_DRAFT;return c("getDefaultKeyBinding")(j)}f.exports=i}),null);
__d("replaceTextWithSmartQuotes",["DraftModifier","EditorState","UnicodeBidiDirection","getEntityKeyForSelection","nullthrows"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("UnicodeBidiDirection").LTR,i=/[\s([<{]/,j=/[\s)\]>}]/,k="\u201c",l="\u2018",m="\u201d",n="\u2019",o="'",p='"';function q(s,t){__p&&__p();if(t!==o&&t!==p)return s;var u=s.getCurrentContent(),v=s.getSelection(),w=v.getStartKey();if(u.getBlockForKey(w).getType()==="code-block")return s;var x=s.getCurrentInlineStyle();if(x.has("CODE"))return s;var y=v.getStartOffset(),z=u.getBlockForKey(w).getText(),A=c("nullthrows")(s.getDirectionMap()).get(w),B=y===0||r(z[y-1],t,A),C="";if(B)if(t===o)C=A===h?l:n;else C=A===h?k:m;else if(t===o)C=A===h?n:l;else C=A===h?m:k;var D=c("DraftModifier").replaceText(u,v,C,x,c("getEntityKeyForSelection")(u,v));return c("EditorState").push(s,D,"insert-characters")}function r(s,t,u){var v=u===h?i:j;if(v.test(s))return true;if(t===o)return u===h?s===k:s===m;if(t===p)return u===h?s===l:s===n;return false}f.exports=q}),null);
__d("CampfireComposer.react",["cx","fbt","CampfireByline.react","CampfireCoverPhotoArea.react","RichComposedTextEditor.react","CampfireHeadlineInput.react","DocumentCompositeMentionsSource","EditorState","PagesStoryNUXTour.react","React","ReactDOM","UserAgent","XUIText.react","getCampfireKeyBinding","replaceTextWithSmartQuotes"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j,k,l=c("React").PropTypes,m={title:i._("Titre"),body:i._("\u00c9crivez quelque chose...")},n=c("UserAgent").isBrowser("IE");j=babelHelpers.inherits(o,c("React").Component);k=j&&j.prototype;function o(){"use strict";k.constructor.call(this);this.state={steps:[]}}o.prototype.$CampfireComposer4=function(p,q){"use strict";var r=c("replaceTextWithSmartQuotes")(q,p);if(r!==q){this.props.onChange(r);return true}return false};o.prototype.$CampfireComposer5=function(p,q){"use strict";var r=c("replaceTextWithSmartQuotes")(q,p);if(r!==q){this.props.onTitleChange(r);return true}return false};o.prototype.componentDidMount=function(){"use strict";this.$CampfireComposer2.focus();this.$CampfireComposer6()};o.prototype.$CampfireComposer6=function(){"use strict";__p&&__p();if(!this.props.pageStoryNuxTourData)return;if(!this.$CampfireComposer1||!this.$CampfireComposer2||!this.$CampfireComposer3)return;var p={coverPhoto:c("ReactDOM").findDOMNode(this.$CampfireComposer1),title:c("ReactDOM").findDOMNode(this.$CampfireComposer2),content:c("ReactDOM").findDOMNode(this.$CampfireComposer3)},q=[];Object.keys(this.props.pageStoryNuxTourData).map(function(r){q.push(babelHelpers["extends"]({},this.props.pageStoryNuxTourData[r],{context:p[r]}))}.bind(this));if(q.length!==0)this.setState({steps:q})};o.prototype.render=function(){"use strict";var p=this.props.testConfig,q=null,r=false;if(this.props.coverPhotoEnabled)q=c("React").createElement(c("CampfireCoverPhotoArea.react"),{initialCoverMediaInfo:this.props.initialCoverMediaInfo,noteID:this.props.noteID,onUpdateCoverPhotoPlacement:this.props.onUpdateCoverPhotoPlacement,ownerID:this.props.authorInfo.ownerID,isDoc:this.props.isDoc,isPageStory:this.props.isPageStory,tabIndex:"0",ref:function(t){return this.$CampfireComposer1=t}.bind(this)});var s="_4lmi"+(n?" _1qa_":"");return c("React").createElement("div",null,q,c("React").createElement("div",{className:"_39k2"},c("React").createElement(c("CampfireHeadlineInput.react"),{handleBeforeInput:this.$CampfireComposer5.bind(this),placeholder:m.title,titleState:this.props.titleState,onChange:this.props.onTitleChange,ref:function(t){return this.$CampfireComposer2=t}.bind(this)}),c("React").createElement(c("CampfireByline.react"),{authorName:this.props.authorInfo.name,authorProfileURI:this.props.authorInfo.profileURI,authorProfilePicURI:this.props.authorInfo.profilePic,dateString:this.props.authorInfo.dateString})),c("React").createElement(c("XUIText.react"),{type:"serif",display:"block",className:"_39k5"},c("React").createElement("div",{className:"_v31"},c("React").createElement(c("RichComposedTextEditor.react"),{editorState:this.props.editorState,canAttachVideo:this.props.canAttachVideo,canAttachPhoto:this.props.canAttachPhoto,canAttachEmbed:this.props.canAttachEmbed,className:s,isPageStory:this.props.isPageStory,keyBindingFn:c("getCampfireKeyBinding"),handleBeforeInput:this.$CampfireComposer4.bind(this),handleDroppedFiles:this.props.handleDroppedFiles,blockRendererFn:this.props.blockRendererFn,mentionsSource:this.props.mentionsSource,placeholder:m.body,readOnly:this.props.readOnly,spellCheck:true,autoCorrect:false,compositionID:this.props.noteID,onChange:this.props.onChange,onSave:this.props.onSave,ownerID:this.props.authorInfo.ownerID,ref:function(t){return this.$CampfireComposer3=t}.bind(this)}))),c("React").createElement(c("PagesStoryNUXTour.react"),{steps:this.state.steps}))};o.propTypes={authorInfo:l.object.isRequired,blockRendererFn:l.func,editorState:l.instanceOf(c("EditorState")).isRequired,initialCoverPhotoInfo:l.object,initialTitle:l.string,isDoc:l.bool,isPageStory:l.bool,mentionsSource:l.instanceOf(c("DocumentCompositeMentionsSource")),noteID:l.string.isRequired,pageStoryNuxTourData:l.object,privacyMarkup:l.object,published:l.bool,onClose:l.func,onChange:l.func.isRequired,onSave:l.func.isRequired,onTitleChange:l.func.isRequired,onUpdateCoverPhotoPlacement:l.func,titleState:l.instanceOf(c("EditorState")).isRequired,testConfig:l.object,coverPhotoEnabled:l.bool,canAttachPhoto:l.bool,canAttachVideo:l.bool,canAttachEmbed:l.bool};f.exports=o}),null);
__d("CampfireSimpleWrapper.react",["cx","React"],(function a(b,c,d,e,f,g,h){var i=function i(j){var k={width:j.width};return c("React").createElement("div",null,c("React").createElement("div",{className:"_5gp4",style:k},j.media),j.caption)};f.exports=i}),null);
__d("ComposedImageSize",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({NONE:"NONE",COLUMN:"COLUMN",LARGE:"LARGE",MAXIMUM:"MAXIMUM"})}),null);
__d("ResizableImageDefaults",[],(function a(b,c,d,e,f,g){var h={FULL_SIZE_RATIO:.446,FRICTION:7.5,TENSION:30,SNAP_WIDTHS:[700,900],MIN_WIDTH:400,DRAG_RATE:2,MIN_MINISNAP_VELOCITY:-4};f.exports=h}),null);
__d("ResizableImageHandle.react",["cx","React","joinClasses"],(function a(b,c,d,e,f,g,h){__p&&__p();var i=c("React").PropTypes,j=18,k=40,l=200,m=140,n=60,o=40,p=3,q=c("React").createClass({displayName:"ResizableImageHandle",propTypes:{className:i.string.isRequired,onAdjustWidth:i.func.isRequired,onStartDrag:i.func.isRequired,onEndDrag:i.func.isRequired,imageHeight:i.number.isRequired,imageWidth:i.number.isRequired,maxImageWidth:i.number.isRequired,flipSign:i.bool.isRequired},getInitialState:function r(){return{dragging:false,recentXValues:null}},_onMouseDown:function r(s){s.preventDefault();this.setState({dragging:true,recentXValues:[s.clientX]});this.props.onStartDrag()},_onMouseMove:function r(s){__p&&__p();if(!this.state.dragging)return;s.preventDefault();var t=this.state.recentXValues,u=t[t.length-1],v=0;if(u)v=s.clientX-u;if(v&&this.props.flipSign)v*=-1;if(t.length>=p){t=t.slice(1);t.push(s.clientX)}else t=t.concat(s.clientX);this.props.onAdjustWidth(v);this.setState({recentXValues:t})},_onMouseUp:function r(s){__p&&__p();if(!this.state.dragging)return;var t=this.state.recentXValues,u=0;if(t.length>1){var v=0;for(var w=t.length-1;w>0;w--)v+=t[w]-t[w-1];u=v/(t.length-1);if(u&&this.props.flipSign)u*=-1}this.setState(this.getInitialState());u&&this.props.onEndDrag(u)},_onMouseEnter:function r(s){if(s.nativeEvent.which&&s.relatedTarget===window)this._onMouseDown(s)},_onMouseLeave:function r(s){if(s.nativeEvent.which&&this.state.dragging)this._onMouseUp(s)},render:function r(){__p&&__p();var s=Math.ceil((this.props.maxImageWidth-this.props.imageWidth)/2),t=Math.min(l,Math.max(n,Math.ceil(this.props.imageHeight*.3))),u=Math.min(m,Math.max(o,Math.ceil(this.props.imageWidth*.2))),v={height:t+"px",top:.5*(this.props.imageHeight-t)+"px",width:s+u+"px"},w={marginTop:Math.ceil((t-k)/2)+"px"};if(this.props.flipSign){v.left="-"+s+"px";w.right=u-j+"px"}else{v.right="-"+s+"px";w.left=u-j+"px"}var x=c("joinClasses")(this.props.className,"_5tk_"+(this.state.dragging?" _5tl0":""));return c("React").createElement("div",{className:x,style:v,onMouseDown:this._onMouseDown,onMouseMove:this._onMouseMove,onMouseUp:this._onMouseUp,onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave},c("React").createElement("div",{className:"_5tl1"},c("React").createElement("div",{className:"_5tl2",style:w})))}});f.exports=q}),null);
__d("ResizableWrapper.react",["cx","Event","React","ResizableImageDefaults","ResizableImageHandle.react","rebound"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j,k=c("React").PropTypes,l=c("rebound").MathUtil,m=c("rebound").SpringConfig,n=c("rebound").SpringSystem,o=l.mapValueInRange,p=0,q=1;i=babelHelpers.inherits(r,c("React").Component);j=i&&i.prototype;function r(t){"use strict";j.constructor.call(this,t);s.call(this);var u=t.startWidth,v=t.imageHeight/t.imageWidth,w=Math.min(v*u,t.maxHeight);this.state={width:u,height:w,ratio:v,isMaximized:Math.abs(t.startWidth-t.maxWidth)<2}}r.prototype.componentWillMount=function(){"use strict";this.$ResizableWrapper1=new n();this.$ResizableWrapper2=this.$ResizableWrapper1.createSpring(this.props.tension,this.props.friction);this.$ResizableWrapper2.addListener({onSpringUpdate:function(t){var u=o(t.getCurrentValue(),p,q,this.props.snapWidths[0],this.props.maxWidth);this.setState(this.$ResizableWrapper3(u))}.bind(this),onSpringAtRest:function(t){this.props.onChangeSize(this.state.width);this.props.onFinishResize()}.bind(this)});this.$ResizableWrapper4=c("Event").listen(window,"resize",this.$ResizableWrapper5)};r.prototype.componentWillReceiveProps=function(t){"use strict";var u=t.tension,v=t.friction;if(this.props.nextTension!==u||this.props.nextFriction!==v){var w=m.fromOrigamiTensionAndFriction(t.tension,t.friction);this.$ResizableWrapper2.setSpringConfig(w)}if(this.props.maxWidth!==t.maxWidth||this.props.maxHeight!==t.maxHeight)this.$ResizableWrapper6()};r.prototype.shouldComponentUpdate=function(t,u){"use strict";return this.state.width!==u.width||this.state.height!==u.height||this.state.ratio!==u.ratio||this.props.caption!==t.caption||this.props.maxHeight!==t.maxHeight||this.props.maxWidth!==t.maxWidth||this.state.isMaximized!==u.isMaximized};r.prototype.componentWillUnmount=function(){"use strict";this.$ResizableWrapper1.deregisterSpring(this.$ResizableWrapper2);this.$ResizableWrapper1=this.$ResizableWrapper2=null;this.$ResizableWrapper4.remove();this.$ResizableWrapper4=null};r.prototype.render=function(){"use strict";var t={width:this.state.width},u=this.props.maxWidth-this.state.width;if(u<=0){var v=(this.props.maxWidth-this.state.width)/2;t.left=v}var w="_321w"+(u<=0?" _321x":"");return c("React").createElement("div",{onDragStart:this.$ResizableWrapper7},c("React").createElement("div",{style:t,className:w},c("React").cloneElement(this.props.media,{width:this.state.width,height:this.state.height}),c("React").createElement(c("ResizableImageHandle.react"),{className:"_321y",onAdjustWidth:this.$ResizableWrapper11,onStartDrag:this.$ResizableWrapper8,onEndDrag:this.$ResizableWrapper9,imageHeight:this.state.height,imageWidth:this.state.width,maxImageWidth:this.props.maxWidth,flipSign:true}),c("React").createElement(c("ResizableImageHandle.react"),{className:"_321z",onAdjustWidth:this.$ResizableWrapper11,onStartDrag:this.$ResizableWrapper8,onEndDrag:this.$ResizableWrapper9,imageHeight:this.state.height,imageWidth:this.state.width,maxImageWidth:this.props.maxWidth,flipSign:false})),this.props.caption)};r.propTypes={caption:k.object,friction:k.number,imageHeight:k.number.isRequired,imageWidth:k.number.isRequired,maxWidth:k.number,maxHeight:k.number,media:k.object,onChangeSize:k.func.isRequired,snapWidths:k.array,startWidth:k.number.isRequired,tension:k.number};r.defaultProps={tension:c("ResizableImageDefaults").TENSION,friction:c("ResizableImageDefaults").FRICTION,snapWidths:c("ResizableImageDefaults").SNAP_WIDTHS};var s=function s(){__p&&__p();this.$ResizableWrapper5=function(t){if(t.target===window)this.$ResizableWrapper6()}.bind(this);this.$ResizableWrapper6=function(){var t=this.state.width,u=this.state.height;if(this.state.isMaximized){t=this.props.maxWidth;u=this.props.maxHeight}this.setState({width:t,height:u})}.bind(this);this.$ResizableWrapper7=function(t){t.preventDefault()};this.$ResizableWrapper8=function(t){this.props.onStartResize()}.bind(this);this.$ResizableWrapper9=function(t){__p&&__p();if(this.state.width<this.props.snapWidths[0]){this.$ResizableWrapper10(this.props.snapWidths[0],t);return}var u=this.props.snapWidths.length,v,w;if(t>=0)for(w=0;w<u;w++){v=this.props.snapWidths[w];if(this.state.width<=v){this.$ResizableWrapper10(v,t);return}}else for(w=u;w>=0;w--){v=this.props.snapWidths[w];if(this.state.width>=v){this.$ResizableWrapper10(v,t);return}}v=t>=0?this.props.maxWidth:this.props.snapWidths[0];this.$ResizableWrapper10(v,t)}.bind(this);this.$ResizableWrapper11=function(t){var u=c("ResizableImageDefaults").DRAG_RATE;if(this.state.width<=this.props.snapWidths[0]||this.state.width>=this.props.maxWidth)u=u/10;var v=this.state.width+t*u,w=this.$ResizableWrapper12(v);this.$ResizableWrapper2.setCurrentValue(w).setAtRest()}.bind(this);this.$ResizableWrapper10=function(t,u){var v=u/this.state.width,w=o(v,-.03,.03,-10,10);if(t===this.props.snapWidths[0])w=Math.max(w,c("ResizableImageDefaults").MIN_MINISNAP_VELOCITY);this.$ResizableWrapper2.setVelocity(w).setEndValue(this.$ResizableWrapper12(t))}.bind(this);this.$ResizableWrapper12=function(t){return o(t,this.props.snapWidths[0],this.props.maxWidth,p,q)}.bind(this);this.$ResizableWrapper3=function(t){var u=Math.max(Math.min(this.props.snapWidths[0]*.9,c("ResizableImageDefaults").MIN_WIDTH),t),v=Math.min(this.state.ratio*u,this.props.maxHeight);return{width:u,height:v,isMaximized:u===this.props.maxWidth}}.bind(this)};f.exports=r}),null);
__d("RichComposedTextEditorCaptionInput.react",["cx","fbt","Keys","LeftRight.react","React","UnicodeBidi","XUICloseButton.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("React").PropTypes,m={caption:i._("\u00c9crire une l\u00e9gende...")};j=babelHelpers.inherits(n,c("React").Component);k=j&&j.prototype;function n(){__p&&__p();var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.$RichComposedTextEditorCaptionInput1=function(t){if(t.keyCode===c("Keys").RETURN){this.props.onSaveCaption();t.preventDefault()}else if(t.keyCode===c("Keys").ESC)this.$RichComposedTextEditorCaptionInput2(t)}.bind(this),this.$RichComposedTextEditorCaptionInput2=function(t){t.preventDefault();this.props.onCancelCaption()}.bind(this),this.$RichComposedTextEditorCaptionInput3=function(t){var u=t.target;this.props.onChangeCaption(u.value)}.bind(this),this.focus=function(){this.refs.input.focus()}.bind(this),p}n.prototype.render=function(){var o=this.props.captionText||m.caption.toString(),p=c("UnicodeBidi").getDirection(o);return c("React").createElement(c("LeftRight.react"),{className:"_f4i"},c("React").createElement("input",{type:"text",className:"_f4j",dir:p,onChange:this.$RichComposedTextEditorCaptionInput3,onKeyDown:this.$RichComposedTextEditorCaptionInput1,ref:"input",value:this.props.captionText,placeholder:m.caption}),c("React").createElement(c("XUICloseButton.react"),{className:"_f4k",size:"medium",shade:"dark",onClick:this.$RichComposedTextEditorCaptionInput2}))};n.propTypes={captionText:l.string.isRequired};f.exports=n}),null);
__d("RichComposedTextEditorCaption.react",["cx","fbt","RichComposedTextEditorCaptionInput.react","React","ReactLayeredComponentMixin_DEPRECATED","UnicodeBidi","XUIContextualDialog.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j={caption:i._("cliquez pour ajouter une l\u00e9gende")},k=c("React").createClass({displayName:"RichComposedTextEditorCaption",mixins:[c("ReactLayeredComponentMixin_DEPRECATED")],getInitialState:function l(){return{showCaptionFlyout:false,tempCaption:null}},renderLayers:function l(){var m=this.state.tempCaption===null?this.props.caption:this.state.tempCaption;return{captionFlyout:c("React").createElement(c("XUIContextualDialog.react"),{autoFocus:false,alignment:"center",contextRef:function(){return this.refs.caption}.bind(this),position:"above",onToggle:this.onCaptionFlyoutToggle,shown:this.state.showCaptionFlyout},c("React").createElement(c("RichComposedTextEditorCaptionInput.react"),{captionText:m,onCancelCaption:this.onCancelCaption,onChangeCaption:this.onChangeCaption,onSaveCaption:this.onSaveCaption,ref:"input"}))}},onChangeCaption:function l(m){this.setState({tempCaption:m})},onSaveCaption:function l(){this.props.onSaveCaption(this.state.tempCaption);this.dismissFlyout()},onCancelCaption:function l(){this.dismissFlyout()},onCaptionMouseDown:function l(m){m.preventDefault();this.setState({showCaptionFlyout:true,tempCaption:this.props.caption},function(){setTimeout(function(){this.refs.input.focus()}.bind(this),100)}.bind(this))},dismissFlyout:function l(){this.setState({showCaptionFlyout:false,tempCaption:null});this.props.onDismissCaption()},render:function l(){var m=this.props.caption||j.caption.toString(),n=c("UnicodeBidi").getDirection(m),o=m&&m.length,p="_1cue"+(o?" _1cuf":"");return c("React").createElement("span",{className:p,dir:n,onMouseDown:this.onCaptionMouseDown,tabIndex:"-2",ref:"caption"},m||j.caption)}});f.exports=k}),null);
__d("RichComposedTextEditorRemoveControl.react",["cx","fbt","React","ShimButton.react"],(function a(b,c,d,e,f,g,h,i){var j={remove:i._("Supprimer")},k=function k(l){return c("React").createElement("div",{className:"_2gyp"},c("React").createElement(c("ShimButton.react"),{className:"_2gyy",inline:true,onClick:l.onRemove},j.remove))};f.exports=k}),null);
__d("RichComposedTextEditorEmbed.react",["cx","RichComposedTextEditorRemoveControl.react","CampfireEmbedParent","ControlledRefererIFrame.react","Event","Image.react","React","XUISpinner.react","fbglyph"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;function k(m){"use strict";j.constructor.call(this,m);l.call(this);var n=m.entity.getData();this.state={height:n.height,loading:true,width:n.width}}k.prototype.componentDidMount=function(){"use strict";var m=this.props.entity.getData();if(m.type==="facebook"||m.type==="instagram"||m.type==="twitter")this.$RichComposedTextEditorEmbed1=c("Event").listen(window,"message",this.$RichComposedTextEditorEmbed2);else this.$RichComposedTextEditorEmbed4=setTimeout(this.$RichComposedTextEditorEmbed3,1e3)};k.prototype.componentWillUnmount=function(){"use strict";if(this.$RichComposedTextEditorEmbed1){this.$RichComposedTextEditorEmbed1.remove();this.$RichComposedTextEditorEmbed1=null}if(this.$RichComposedTextEditorEmbed4)clearInterval(this.$RichComposedTextEditorEmbed4)};k.prototype.renderIFrame=function(){"use strict";var m=this.props.entity.getData(),n={};if(this.state.loading){n.position="absolute";n.visibility="hidden"}return c("React").createElement("div",{style:n},c("React").createElement(c("ControlledRefererIFrame.react"),{allowFullScreen:"true",frameBorder:"0",height:this.state.height,onLoad:this.props.onMediaLoaded,src:m.src,width:this.state.width}))};k.prototype.renderPlaceholder=function(){"use strict";if(!this.state.loading)return null;var m={height:this.state.height,width:this.state.width};return c("React").createElement("div",{className:"_5rcm",style:m},c("React").createElement(c("XUISpinner.react"),{className:"_5rcn",size:"large"}))};k.prototype.renderEmbed=function(){"use strict";var m={};if(this.state.loading){m.height=this.state.height;m.width=this.state.width}return c("React").createElement("div",{className:"_5rco",style:m},this.renderIFrame(),this.renderPlaceholder())};k.prototype.render=function(){"use strict";return c("React").createElement("div",{className:"_5rcp"},this.renderEmbed(),c("React").createElement(c("RichComposedTextEditorRemoveControl.react"),{onRemove:this.props.onRemove}))};var l=function l(){__p&&__p();this.$RichComposedTextEditorEmbed2=function(m){var n=c("CampfireEmbedParent").parse(m,this.props.entity.getData().src);if(!n)return;this.setState({height:n.height,loading:false,width:n.width},this.props.onFinishResize);if(this.$RichComposedTextEditorEmbed1){this.$RichComposedTextEditorEmbed1.remove();this.$RichComposedTextEditorEmbed1=null}}.bind(this);this.$RichComposedTextEditorEmbed3=function(){this.setState({loading:false});this.$RichComposedTextEditorEmbed4=null}.bind(this)};f.exports=k}),null);
__d("RichComposedTextEditorAlignControl.react",["cx","fbt","React"],(function a(b,c,d,e,f,g,h,i){var j={left:i._("\u00c0 gauche"),center:i._("Centrer"),right:i._("\u00c0 droite")},k=function k(l){return c("React").createElement("ul",{className:"_ssc"},c("React").createElement("li",{className:"_ssd",onMouseDown:l.onSelectAlignment.bind(null,"left")},j.left),c("React").createElement("li",{className:"_sse",onMouseDown:l.onSelectAlignment.bind(null,null)},j.center),c("React").createElement("li",{className:"_ssf",onMouseDown:l.onSelectAlignment.bind(null,"right")},j.right))};f.exports=k}),null);
__d("RichTextEditorImagePlaceholder.react",["cx","React","joinClasses"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;l.prototype.render=function(){"use strict";var m=c("joinClasses")(this.props.className,"_17gi");return c("React").createElement("div",{className:m,style:this.props.style},c("React").createElement("div",{className:"_17gj",style:{marginLeft:"-20px",marginTop:"-20px"}}),this.props.children)};function l(){"use strict";i.apply(this,arguments)}l.propTypes={className:k.string,style:k.object};f.exports=l}),null);
__d("getImageDimensionsStyleObject",["PhotoResizeMath"],(function a(b,c,d,e,f,g){function h(i,j,k,l){var m=c("PhotoResizeMath").getScaledPhotoDimensions(i,j,k,l,"contain");return{width:parseInt(m.width,10)+"px",height:parseInt(m.height,10)+"px"}}f.exports=h}),null);
__d("RichComposedTextEditorImage.react",["cx","fbt","BackgroundImage.react","RichComposedTextEditorAlignControl.react","RichComposedTextEditorRemoveControl.react","CampfirePhotoUploadRequest","EncryptedImg","FBAnimatedProgressBar.react","React","RichTextEditorImagePlaceholder.react","cssURL","getImageDimensionsStyleObject"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j=c("React").PropTypes,k={left:i._("\u00c0 gauche"),center:i._("Centrer"),right:i._("\u00c0 droite"),remove:i._("Supprimer")},l=700,m=700,n=c("React").createClass({displayName:"RichComposedTextEditorImage",propTypes:{entity:j.object.isRequired,onRemove:j.func.isRequired,onSelectAlignment:j.func.isRequired,ownerID:j.string.isRequired},getInitialState:function o(){return{image:null,imageProgressPercentage:0,imageUploading:false}},componentWillMount:function o(){this._initImage(this.props)},shouldComponentUpdate:function o(p,q){return this.props.entity!==p.entity||this.state.image!==q.image||this.props.width!==p.width||this.state.imageProgressPercentage!==q.imageProgressPercentage||this.state.imageUploading!==q.imageUploading},_selectAlignment:function o(p){this.props.onSelectAlignment(p)},_onRemove:function o(){this.props.onRemove()},render:function o(){__p&&__p();var p=this.props.entity.getData(),q=null;if(!this.state.image)q=this._renderPlaceholder(p);else if(this.state.imageUploading)q=this._renderUploading();else q=this._renderImage(p);var r=null,s=null,t=null;if(this.state.imageUploading)r=c("React").createElement("div",{className:"_2_e1"},c("React").createElement(c("FBAnimatedProgressBar.react"),{animate:true,className:"_2_e2",key:"progressBar",percent:this.state.imageProgressPercentage,duration:1}));else{s=c("React").createElement(c("RichComposedTextEditorAlignControl.react"),{onSelectAlignment:this._selectAlignment});t=c("React").createElement(c("RichComposedTextEditorRemoveControl.react"),{onRemove:this._onRemove})}return c("React").createElement("div",{className:"_2_e3",ref:"root"},r,q,s,t)},_renderPlaceholder:function o(p){var q=c("getImageDimensionsStyleObject")(p.width||l,p.height||m*(2/3),l,m);return c("React").createElement(c("RichTextEditorImagePlaceholder.react"),{style:q})},_renderUploading:function o(){var p=c("getImageDimensionsStyleObject")(this.state.image.width,this.state.image.height,Math.min(this.state.image.width,l),Math.min(this.state.image.height,m));p.backgroundImage=c("cssURL")(this.state.image.src);return c("React").createElement("div",{className:"_2_e4"+(this.state.imageUploading?" _2_e6":""),contentEditable:false,style:p})},_renderImage:function o(){return c("React").createElement(c("BackgroundImage.react"),{width:this.props.width,height:this.props.height,src:this.state.image.src,backgroundSize:"cover",loadingIndicatorStyle:"none"})},_initImage:function o(p){__p&&__p();var q=this.props.entity,r=q.getData(),s=!!r.originalPhotoData,t=null;if(s){var u=r.originalPhotoData;t=u.src;this._sendPhotoUploadRequest(r.compositionID,{originalPhotoID:u.id,ownerID:this.props.ownerID,onFinished:function(v){var w=v.payload.photoData,x=this.props.block.getEntityAt(0);this.props.contentState.mergeEntityData(x,{src:w.src,id:w.id,originalPhotoData:null});this._isPhotoUploading(false)}.bind(this)})}else if(r.fileInput)this._sendPhotoUploadRequest(r.compositionID,{fileInput:r.fileInput,ownerID:this.props.ownerID,onFinished:function(v){var w=v.payload.photoData,x=this.props.block.getEntityAt(0);this.props.contentState.replaceEntityData(x,w);this._loadImage(w.src);this._isPhotoUploading(false)}.bind(this)});else if(r.files)this._sendPhotoUploadRequest(r.compositionID,{files:r.files,ownerID:this.props.ownerID,onFinished:function(v){var w=v.payload.photoData,x=this.props.block.getEntityAt(0);this.props.contentState.replaceEntityData(x,w);this._loadImage(w.src);this._isPhotoUploading(false)}.bind(this)});else t=r.src;if(t&&(!this.state.image||t!==this.state.image.src))this._loadImage(t)},_isPhotoUploading:function o(p){this.setState({imageUploading:p});this.props.onMediaUploading(p)},_loadImage:function o(p,q){var r=new Image();r.src=p;r.onload=function(){this.setState({image:r});this.props.onMediaLoaded()}.bind(this);if(c("EncryptedImg").isEncrypted(p))r.onerror=r.onload},_onPhotoProgress:function o(p){this.isMounted()&&this.setState({imageProgressPercentage:p})},_sendPhotoUploadRequest:function o(p,q){var r=babelHelpers["extends"]({},q,{onProgress:this._onPhotoProgress});this._isPhotoUploading(true);new(c("CampfirePhotoUploadRequest"))(p,r).send()}});f.exports=n}),null);
__d("RichComposedTextEditorVideo.react",["React","Video.react"],(function a(b,c,d,e,f,g){__p&&__p();var h,i,j=c("React").PropTypes;h=babelHelpers.inherits(k,c("React").Component);i=h&&h.prototype;k.prototype.componentDidMount=function(){"use strict";this.props.onMediaLoaded()};k.prototype.render=function(){"use strict";var l=this.props.entity.getData();return c("React").createElement(c("Video.react"),{height:this.props.height,width:this.props.width,src:l.hdSrc,poster:l.posterSrc})};function k(){"use strict";h.apply(this,arguments)}k.propTypes={entity:j.object.isRequired,onMediaLoaded:j.func.isRequired};f.exports=k}),null);
__d("CampfireMediaBlock.react",["cx","invariant","RichComposedTextEditorEmbed.react","RichComposedTextEditorImage.react","RichComposedTextEditorVideo.react","RichComposedTextEditorCaption.react","ComposedImageSize","ContentBlock","DraftOffsetKey","DOMDimensions","Event","React","ReactDOM","ResizableImageDefaults","ResizableWrapper.react","CampfireSimpleWrapper.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("DOMDimensions").getElementDimensions,m=c("React").PropTypes,n=700,o=700,p=400,q=400,r=.6,s=c("ResizableImageDefaults").SNAP_WIDTHS,t=s[0],u=s[1],v={cursor:"text",height:64,position:"absolute",top:-64,width:"100%"};j=babelHelpers.inherits(w,c("React").Component);k=j&&j.prototype;function w(){__p&&__p();var z,A;for(var B=arguments.length,C=Array(B),D=0;D<B;D++)C[D]=arguments[D];return A=(z=k.constructor).call.apply(z,[this].concat(C)),this.state={mediaLoaded:false,maxWidth:null,maxHeight:null},this.$CampfireMediaBlock1=function(){var E=l(c("ReactDOM").findDOMNode(this.refs.root)).width,F=y(this.props).getData(),G=F.height,H=F.width,I=G/H,J=Math.min(E*I,E*r);this.setState({maxWidth:E,maxHeight:J})}.bind(this),this.getStoredCaption=function(){var E="";if(this.state.mediaLoaded){var F=y(this.props);E=F.getData().caption||""}return E}.bind(this),this.$CampfireMediaBlock4=function(E){__p&&__p();var F=y(this.props),G=F.getData(),H=this.renderAttachment();if(!G.width||!G.height)return c("React").cloneElement(H,{width:p,height:q});var I=Math.ceil(this.state.maxWidth+1),J,K,L=G.height,M=G.width,N=L/M;if(N>=1){K=Math.min(L,q);J=K/N}else{J=Math.min(M,p);K=J*N}K=Math.floor(K);J=Math.floor(J);var O=(I-n)/2,P=(E==="left"?"_5o_i":"")+(E==="right"?" _5o_j":""),Q={marginLeft:E==="left"?O:null,marginRight:E==="right"?O:null,width:J};return c("React").createElement("div",{className:P,style:Q},c("React").cloneElement(H,{width:J,height:K}),this.$CampfireMediaBlock3())}.bind(this),this.$CampfireMediaBlock5=function(){var E=this.$CampfireMediaBlock3(),F=this.renderAttachment(),G=y(this.props).getData().width;return c("React").createElement(c("CampfireSimpleWrapper.react"),{caption:E,media:F,onFinishResize:this.props.blockProps.onFinishResize,width:G})}.bind(this),this.$CampfireMediaBlock6=function(){__p&&__p();var E=y(this.props),F=E.getData(),G=this.renderAttachment();if(!F.width||!F.height)return c("React").cloneElement(G,{width:n,height:o});var H=this.$CampfireMediaBlock3(),I=F.size,J,K,L=F.height,M=F.width,N=L/M,O=Math.ceil(this.state.maxWidth+1),P=this.props.isFullScreen?Infinity:O,Q=Math.min(P*N,P*r);if(N>=1){K=Math.min(L,Q,o);J=K/N}else{J=Math.min(M,P,n);K=J*N}var R=void 0;switch(I){case c("ComposedImageSize").MAXIMUM:R=O;break;case c("ComposedImageSize").LARGE:R=u;break;case c("ComposedImageSize").COLUMN:R=t;break;default:R=J<t?J:t}var S=s;if(J<S[0])S=[J].concat(S);return c("React").createElement(c("ResizableWrapper.react"),{imageWidth:J,imageHeight:K,snapWidths:S,startWidth:R,maxWidth:P,maxHeight:Q,onChangeSize:this.$CampfireMediaBlock7,onStartResize:this.props.blockProps.onStartResize,onFinishResize:this.props.blockProps.onFinishResize,caption:H,media:G})}.bind(this),this.$CampfireMediaBlock9=function(E){E.preventDefault();this.props.blockProps.onClickBuffer(this.props.block.getKey())}.bind(this),this.$CampfireMediaBlock10=function(E){var F=E||null;this.props.contentState.mergeEntityData(x(this.props),{"float":F});this.forceUpdate()}.bind(this),this.$CampfireMediaBlock11=function(){this.props.blockProps.onRemoveMedia(this.props.block.getKey())}.bind(this),this.$CampfireMediaBlock7=function(E){__p&&__p();var F=null;if(E!==y(this.props).getData().width)switch(E){case t:F=c("ComposedImageSize").COLUMN;break;case u:F=c("ComposedImageSize").LARGE;break;default:if(E>u)F=c("ComposedImageSize").MAXIMUM}this.props.blockProps.onChangeSize(this.props.block.getKey(),F)}.bind(this),this.$CampfireMediaBlock8=function(E){E.preventDefault()},this.onMediaLoaded=function(){this.setState({mediaLoaded:true})}.bind(this),this.onMediaUnloaded=function(){this.setState({mediaLoaded:false})}.bind(this),this.onSaveCaption=function(E){var F=x(this.props);this.props.contentState.mergeEntityData(F,{caption:E})}.bind(this),this.onDismissCaption=function(){if(this.props.blockProps.onDismissCaption)this.props.blockProps.onDismissCaption()}.bind(this),A}w.prototype.componentWillMount=function(){var z=y(this.props),A=z.getType();A==="EMBED"||A==="IMAGE"||A==="VIDEO"||i(0)};w.prototype.componentDidMount=function(){this.$CampfireMediaBlock1();this.$CampfireMediaBlock2=c("Event").listen(window,"resize",this.$CampfireMediaBlock1)};w.prototype.componentWillUnmount=function(){if(this.$CampfireMediaBlock2){this.$CampfireMediaBlock2.remove();this.$CampfireMediaBlock2=null}};w.prototype.$CampfireMediaBlock3=function(){return c("React").createElement(c("RichComposedTextEditorCaption.react"),{onSaveCaption:this.onSaveCaption,onDismissCaption:this.onDismissCaption,caption:this.getStoredCaption()})};w.prototype.render=function(){var z=y(this.props),A=z.getData()["float"],B="_5qui"+(!!A?" _5o_v":""),C=this.props.block.getKey(),D=c("DraftOffsetKey").encode(C,0,0),E=null;if(z.getType()==="EMBED")E=this.$CampfireMediaBlock5();else if(A)E=this.$CampfireMediaBlock4(A);else if(this.state.maxWidth)E=this.$CampfireMediaBlock6();return c("React").createElement("div",{className:B,onMouseDown:this.$CampfireMediaBlock8},c("React").createElement("div",{style:v,onMouseDown:this.$CampfireMediaBlock9}),c("React").createElement("div",{className:"_1jzx",ref:"root"},E))};w.prototype.renderAttachment=function(){var z=y(this.props),A=this.props.blockProps,B=A.isFullScreen,C=A.ownerID,D=A.onFinishResize,E=A.onMediaUploading,F=babelHelpers["extends"]({},this.props,{entity:z,isFullScreen:B,ownerID:C,onFinishResize:D,onMediaUploading:E,onMediaLoaded:this.onMediaLoaded,onMediaUnloaded:this.onMediaUnloaded,onRemove:this.$CampfireMediaBlock11,onSelectAlignment:this.$CampfireMediaBlock10});switch(z.getType()){case"EMBED":return c("React").createElement(c("RichComposedTextEditorEmbed.react"),F);case"IMAGE":return c("React").createElement(c("RichComposedTextEditorImage.react"),F);case"VIDEO":return c("React").createElement(c("RichComposedTextEditorVideo.react"),F);default:i(0);return null}};w.propTypes={block:m.instanceOf(c("ContentBlock")).isRequired,blockProps:m.object};function x(z){return z.block.getEntityAt(0)}function y(z){return z.contentState.getEntity(x(z))}f.exports=w}),null);
__d("DocsComposerMenuBar.react",["ix","cx","fbt","HelpLink.react","Image.react","InputLabel.react","LeftRight.react","React","XUIButton.react","XUICheckboxInput.react","fbglyph"],(function a(b,c,d,e,f,g,h,i,j){__p&&__p();var k,l,m=c("React").PropTypes,n={save:j._("Enregistrer"),saving:j._("Enregistrement..."),saved:j._("Enregistr\u00e9"),publish:j._("Publier"),publishing:j._("Publication..."),publishUpdate:j._("Publier la mise \u00e0 jour"),remove:j._("Supprimer")};k=babelHelpers.inherits(o,c("React").Component);l=k&&k.prototype;function o(){var p,q;"use strict";for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=l.constructor).call.apply(p,[this].concat(s)),this.state={onlyAuthorMayEdit:this.props.onlyAuthorMayEdit},q}o.prototype.render=function(){"use strict";__p&&__p();var p=[];if(!this.props.published){var q=this.props.isSaving||this.props.justSaved,r,s;if(this.props.justSaved){r=c("React").createElement(c("Image.react"),{src:h("136996")});s=n.saved}else if(q)s=n.saving;else s=n.save;p.push(c("React").createElement(c("XUIButton.react"),{disabled:q,key:"saveButton",image:r,label:s,onClick:q?null:this.props.onSaveDraft,size:"medium"}))}var t=this.props.isPublishing,u=n.publish;if(t)u=n.publishing;else if(this.props.published)u=n.publishUpdate;p.push(c("React").createElement(c("XUIButton.react"),{disabled:t,key:"publishButton",label:u,onClick:t?null:this.props.onPublish,size:"medium",use:"confirm"}));var v=null;if(this.props.isCreated)v=c("React").createElement(c("XUIButton.react"),{label:n.remove,onClick:this.props.onDeleteDoc,size:"large",className:"_3-90 _5w5a"});var w=null;if(this.props.canLimitEdition){var x=j._("Si vous d\u00e9cochez cette case, seuls vous et les administrateurs du groupe peuvent modifier le document.");w=c("React").createElement("div",{className:"_5w5b"},c("React").createElement(c("InputLabel.react"),{className:"_5w5c",label:j._("Autoriser les membres du groupe \u00e0 modifier ce document")},c("React").createElement(c("XUICheckboxInput.react"),{defaultChecked:!this.state.onlyAuthorMayEdit,onChange:this.props.onOnlyAuthorMayEditChange})),c("React").createElement("div",{className:"_5w5c"},c("React").createElement(c("HelpLink.react"),{tooltip:x,alignv:"bottom"})))}return c("React").createElement("div",{className:"_2bfz"},c("React").createElement("div",{className:"_18_m clearfix"},c("React").createElement(c("LeftRight.react"),null,c("React").createElement("div",null,v,w),c("React").createElement("div",null,p))))};o.propTypes={isSaving:m.bool.isRequired,isPublishing:m.bool.isRequired,onDeleteDoc:m.func,onPublish:m.func,onSaveDraft:m.func,justSaved:m.bool,canLimitEdition:m.bool,onlyAuthorMayEdit:m.bool,onOnlyAuthorMayEditChange:m.func};f.exports=o}),null);
__d("XGroupDocSaveController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/groups/docupload/",{})}),null);
__d("createRichComposedTextEditorState",["CompositeDraftDecorator","EditorState","EmojiSpan.react","HashtagSpan.react","ImplicitLink.react","MentionSpan.react","RichTextEditorLink.react","getEntityMatcher","getHashtagMatches","getImplicitURLMatches"],(function a(b,c,d,e,f,g){var h;function i(j){if(!h)h=new(c("CompositeDraftDecorator"))([{strategy:c("getEntityMatcher")(function(k){return k.getType()==="LINK"}),component:c("RichTextEditorLink.react")},{strategy:c("getEntityMatcher")(function(k){return k.getType()==="MENTION"}),component:c("MentionSpan.react")},{strategy:c("getImplicitURLMatches"),component:c("ImplicitLink.react")},{strategy:c("getHashtagMatches"),component:c("HashtagSpan.react")},{strategy:c("getEntityMatcher")(function(k){return k.getType()==="EMOJI"}),component:c("EmojiSpan.react")}]);return c("EditorState").createWithContent(j,h)}f.exports=i}),null);
__d("GroupDocEditorOverlay",["fbt","ActorURI","AsyncRequest","Bootloader","CampfireComposer.react","CampfireMediaBlock.react","ContentState","DialogX","DraftModifier","DOM","EditorState","ExceptionDialog","LayerDestroyOnHide","LayerHideOnTransition","DocsComposerMenuBar.react","React","ReactDOM","Run","SelectionState","SubscriptionsHandler","TypewriterLayer","XGroupDocSaveController","URI","XUIDialogBody.react","XUIDialogButton.react","XUIDialogFooter.react","XUIDialogTitle.react","XUIGrayText.react","createRichComposedTextEditorState","decodeBlocks","encodeBlocks","getRichComposedTextDataForSave","getImplicitURLRangesForContentState","nullthrows"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=2e3,j={Ready:"ready",Saving:"saving",Saved:"saved",Publishing:"publishing"};function k(l,m,n){__p&&__p();this.$GroupDocEditorOverlay15=c("DOM").create("div");this.$GroupDocEditorOverlay12=new(c("TypewriterLayer"))({addedBehaviors:[c("LayerDestroyOnHide"),c("LayerHideOnTransition")]},this.$GroupDocEditorOverlay15);this.$GroupDocEditorOverlay12.show();this.$GroupDocEditorOverlay23=n;this.$GroupDocEditorOverlay3=m;this.$GroupDocEditorOverlay11=l;var o=this.$GroupDocEditorOverlay3.composedBlocks,p=void 0;if(o&&o.length)p=c("decodeBlocks")(c("nullthrows")(o),c("nullthrows")(m.composedEntities));else p=c("ContentState").createFromText("");this.$GroupDocEditorOverlay6=c("createRichComposedTextEditorState")(p);this.$GroupDocEditorOverlay9=this.$GroupDocEditorOverlay6.getCurrentContent();this.$GroupDocEditorOverlay8=this.$GroupDocEditorOverlay9;var q=c("ContentState").createFromText(m.title);this.$GroupDocEditorOverlay20=c("EditorState").createWithContent(q);this.$GroupDocEditorOverlay4=null;this.$GroupDocEditorOverlay5={};this.$GroupDocEditorOverlay18=false;this.$GroupDocEditorOverlay19=new(c("SubscriptionsHandler"))();this.$GroupDocEditorOverlay2=false;this.$GroupDocEditorOverlay16=j.Ready;this.$GroupDocEditorOverlay17=m.published;this.$GroupDocEditorOverlay24=this.$GroupDocEditorOverlay3.limitEdition.onlyAuthor;this.$GroupDocEditorOverlay21=false;this.$GroupDocEditorOverlay14=false;this.$GroupDocEditorOverlay10={component:c("CampfireMediaBlock.react"),editable:false,props:{isFullScreen:false,onChangeSize:this.$GroupDocEditorOverlay25.bind(this),onStartResize:this.$GroupDocEditorOverlay26.bind(this),onFinishResize:this.$GroupDocEditorOverlay27.bind(this),onRemoveMedia:this.$GroupDocEditorOverlay28.bind(this),onClickBuffer:this.$GroupDocEditorOverlay29.bind(this),onMediaUploading:this.$GroupDocEditorOverlay30.bind(this),onDismissCaption:this.$GroupDocEditorOverlay31.bind(this),ownerID:this.$GroupDocEditorOverlay3.authorInfo.ownerID}};this.$GroupDocEditorOverlay12.subscribe("beforehide",this.$GroupDocEditorOverlay32.bind(this));c("Run").onBeforeUnload(this.$GroupDocEditorOverlay33.bind(this));this.$GroupDocEditorOverlay34()}k.prototype.$GroupDocEditorOverlay35=function(l){if(l.getType()==="atomic")return this.$GroupDocEditorOverlay10;return null};k.prototype.$GroupDocEditorOverlay36=function(){c("Bootloader").loadModules(["CampfireMessage.react","CampfireMessageLayer","Link.react"],function(l,m,n){var o=new m({addedBehaviors:[c("LayerDestroyOnHide"),c("LayerHideOnTransition")]},c("React").createElement(l,{onClose:function p(){return o.hide()}},h._("Votre brouillon a \u00e9t\u00e9 enregistr\u00e9. Vous le trouverez dans la {notesLink}.",[h.param("notesLink",c("React").createElement(n,{href:this.$GroupDocEditorOverlay3.draftDocsURI},h._("Section des fichiers")))])));o.show()}.bind(this),"GroupDocEditorOverlay")};k.prototype.$GroupDocEditorOverlay25=function(l,m){var n=this.$GroupDocEditorOverlay6.getCurrentContent(),o=n.getBlockForKey(l),p=c("nullthrows")(c("nullthrows")(o).getEntityAt(0));n.mergeEntityData(p,{size:m||null})};k.prototype.$GroupDocEditorOverlay26=function(){this.$GroupDocEditorOverlay14=true;this.$GroupDocEditorOverlay34()};k.prototype.$GroupDocEditorOverlay27=function(){this.$GroupDocEditorOverlay14=false;var l=this.$GroupDocEditorOverlay6.getSelection();if(l.getHasFocus())this.$GroupDocEditorOverlay6=c("EditorState").forceSelection(this.$GroupDocEditorOverlay6,l);this.$GroupDocEditorOverlay34()};k.prototype.$GroupDocEditorOverlay28=function(l){var m=this.$GroupDocEditorOverlay6.getCurrentContent(),n=m.getBlockForKey(l),o=new(c("SelectionState"))({anchorKey:l,anchorOffset:0,focusKey:l,focusOffset:n.getLength()}),p=c("DraftModifier").removeRange(m,o,"backward"),q=c("DraftModifier").setBlockType(p,p.getSelectionAfter(),"unstyled"),r=c("EditorState").push(this.$GroupDocEditorOverlay6,q,"remove-range"),s=c("EditorState").forceSelection(r,q.getSelectionAfter());this.$GroupDocEditorOverlay37(s)};k.prototype.$GroupDocEditorOverlay29=function(l){var m=this.$GroupDocEditorOverlay6.getCurrentContent(),n=m.getBlockBefore(l);if(!n||n.getType()==="atomic"){var o=new(c("SelectionState"))({anchorKey:l,anchorOffset:0,focusKey:l,focusOffset:0}),p=c("DraftModifier").splitBlock(m,o),q=p.getBlockBefore(p.getSelectionAfter().getAnchorKey()),r=c("nullthrows")(q).getKey(),s=new(c("SelectionState"))({anchorKey:r,anchorOffset:0,focusKey:r,focusOffset:0}),t=c("DraftModifier").setBlockType(p,s,"unstyled"),u=c("EditorState").push(this.$GroupDocEditorOverlay6,t,"split-block"),v=c("EditorState").forceSelection(u,s);this.$GroupDocEditorOverlay37(v);return}var w=n.getKey(),x=n.getLength();this.$GroupDocEditorOverlay37(c("EditorState").forceSelection(this.$GroupDocEditorOverlay6,new(c("SelectionState"))({anchorKey:w,anchorOffset:x,focusKey:w,focusOffset:x,hasFocus:true,isBackward:false})))};k.prototype.$GroupDocEditorOverlay30=function(l){this.$GroupDocEditorOverlay21=l};k.prototype.$GroupDocEditorOverlay31=function(){this.$GroupDocEditorOverlay37(c("EditorState").forceSelection(this.$GroupDocEditorOverlay6,this.$GroupDocEditorOverlay6.getSelection().set("hasFocus",true)))};k.prototype.$GroupDocEditorOverlay38=function(){return this.$GroupDocEditorOverlay9!==this.$GroupDocEditorOverlay6.getCurrentContent()};k.prototype.$GroupDocEditorOverlay33=function(){if(!this.$GroupDocEditorOverlay2&&this.$GroupDocEditorOverlay38())return h._("Vos modifications ne sont pas enregistr\u00e9es et seront perdues si vous quittez la page.")};k.prototype.$GroupDocEditorOverlay32=function(){__p&&__p();if(this.$GroupDocEditorOverlay2)return true;if(this.$GroupDocEditorOverlay22)return false;if(this.$GroupDocEditorOverlay38()){this.$GroupDocEditorOverlay39();return false}if(!this.$GroupDocEditorOverlay40()&&!this.$GroupDocEditorOverlay17)this.$GroupDocEditorOverlay36();return true};k.prototype.$GroupDocEditorOverlay39=function(){var l=new(c("DialogX"))({width:555,addedBehaviors:[c("LayerDestroyOnHide")],xui:true},c("React").createElement("div",null,c("React").createElement(c("XUIDialogTitle.react"),{showCloseButton:false},h._("Souhaitez-vous vraiment quitter cette page\u00a0?")),c("React").createElement(c("XUIDialogBody.react"),null,c("React").createElement(c("XUIGrayText.react"),{shade:"medium",size:"medium"},h._("Vos modifications ne sont pas enregistr\u00e9es et seront perdues si vous quittez la page."))),c("React").createElement(c("XUIDialogFooter.react"),null,c("React").createElement(c("XUIDialogButton.react"),{label:h._("Rester sur cette page"),action:"cancel",use:"default"}),c("React").createElement(c("XUIDialogButton.react"),{label:h._("Quitter cette page"),action:"confirm",use:"confirm",className:"autofocus"}))));this.$GroupDocEditorOverlay19.addSubscriptions(l.subscribe("confirm",function(){this.$GroupDocEditorOverlay41(l)}.bind(this)),l.subscribe("cancel",function(){this.$GroupDocEditorOverlay42()}.bind(this)));l.show();this.$GroupDocEditorOverlay22=true};k.prototype.$GroupDocEditorOverlay41=function(l){this.$GroupDocEditorOverlay43();this.$GroupDocEditorOverlay2=true;l.hide();this.$GroupDocEditorOverlay12.hide();this.$GroupDocEditorOverlay22=false};k.prototype.$GroupDocEditorOverlay42=function(){this.$GroupDocEditorOverlay43();this.$GroupDocEditorOverlay22=false};k.prototype.$GroupDocEditorOverlay43=function(){this.$GroupDocEditorOverlay19.release();this.$GroupDocEditorOverlay19.engage()};k.prototype.$GroupDocEditorOverlay40=function(){var l=this.$GroupDocEditorOverlay20.getCurrentContent().getPlainText();return l.trim()===""};k.prototype.$GroupDocEditorOverlay37=function(l){if(this.$GroupDocEditorOverlay6!==l){this.$GroupDocEditorOverlay6=l;this.$GroupDocEditorOverlay34()}};k.prototype.$GroupDocEditorOverlay44=function(){this.$GroupDocEditorOverlay9=this.$GroupDocEditorOverlay6.getCurrentContent()};k.prototype.$GroupDocEditorOverlay45=function(){this.$GroupDocEditorOverlay46(true)};k.prototype.$GroupDocEditorOverlay47=function(){this.$GroupDocEditorOverlay46(false)};k.prototype.$GroupDocEditorOverlay46=function(l){__p&&__p();if(this.$GroupDocEditorOverlay21)return;var m=function(p){this.$GroupDocEditorOverlay11=String(p.payload.doc_id);this.$GroupDocEditorOverlay16=j.Saved;this.$GroupDocEditorOverlay34(function(){this.$GroupDocEditorOverlay1&&clearTimeout(this.$GroupDocEditorOverlay1);this.$GroupDocEditorOverlay1=setTimeout(function(){this.$GroupDocEditorOverlay16=j.Ready;this.$GroupDocEditorOverlay9=this.$GroupDocEditorOverlay6.getCurrentContent();this.$GroupDocEditorOverlay34()}.bind(this),i)}.bind(this));this.$GroupDocEditorOverlay44()}.bind(this),n=function(){this.$GroupDocEditorOverlay17=true;this.$GroupDocEditorOverlay2=true;this.$GroupDocEditorOverlay12.hide()}.bind(this),o=function(p){this.$GroupDocEditorOverlay48(p.errorSummary,p.errorDescription);this.$GroupDocEditorOverlay16=j.Ready;this.$GroupDocEditorOverlay34()}.bind(this);this.$GroupDocEditorOverlay16=l?j.Saving:j.Publishing;this.$GroupDocEditorOverlay34(function(){if(l)this.$GroupDocEditorOverlay49(m,o,l);else this.$GroupDocEditorOverlay49(n,o,l)}.bind(this))};k.prototype.$GroupDocEditorOverlay48=function(l,m){if(this.$GroupDocEditorOverlay7)this.$GroupDocEditorOverlay7.hide();this.$GroupDocEditorOverlay7=c("ExceptionDialog").show(l,m);c("nullthrows")(this.$GroupDocEditorOverlay7).subscribe("hide",function(){this.$GroupDocEditorOverlay7=null}.bind(this))};k.prototype.$GroupDocEditorOverlay50=function(){var l=function(){this.$GroupDocEditorOverlay2=true;this.$GroupDocEditorOverlay12.hide()}.bind(this),m=function(o){this.$GroupDocEditorOverlay48(o.errorSummary,o.errorDescription)}.bind(this),n=new(c("URI"))("/ajax/notes/delete.php");n.addQueryData({note_id:this.$GroupDocEditorOverlay11});new(c("AsyncRequest"))(n).setHandler(l).setErrorHandler(m).setMethod("POST").send()};k.prototype.$GroupDocEditorOverlay49=function(l,m,n){var o=this.$GroupDocEditorOverlay51(l,m),p=c("getRichComposedTextDataForSave")(o),q=babelHelpers["extends"]({},p,{cover_photo_data:o.coverPhotoPlacementData||null,doc_id:o.docID,group_id:o.groupID,is_draft:n,title:o.title,only_author_may_edit:this.$GroupDocEditorOverlay24}),r=c("XGroupDocSaveController").getURIBuilder().getURI(),s=c("ActorURI").create(r,o.ownerID);new(c("AsyncRequest"))(s).setHandler(o.onSuccess).setErrorHandler(o.onFailure).setMethod("POST").setData(q).send()};k.prototype.$GroupDocEditorOverlay51=function(l,m){var n=null;if(this.$GroupDocEditorOverlay18&&this.$GroupDocEditorOverlay5.photoID)n={photo_id:this.$GroupDocEditorOverlay5.photoID,x_offset:this.$GroupDocEditorOverlay5.xOffset,y_offset:this.$GroupDocEditorOverlay5.yOffset};var o=this.$GroupDocEditorOverlay6.getCurrentContent();return{coverPhotoPlacementData:n,encodedContent:c("encodeBlocks")(o),docID:this.$GroupDocEditorOverlay11,implicitLinks:c("getImplicitURLRangesForContentState")(o),onSuccess:l,onFailure:m,ownerID:this.$GroupDocEditorOverlay3.authorInfo.ownerID,title:this.$GroupDocEditorOverlay20.getCurrentContent().getPlainText(),groupID:this.$GroupDocEditorOverlay23}};k.prototype.$GroupDocEditorOverlay52=function(l){this.$GroupDocEditorOverlay20=l;this.$GroupDocEditorOverlay34()};k.prototype.$GroupDocEditorOverlay53=function(l){this.$GroupDocEditorOverlay5=l;this.$GroupDocEditorOverlay18=true};k.prototype.$GroupDocEditorOverlay54=function(event){this.$GroupDocEditorOverlay24=!event.target.checked;this.$GroupDocEditorOverlay34()};k.prototype.$GroupDocEditorOverlay34=function(l){c("ReactDOM").render(c("React").createElement("div",null,c("React").createElement(c("CampfireComposer.react"),{authorInfo:this.$GroupDocEditorOverlay3.authorInfo,blockRendererFn:this.$GroupDocEditorOverlay35.bind(this),canAttachPhoto:true,canAttachVideo:false,canAttachEmbed:true,coverPhotoEnabled:true,editorState:this.$GroupDocEditorOverlay6,initialTitle:this.$GroupDocEditorOverlay3.title,initialCoverMediaInfo:this.$GroupDocEditorOverlay3.coverMediaInfo,isDoc:true,mentionsSource:this.$GroupDocEditorOverlay3.mentionsSource,noteID:this.$GroupDocEditorOverlay11,onClose:this.$GroupDocEditorOverlay12.hide.bind(this.$GroupDocEditorOverlay12),onChange:this.$GroupDocEditorOverlay37.bind(this),onSave:this.$GroupDocEditorOverlay46.bind(this,!this.$GroupDocEditorOverlay17),onTitleChange:this.$GroupDocEditorOverlay52.bind(this),onUpdateCoverPhotoPlacement:this.$GroupDocEditorOverlay53.bind(this),titleState:this.$GroupDocEditorOverlay20,testConfig:this.$GroupDocEditorOverlay3.testConfig}),c("React").createElement(c("DocsComposerMenuBar.react"),{onDeleteDoc:this.$GroupDocEditorOverlay50.bind(this),onSaveDraft:this.$GroupDocEditorOverlay45.bind(this),onPublish:this.$GroupDocEditorOverlay47.bind(this),published:this.$GroupDocEditorOverlay17,isSaving:this.$GroupDocEditorOverlay16===j.Saving,isPublishing:this.$GroupDocEditorOverlay16==j.Publishing,justSaved:this.$GroupDocEditorOverlay16===j.Saved,canLimitEdition:this.$GroupDocEditorOverlay3.limitEdition.canLimit,onlyAuthorMayEdit:this.$GroupDocEditorOverlay24,onOnlyAuthorMayEditChange:this.$GroupDocEditorOverlay54.bind(this)})),this.$GroupDocEditorOverlay15,l)};f.exports=k}),null);