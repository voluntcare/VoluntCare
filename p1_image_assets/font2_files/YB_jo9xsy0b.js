if (self.CavalryLogger) { CavalryLogger.start_js(["GH4tG"]); }

__d("MercuryAttachmentConstants",[],(function a(b,c,d,e,f,g){var h=Object.freeze({SIDE_LENGTH:9});f.exports=h}),null);
__d("ChatImageArrowDirection",["keyMirror"],(function a(b,c,d,e,f,g){"use strict";var h=c("keyMirror")({BOTH:null,LEFT:null,RIGHT:null});f.exports=h}),null);
__d("ChatImageWithArrow.react",["cx","ChatImageArrowDirection","CssBackgroundImage.react","Link.react","MercuryAttachmentConstants","React","XUISpinner.react","cssURL","joinClasses"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes,l=30,m=15;i=babelHelpers.inherits(n,c("React").Component);j=i&&i.prototype;function n(){__p&&__p();var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=j.constructor).call.apply(o,[this].concat(r)),this.$ChatImageWithArrow3=function(){return Math.max(this.props.width,m)}.bind(this),this.$ChatImageWithArrow6=function(){return Math.max(this.props.height,l)}.bind(this),this.$ChatImageWithArrow7=function(t,u,v,w){if(u===c("ChatImageArrowDirection").LEFT)return"translate("+v+"px, "+w+"px)rotate(45deg)";else return"translate("+(t-v)+"px, "+w+"px)rotate(45deg)"},this.$ChatImageWithArrow8=function(t,u,v,w){if(u===c("ChatImageArrowDirection").LEFT)return"rotate(-45deg)translate(-"+(this.$ChatImageWithArrow1+v)+"px,-"+w+"px)";else return"rotate(-45deg)translate(-"+(t-v)+"px, -"+w+"px)"}.bind(this),p}n.prototype.render=function(){this.$ChatImageWithArrow1=Math.floor(this.props.sideLength/Math.sqrt(2));this.$ChatImageWithArrow2=Math.ceil(this.$ChatImageWithArrow3()+this.$ChatImageWithArrow1);if(this.props.isLoading)return this.$ChatImageWithArrow4();var o=c("joinClasses")("_4yp6"+(this.props.round?" _3lk2":""),this.props.rootClassName);return this.$ChatImageWithArrow5(c("React").createElement("div",{className:o},c("React").createElement("div",{className:"_52kr"+(this.props.round?" _3_om":""),style:{width:this.$ChatImageWithArrow3(),height:this.$ChatImageWithArrow6()}},c("React").createElement(c("CssBackgroundImage.react"),{className:"_4yp9"+(this.props.isSpherical?" _3603":""),imageURI:this.props.source,backgroundPosition:"center",style:{width:this.$ChatImageWithArrow3(),height:this.$ChatImageWithArrow6(),borderRadius:"inherit"}},this.props.isSpherical?c("React").createElement("div",{className:"_64ks"}):null))))};n.prototype.$ChatImageWithArrow5=function(o){if(this.props.onClick)return c("React").createElement(c("Link.react"),{onClick:this.props.onClick},o);return o};n.prototype.$ChatImageWithArrow4=function(){__p&&__p();var o={width:this.props.sideLength,height:this.props.sideLength};if(this.props.source)o.backgroundImage=c("cssURL")(this.props.source);var p={width:this.props.sideLength,height:this.props.sideLength};if(this.props.source)p.opacity=0;var q={width:this.$ChatImageWithArrow3(),height:this.$ChatImageWithArrow6()};if(this.props.source){q.backgroundImage=c("cssURL")(this.props.source);q.backgroundSize="cover"}return c("React").createElement("div",{className:"_4yp6"},c("React").createElement("div",{className:"_4ypb _3_om",style:q},c("React").createElement(c("XUISpinner.react"),{size:"small"})))};n.propTypes={arrowDirection:k.oneOf(Object.keys(c("ChatImageArrowDirection"))),onClick:k.func,height:k.number.isRequired,isLoading:k.bool,isSpherical:k.bool,round:k.bool,rootClassName:k.string,sideLength:k.number,source:k.string,width:k.number.isRequired};n.defaultProps={sideLength:c("MercuryAttachmentConstants").SIDE_LENGTH,isLoading:false,isSpherical:false,round:false};f.exports=n}),null);
__d("P2PAddCreditCardDialog.react",["cx","fbt","CreditCardFormParam","MessengerEnvironment","Link.react","MessengerPaymentProductType","P2PAPI","P2PAPIUtils","P2PPaymentConfig","P2PCreditCardStore","P2PCreditCardForm.react","P2PLoadingMask.react","P2PLogger","P2PPaymentLoggerEvent","P2PLinkConstants","React","P2PButton.react","P2PDialog.react","P2PDialogTitle.react","P2PDialogBody.react","P2PDialogFooter.react","P2PText.react","emptyFunction","getObjectValues"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("React").PropTypes,m="fbP2PAddCreditCardDialog_learnMoreSentenceID";j=babelHelpers.inherits(n,c("React").Component);k=j&&j.prototype;function n(){__p&&__p();var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.state={isValid:false,formData:{},loading:false,requestID:"",saveErrors:null,asyncRequestState:{}},this.onCreditCardStoreChange=function(){var t=c("P2PCreditCardStore").getAsyncRequestState(),u=t[this.state.requestID];this.setState({asyncRequestState:t});if(u){this.setState({requestID:""});if(u.error)this.handleOnSaveError(u.error);else this.handleOnSaveSuccess(u)}}.bind(this),this.onSaveClick=function(){var t,u=this.props.p2pPaymentConfig;if(!u){this.setState({loading:false,saveErrors:{general:{message:i._("Identification du pays impossible.")}}});return}var v=c("P2PAPIUtils").genRequestID();this.setState({loading:true,requestID:v,saveErrors:null,formData:babelHelpers["extends"]({},this.state.formData,(t={},t[c("CreditCardFormParam").COUNTRY]=u.countryCode,t))},function(){c("P2PAPI").addCreditCard(babelHelpers["extends"]({requestID:v,product_type:this.props.productType},this.state.formData))}.bind(this));this.log(c("P2PPaymentLoggerEvent").UI_ACTN_CONFIRM_CARD_DETAILS)}.bind(this),this.handleValidation=function(t,u){this.setState({isValid:t,formData:u})}.bind(this),this.onToggle=function(t){if(!t){this.props.onCancel();this.log(c("P2PPaymentLoggerEvent").UI_ACTN_CANCEL_ADD_CARD)}}.bind(this),this.onCancelClicked=function(){this.onToggle(false)}.bind(this),p}n.prototype.componentDidMount=function(){this.log(c("P2PPaymentLoggerEvent").UI_ACTN_INITIATE_ADD_CARD);this.creditCardStoreSub=c("P2PCreditCardStore").addListener("change",this.onCreditCardStoreChange)};n.prototype.componentWillUnmount=function(){if(this.creditCardStoreSub){this.creditCardStoreSub.remove();this.creditCardStoreSub=null}};n.prototype.log=function(o,p){c("P2PLogger").log(o,babelHelpers["extends"]({www_event_flow:this.props.eventFlow,object_id:this.props.loggingObjectID},this.props.loggingData,p))};n.prototype.handleOnSaveSuccess=function(o){this.props.onSuccess(o);this.log(c("P2PPaymentLoggerEvent").UI_ACTN_ADD_CARD_SUCCESS)};n.prototype.handleOnSaveError=function(o){this.setState({loading:false,saveErrors:o});this.log(c("P2PPaymentLoggerEvent").UI_ACTN_ADD_CARD_FAIL,{message:o&&o.general?o.general.message:""})};n.prototype.isSaveButtonDisabled=function(){return this.state.loading||!this.state.isValid};n.prototype.renderAddCardForm=function(){var o=this.props.p2pPaymentConfig;if(!o)return null;var p=void 0,q=this.props.title;if(this.props.showCancelButton)p=c("React").createElement(c("P2PButton.react"),{use:"default",size:"medium",label:this.props.cancelButtonText,disabled:this.state.loading,onClick:this.onCancelClicked});return c("React").createElement("div",null,c("React").createElement(c("P2PDialogTitle.react"),null,q),c("React").createElement(c("P2PDialogBody.react"),null,c("React").createElement(c("P2PText.react"),{type:"primary",className:"_3-96"},this.props.text),c("React").createElement(c("P2PCreditCardForm.react"),{asyncRequestState:this.state.asyncRequestState,compactMode:true,onValidation:this.handleValidation,postalRegex:o.postalRegex,productType:this.props.productType,saveErrors:this.state.saveErrors,showIcons:false,showLabels:true,showPlaceholderOnFocus:true,showSecondaryIcons:true,useGutters:true}),c("React").createElement(c("P2PText.react"),{className:"_3-8y",id:m,type:"secondary"},i._("Vos informations de paiement sont stock\u00e9es de mani\u00e8re s\u00e9curis\u00e9e."),c("React").createElement("div",null,c("React").createElement(c("Link.react"),{"aria-describedby":m,href:c("P2PLinkConstants").addDebitCardHelpURI,target:"_blank"},i._("En savoir plus"))))),c("React").createElement(c("P2PDialogFooter.react"),{leftContent:this.props.leftContent},p,c("React").createElement(c("P2PButton.react"),{use:"confirm",size:"medium",label:this.props.saveButtonText,disabled:this.isSaveButtonDisabled(),onClick:this.onSaveClick})))};n.prototype.render=function(){if(!this.props.p2pPaymentConfig)return null;return c("React").createElement(c("P2PDialog.react"),{behaviors:this.props.behaviors,layerHideOnBlur:false,ref:"dialog",onToggle:this.onToggle,repositionOnUpdate:true,shown:true,width:this.props.width},this.renderAddCardForm(),c("React").createElement(c("P2PLoadingMask.react"),{visible:this.state.loading}))};n.propTypes={cancelButtonText:l.string,eventFlow:l.string.isRequired,leftContent:l.object,loggingData:l.object,loggingObjectID:l.string,onCancel:l.func,onSuccess:l.func,p2pPaymentConfig:l.shape({currencyCode:l.string.isRequired,enabledActions:l.object.isRequired,enabledPaymentMethods:l.object.isRequired,maxTransferAmount:l.number.isRequired,title:l.string,use_payment_module_method_picker:l.bool,countryCode:l.string.isRequired,postalRegex:l.string.isRequired}).isRequired,productType:l.oneOf(c("getObjectValues")(c("MessengerPaymentProductType"))),saveButtonText:l.string,showCancelButton:l.bool,text:l.string,title:l.string};n.defaultProps={cancelButtonText:i._("Annuler"),loggingData:{},onCancel:c("emptyFunction"),onSuccess:c("emptyFunction"),p2pPaymentConfig:c("P2PPaymentConfig").config,productType:c("MessengerPaymentProductType").P2P,saveButtonText:i._("Enregistrer"),showCancelButton:true,text:i._("Veuillez entrer une carte de d\u00e9bit Visa ou MasterCard. Les cartes de cr\u00e9dit ne sont pas autoris\u00e9es."),title:i._("Ajouter une carte de d\u00e9bit"),width:c("MessengerEnvironment").messengerui?480:430};f.exports=n}),null);