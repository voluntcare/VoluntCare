if (self.CavalryLogger) { CavalryLogger.start_js(["4dOn5"]); }

__d("MessengerDotComPromotionActionURL",[],(function a(b,c,d,e,f,g){f.exports={turn_on_notification:"TurnOnNotification",messengerdotcom_cell_cutover_qp:"messengerdotcomCellCutoverQp"}}),null);
__d("MessengerContentSearchDataTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(){this.clear()}h.prototype.log=function(){c("GeneratedLoggerUtils").log("logger:MessengerContentSearchDataLoggerConfig",this.$MessengerContentSearchDataTypedLogger1,c("Banzai").BASIC)};h.prototype.logVital=function(){c("GeneratedLoggerUtils").log("logger:MessengerContentSearchDataLoggerConfig",this.$MessengerContentSearchDataTypedLogger1,c("Banzai").VITAL)};h.prototype.clear=function(){this.$MessengerContentSearchDataTypedLogger1={};return this};h.prototype.updateData=function(j){this.$MessengerContentSearchDataTypedLogger1=babelHelpers["extends"]({},this.$MessengerContentSearchDataTypedLogger1,j);return this};h.prototype.setAppID=function(j){this.$MessengerContentSearchDataTypedLogger1.appid=j;return this};h.prototype.setClienttime=function(j){this.$MessengerContentSearchDataTypedLogger1.clienttime=j;return this};h.prototype.setCountry=function(j){this.$MessengerContentSearchDataTypedLogger1.country=j;return this};h.prototype.setMessageID=function(j){this.$MessengerContentSearchDataTypedLogger1.message_id=j;return this};h.prototype.setMessageTimestamp=function(j){this.$MessengerContentSearchDataTypedLogger1.message_timestamp=j;return this};h.prototype.setNumResults=function(j){this.$MessengerContentSearchDataTypedLogger1.num_results=j;return this};h.prototype.setReadableTimestamp=function(j){this.$MessengerContentSearchDataTypedLogger1.readable_timestamp=j;return this};h.prototype.setResultIndex=function(j){this.$MessengerContentSearchDataTypedLogger1.result_index=j;return this};h.prototype.setSearchOutcome=function(j){this.$MessengerContentSearchDataTypedLogger1.search_outcome=j;return this};h.prototype.setSearchTerm=function(j){this.$MessengerContentSearchDataTypedLogger1.search_term=j;return this};h.prototype.setSearchType=function(j){this.$MessengerContentSearchDataTypedLogger1.search_type=j;return this};h.prototype.setThreadFbid=function(j){this.$MessengerContentSearchDataTypedLogger1.thread_fbid=j;return this};h.prototype.setVC=function(j){this.$MessengerContentSearchDataTypedLogger1.vc=j;return this};var i={appid:true,clienttime:true,country:true,message_id:true,message_timestamp:true,num_results:true,readable_timestamp:true,result_index:true,search_outcome:true,search_term:true,search_type:true,thread_fbid:true,vc:true};f.exports=h}),null);
__d("MercurySendMessageHandler",["MercuryMessageActions","MercuryMessageObject","MercurySingletonProvider"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();h.getForFBID=function(j){return i.getForFBID(j)};h.get=function(){return i.get()};function h(j){this.$MercurySendMessageHandler1=j;this.$MercurySendMessageHandler2=c("MercuryMessageActions").getForFBID(this.$MercurySendMessageHandler1);this.$MercurySendMessageHandler3=c("MercuryMessageObject").getForFBID(this.$MercurySendMessageHandler1)}h.prototype.sendPlainTextMessage=function(j,k,l){var m=this.$MercurySendMessageHandler3.constructUserGeneratedMessageObject(k,l,j);this.$MercurySendMessageHandler2.send(m)};h.prototype.sendSticker=function(j,k,l){var m=this.$MercurySendMessageHandler3.constructStickerMessageObject(k,l,j);this.$MercurySendMessageHandler2.send(m)};h.prototype.sendAttachment=function(j,k,l){var m=this.$MercurySendMessageHandler3.constructAttachmentMessageObject(l,j);this.$MercurySendMessageHandler2.addAttachmentPlaceholder(m,k.upload_id,k)};var i=new(c("MercurySingletonProvider"))(h);f.exports=h}),null);
__d("XMessengerDotComNUXLoggingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/logging/promotion/",{promotion_id:{type:"Int",required:true},instance_log_data:{type:"StringToStringMap",defaultValue:{}}})}),null);
__d("MessengerNotificationBanner.react",["cx","ix","AsyncRequest","Image.react","messengerButtonReact","MessengerDesktopNotifications","MessengerDotComPromotionActionURL","MessengerSettingsActions","messengerSignalsRe","React","XMessengerDotComNUXLoggingController","XQuickPromotionSimpleLoggingController","goURI"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("messengerButtonReact").jsComponent,m=c("React").PropTypes,n=i("86832"),o=i("86833");j=babelHelpers.inherits(p,c("React").Component);k=j&&j.prototype;function p(){__p&&__p();var q,r;for(var s=arguments.length,t=Array(s),u=0;u<s;u++)t[u]=arguments[u];return r=(q=k.constructor).call.apply(q,[this].concat(t)),this.state={bannerClosed:false},this.$MessengerNotificationBanner3=function(){return c("React").createElement(l,{className:"_2cim",label:this.props.primaryActionTitle,onClick:this.$MessengerNotificationBanner4,type:"primary"})}.bind(this),this.$MessengerNotificationBanner4=function(){this.$MessengerNotificationBanner5();if(this.props.promotionID){new(c("AsyncRequest"))().setURI(c("XQuickPromotionSimpleLoggingController").getURIBuilder().setInt("qp_id",this.props.promotionID).setEnum("qp_action","primary").setStringToStringMap("qp_instance_log_data",this.props.instanceLogData).getURI()).send();if(this.props.primaryActionURI===c("MessengerDotComPromotionActionURL").turn_on_notification)c("MessengerSettingsActions").changeDesktopNotifs(true);else window.open(this.props.primaryActionURI)}else if(this.props.primaryActionURI)c("goURI")(this.props.primaryActionURI,true)}.bind(this),this.$MessengerNotificationBanner2=function(){this.$MessengerNotificationBanner5();if(this.props.promotionID)new(c("AsyncRequest"))().setURI(c("XQuickPromotionSimpleLoggingController").getURIBuilder().setInt("qp_id",this.props.promotionID).setEnum("qp_action","dismiss").setStringToStringMap("qp_instance_log_data",this.props.instanceLogData).getURI()).send()}.bind(this),this.$MessengerNotificationBanner5=function(){this.setState({bannerClosed:true},function(){c("messengerSignalsRe").resize()})}.bind(this),r}p.prototype.componentWillReceiveProps=function(q){if(!q.promotionID)this.setState({bannerClosed:false})};p.prototype.componentDidMount=function(){if(this.$MessengerNotificationBanner1()||!this.props.promotionID)return;new(c("AsyncRequest"))().setURI(c("XMessengerDotComNUXLoggingController").getURIBuilder().setInt("promotion_id",this.props.promotionID).setStringToStringMap("instance_log_data",this.props.instanceLogData).getURI()).send()};p.prototype.componentDidUpdate=function(){window.dispatchEvent(new Event("resize"))};p.prototype.render=function(){if(this.$MessengerNotificationBanner1())return null;return c("React").createElement("div",{className:"_2cij"},c("React").createElement(c("Image.react"),{className:"_2cik",onClick:this.$MessengerNotificationBanner2,src:n}),c("React").createElement(c("Image.react"),{className:"_2cil",src:o}),this.props.promotionContent," ",this.$MessengerNotificationBanner3())};p.prototype.$MessengerNotificationBanner1=function(){return c("MessengerDesktopNotifications").isGranted()||c("MessengerDesktopNotifications").isDenied()||this.state.bannerClosed};p.propTypes={promotionID:m.number,promotionContent:m.string,primaryActionTitle:m.string,primaryActionURI:m.string,instanceLogData:m.object};f.exports=p}),null);
__d("MessengerRefreshPrompt",["fbt","Visibility","setIntervalAcrossTransitions"],(function a(b,c,d,e,f,g,h){var i=1e3*60*60,j=1e3*60*60*24*3,k=function k(l){var m=Date.now();c("setIntervalAcrossTransitions")(function(){if(Date.now()-m>j)c("Visibility").once(c("Visibility").VISIBLE,function(){l({promotionID:null,promotionContent:h._("Une nouvelle version de Messenger est disponible."),primaryActionTitle:h._("Actualiser"),instanceLogData:{},primaryActionURI:window.location.href});m=Date.now()})},i)};f.exports=k}),null);
__d("WorkNuxID",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({WORK_CHAT_DOWNLOAD_UPSELL_BANNER:5468})}),null);
__d("XWorkplaceDesktopDownloadController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/work/desktop/download/{file}/",{file:{type:"String",required:true},ref:{type:"String"}})}),null);
__d("WorkplaceChatUpsellBanner.react",["ix","cx","fbt","Promise","Bootloader","Event","Image.react","Link.react","React","UserAgent","WorkNuxID","XUIButton.react","BasicFBNux","XWorkplaceDesktopDownloadController","fbglyph"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l,m="https://play.google.com/store/apps/details?id=com.facebook.workchat",n="https://itunes.apple.com/app/work-chat/id958124798";k=babelHelpers.inherits(o,c("React").PureComponent);l=k&&k.prototype;function o(){l.constructor.call(this);this.state={xOutAppUpsell:false}}o.prototype.componentDidMount=function(){this.$WorkplaceChatUpsellBanner2()};o.prototype.render=function(){return c("React").createElement("div",{className:"_3ej0"+(this.state.xOutAppUpsell?" _3ej2":"")},j._("T\u00e9l\u00e9chargez l\u2019app et discutez n\u2019importe o\u00f9, n\u2019importe quand"),this.$WorkplaceChatUpsellBanner3(),this.$WorkplaceChatUpsellBanner4())};o.prototype.$WorkplaceChatUpsellBanner3=function(){var p=null;if(c("UserAgent").isPlatform("Mac OS X"))p=c("XWorkplaceDesktopDownloadController").getURIBuilder().setString("file","mac").setString("ref","chat_upsell").getURI();else if(c("UserAgent").isPlatform("Windows"))p=c("XWorkplaceDesktopDownloadController").getURIBuilder().setString("file","win").setString("ref","chat_upsell").getURI();return c("React").createElement("div",{className:"_3-9a"},p?this.$WorkplaceChatUpsellBanner5(p.toString(),j._("Application de bureau")):null,this.$WorkplaceChatUpsellBanner5(n,j._("iOS")),this.$WorkplaceChatUpsellBanner5(m,j._("Android")))};o.prototype.$WorkplaceChatUpsellBanner5=function(p,q){return c("React").createElement(c("XUIButton.react"),{target:"_blank",className:"_3ej4",label:q,href:p,onClick:function(){return this.$WorkplaceChatUpsellBanner6(q)}.bind(this)})};o.prototype.$WorkplaceChatUpsellBanner4=function(){return c("React").createElement(c("Link.react"),{onClick:function(){return this.$WorkplaceChatUpsellBanner7()}.bind(this)},c("React").createElement(c("Image.react"),{className:"_3-8w _3-90 _3ej3",alt:"X",src:h("114703")}))};o.prototype.$WorkplaceChatUpsellBanner7=function(){this.$WorkplaceChatUpsellBanner8();this.setState({xOutAppUpsell:true});setTimeout(function(){return c("Event").fire(window,"resize")},300)};o.prototype.$WorkplaceChatUpsellBanner6=function(p){this.$WorkplaceChatUpsellBanner9().done(function(q){var r=q.logger,s=q.actions;r.clear();r.setAction(s.CHAT_APP_UPSELL_BANNER_BUTTON_CLICKED).addToExtraData("button",p.toString()).log()})};o.prototype.$WorkplaceChatUpsellBanner8=function(){this.$WorkplaceChatUpsellBanner9().done(function(p){var q=p.logger,r=p.actions;q.clear();q.setAction(r.CHAT_APP_UPSELL_BANNER_DISMISSED).log()})};o.prototype.$WorkplaceChatUpsellBanner2=function(){c("BasicFBNux").onView(c("WorkNuxID").WORK_CHAT_DOWNLOAD_UPSELL_BANNER);this.$WorkplaceChatUpsellBanner9().done(function(p){var q=p.logger,r=p.actions;q.clear();q.setAction(r.CHAT_APP_UPSELL_BANNER_SHOWN).log()})};o.prototype.$WorkplaceChatUpsellBanner9=function(){if(!this.$WorkplaceChatUpsellBanner1)this.$WorkplaceChatUpsellBanner1=new(c("Promise"))(function(p,q){c("Bootloader").loadModules(["WorkOnboardingTypedLogger","WorkOnboardingLogAction"],function(r,s){var t=new r();p({logger:t,actions:s})},"WorkplaceChatUpsellBanner.react")});return this.$WorkplaceChatUpsellBanner1};f.exports=o}),null);
__d("MessengerBanner.react",["MessengerNotificationBanner.react","MessengerRefreshPrompt","React","WorkplaceChatUpsellBanner.react"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("React").PropTypes;h=babelHelpers.inherits(k,c("React").PureComponent);i=h&&h.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.state={promotionData:this.props.initialPromotionData},m}k.prototype.componentDidMount=function(){c("MessengerRefreshPrompt")(function(l){return this.setState({promotionData:l})}.bind(this))};k.prototype.render=function(){var l=this.state.promotionData;if(this.props.showWorkchatUpsellBanner)return c("React").createElement(c("WorkplaceChatUpsellBanner.react"),null);if(l&&l.primaryActionURI)return c("React").createElement(c("MessengerNotificationBanner.react"),{promotionID:l.promotionID,promotionContent:l.promotionContent,primaryActionTitle:l.primaryActionTitle,primaryActionURI:l.primaryActionURI,instanceLogData:l.instanceLogData});return null};k.propTypes={showWorkchatUpsellBanner:j.bool,initialPromotionData:j.object,isFirstRedirect:j.bool};f.exports=k}),null);
__d("MessengerBrowserAlerts",["fbt","DocumentTitle","Event","ImageSourceRequest","ImageSourceType","Map","MercuryAttachmentSnippetRenderer","mercuryBlockedParticipantsRe","MercuryIDs","MercuryLogMessageType","MercuryParticipants","MercuryThreadInfo","MercuryThreadInformer","MercuryThreads","MercuryUnseenState","MessagingTag","MessengerActions","MessengerConfig","MessengerDesktopNotifications","MessengerEnvironment","MessengerFaviconUrls","MessengerSettingsStore","MessengerStateStore","MercuryNotificationRenderer","PhotoResizeModeConst","Sound","UserActivity"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("mercuryBlockedParticipantsRe").get(),j=8e3,k=80,l=3,m=6e5,n=new(c("Map"))(),o=0,p=null;function q(){n=new(c("Map"))()}function r(u){if(c("MessengerSettingsStore").getSettings().sound_enabled)c("Sound").play([c("MessengerConfig")["sound.notif_ogg_url"],c("MessengerConfig")["sound.notif_mp3_url"]],u,false)}function s(u,v,w){__p&&__p();if(!u.snippet_sender)return;var x=n.get(u.thread_id)||0;if(x>=l)return;n.set(u.thread_id,x+1);c("MercuryParticipants").get(u.snippet_sender,function(y){__p&&__p();var z=u.snippet,A=u.custom_nickname&&u.custom_nickname[c("MercuryIDs").getUserIDFromParticipantID(y.id)],B=A?A:y.short_name;if(!z&&u.snippet_attachments&&u.snippet_attachments.length>0)z=c("MercuryAttachmentSnippetRenderer").renderAttachmentSnippetText(c("MercuryAttachmentSnippetRenderer").getAttachmentSnippetType(u.snippet_attachments),false,B,u.snippet_attachments);var C=A?A:y.name;if(!u.is_canonical)C=u.name?h._("{sender's name} \u00e0 {group name}",[h.param("sender's name",B),h.param("group name",u.name)]):h._("{sender's name} \u00e0 votre groupe",[h.param("sender's name",B)]);c("MessengerDesktopNotifications").showNotification({title:C,body:z,icon:u.image_src||v||y.big_image_src||y.image_src,closeTime:null,onClick:function D(){window.focus();c("MessengerActions").selectThread(u.thread_id)},tag:w.message_id});if(!c("MessengerDesktopNotifications").hasDefaultSound())r(w.timestamp)})}var t={init:function u(v){__p&&__p();this._viewer=v;this._threadInformer=c("MercuryThreadInformer").getForFBID(this._viewer);this._threads=c("MercuryThreads").getForFBID(this._viewer);this._unseenState=c("MercuryUnseenState").getForFBID(this._viewer);this._highResImageMap=new(c("Map"))();c("Event").listen(window,"focus",function(){q();clearInterval(o)});c("Event").listen(window,"blur",function(){o=setInterval(q,m)});this._threadInformer.subscribe("messages-received",function(w,x){for(var y in x)x[y].forEach(function(z){this.handleMessageReceived(z)}.bind(this))}.bind(this));this._threadInformer.subscribe("unseen-updated",this._handleUnseenUpdated.bind(this))},handleMessageReceived:function u(v){__p&&__p();if(v.author===this._viewer||!v.is_unread||v.thread_id===c("MessengerStateStore").getState().activeThreadID&&c("UserActivity").isOnTab()||v.folder!=c("MessagingTag").INBOX&&v.folder!=c("MessagingTag").ARCHIVED)return;this._threads.getThreadMeta(v.thread_id,function(w){__p&&__p();if(c("MercuryThreadInfo").isMuted(w))if(!c("MercuryThreadInfo").areMentionsMuted(w)){if(!v.profile_ranges||!v.profile_ranges.some||!v.profile_ranges.some(function(x){return x.id===this._viewer}.bind(this)))return}else return;if(i.isPresentInGroupThread(w))return;if(c("MessengerSettingsStore").getSettings().desktopNotifsEnabled&&!c("UserActivity").isOnTab())this._attemptDesktopNotification(w,v);else if(v.log_message_type!==c("MercuryLogMessageType").UNSUBSCRIBE)r(v.timestamp);if(!c("UserActivity").isOnTab()&&this._unseenState.getUnseenCount()>0)c("MercuryNotificationRenderer").renderDocumentTitle(v.thread_id,function(x){if(!p)p=c("DocumentTitle").blink(x)})}.bind(this))},showRTCNotification:function u(v,w){__p&&__p();if(c("UserActivity").isOnTab()){w(null);return}var x=v.peerID;if(!this._highResImageMap.has(x)){var y=function(z,A){this._highResImageMap.set(x.toString(),A.uri);this._displayRTCDesktopNotification(A.uri,v,w)}.bind(this);new(c("ImageSourceRequest"))().setFBID(x).setType(c("ImageSourceType").PROFILE_PICTURE).setDimensions(k,k).setResizeMode(c("PhotoResizeModeConst").COVER).setCallback(y.bind(null,x)).send()}else this._displayRTCDesktopNotification(this._highResImageMap.get(x),v,w)},_updateFavicon:function u(v){var w=document.querySelector('link[rel*=icon][href*=".ico"]');if(!w)return;if(v===0)w.href=c("MessengerFaviconUrls")["default"];else w.href=c("MessengerFaviconUrls").unread},_displayRTCDesktopNotification:function u(v,w,x){__p&&__p();var y=c("MercuryIDs").getParticipantIDFromUserID(w.peerID),z=null;c("MercuryParticipants").get(y,function(A){__p&&__p();var B=void 0;if(w.isVideoCall)if(w.isGroupCall)B=h._("Discussion vid\u00e9o de groupe entrante");else B=h._("Appel vid\u00e9o entrant");else if(w.isGroupCall)B=h._("Appel de groupe entrant");else B=h._("Appel vocal entrant");var C=h._("{caller} vous appelle. Cliquez pour r\u00e9pondre.",[h.param("caller",A.short_name)]);z=c("MessengerDesktopNotifications").showNotification({title:B,body:C,icon:v,closeTime:j,onClick:function D(){window.focus();w.onNotificationClicked()}});x(z)})},_handleUnseenUpdated:function u(){__p&&__p();var v=this._unseenState.getUnseenCount();if(c("UserActivity").isOnTab()&&c("UserActivity").isActive()&&v>0){this._updateFavicon(0);this._unseenState.markAsSeen();return}var w=c("DocumentTitle").get(),x=v?"("+v+") "+w:w;c("DocumentTitle").set(x,true);this._updateFavicon(v);if(p&&v===0){p.stop();p=null}if(!this._focusToken&&v>0)this._focusToken=c("UserActivity").subscribe(function(){if(c("UserActivity").isOnTab()){this._focusToken&&this._focusToken.unsubscribe();this._focusToken=null;this._unseenState.markAsSeen()}}.bind(this))},_attemptDesktopNotification:function u(v,w){if(!v.snippet_sender)return;if(!this._highResImageMap.has(v.snippet_sender)){var x=function(y,z){this._highResImageMap.set(v.snippet_sender,z.uri);s(v,z.uri,w)}.bind(this);new(c("ImageSourceRequest"))().setFBID(c("MercuryIDs").getUserIDFromParticipantID(v.snippet_sender)).setType(c("ImageSourceType").PROFILE_PICTURE).setDimensions(k,k).setResizeMode(c("PhotoResizeModeConst").COVER).setCallback(x.bind(null,v.snippet_sender)).send()}else s(v,this._highResImageMap.get(v.snippet_sender),w)}};f.exports=t}),null);
__d("MessengerRTCMessageHandler",["Bootloader","FBRTCCallSummaryUploader","FBRTCMessageListener","FBRTCSupport"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=null,i=null,j={init:function m(){if(c("FBRTCSupport").isReceiveWebrtcSupported()){c("FBRTCCallSummaryUploader").init();c("FBRTCMessageListener").init(false);c("FBRTCMessageListener").once("messageReceived",function(n){k()});c("FBRTCMessageListener").once("multiwayMessageReceived",function(n){l(n)})}}};function k(){if(!h)c("Bootloader").loadModules(["FBRTCIncomingCallController","MessengerRTCIncomingDialogController","MessengerRTCMissedCallDialogController","MessengerRTCUnsupportedBrowserDialogController"],function(m,n,o,p){h=new m(n,p,o);c("FBRTCMessageListener").setMessageHandler(h.onMessageReceived,h)},"MessengerRTCMessageHandler")}function l(m){if(!i)c("Bootloader").loadModules(["FBRTCGroupCallIncomingController","MessengerRTCGroupCallIncomingDialogController"],function(n,o){i=new n(o);c("FBRTCMessageListener").setMultiwayMessageHandler(i.onMessageReceived,i);i.onMessageReceived(m)},"MessengerRTCMessageHandler")}f.exports=j}),null);
__d("MercurySearchContextResults",["KeyedCallbackManager","MercuryAPIArgsSource","MercuryIDs","MercuryThreadlistConstants","MercuryThreadIDMap","RangedCallbackManager","MercuryServerDispatcher","MercuryServerPayloadPreprocessor","WebMessengerConstants"],(function a(b,c,d,e,f,g){__p&&__p();var h=c("MercuryThreadIDMap").get(),i=c("MercuryServerPayloadPreprocessor").get(),j=new(c("KeyedCallbackManager"))(),k=c("MercuryThreadlistConstants").WEBMESSENGER_SEARCH_SNIPPET_COUNT,l=c("WebMessengerConstants").MORE_SEARCH_CONTEXT_COUNT,m={getSearchContext:function q(r,s,t){__p&&__p();if(r){var u=j.executeOrEnqueue(r,function(z){var A=o(z,r);t(A)}),v=j.getUnavailableResources(u);if(v.length){var w={message_id:r,limit:k+1},x=h.getServerIDFromClientIDNow(s),y=c("MercuryIDs").tokenize(s);if(y.type=="user")w.other_user_fbid=x;else w.thread_fbid=x;p(w)}return u}},getMoreSearchContext:function q(r,s,t,u){__p&&__p();if(r){var v=j.getResource(r);if(v){var w=t==c("WebMessengerConstants").MORE_SEARCH_CONTEXT_UP?v.up_message_ids:v.down_message_ids,x=w.getCurrentArraySize()+l,y=w.executeOrEnqueue(0,x,function(){var D=o(v,r);u(D)}),z=w.getUnavailableResources(y);if(z.length){var A={message_id:r,limit:x,direction:t},B=h.getServerIDFromClientIDNow(s),C=c("MercuryIDs").tokenize(s);if(C.type=="user")A.other_user_fbid=B;else A.thread_fbid=B;p(A)}return y}}},handleUpdate:function q(r){__p&&__p();if(r.mercury_payload)i.handleUpdate(r.mercury_payload);var s=r.search_context||{};for(var t in s){var u=s[t],v=u.other_user_fbid||u.thread_fbid,w=h.getClientIDFromServerIDNow(v),x=!j.getResource(t),y=x?{thread_id:w,up_message_ids:new(c("RangedCallbackManager"))(),down_message_ids:new(c("RangedCallbackManager"))()}:j.getResource(t),z=x?k+1:l;if(u.up_message_ids&&(y.up_message_ids.getCurrentArraySize()===0||u.up_message_ids.length>=y.up_message_ids.getCurrentArraySize()))n(y.up_message_ids,u.up_message_ids,z);if(u.down_message_ids&&(y.down_message_ids.getCurrentArraySize()===0||u.down_message_ids.length>=y.down_message_ids.getCurrentArraySize()))n(y.down_message_ids,u.down_message_ids,z);if(x)j.setResource(t,y)}},unsubscribe:function q(r,s,t){if(s){var u=j.getResource(s);if(u)if(t==c("WebMessengerConstants").MORE_SEARCH_CONTEXT_UP)u.up_message_ids.unsubscribe(r);else u.down_message_ids.unsubscribe(r);else j.unsubscribe(r)}}};function n(q,r,s){var t=q.getCurrentArraySize(),u=r.length<t+s;if(r.length){q.removeAllResources();q.addResourcesWithoutSorting(r,0)}if(u)q.setReachedEndOfArray()}function o(q,r){var s=q.up_message_ids.hasReachedEndOfArray(),t=q.up_message_ids.getAllResources();if(!s)t.shift();var u=q.down_message_ids.hasReachedEndOfArray(),v=q.down_message_ids.getAllResources();if(!u)v.pop();return{thread_id:q.thread_id,message_id:r,up_message_ids:t,up_exhausted:s,down_message_ids:v,down_exhausted:u}}function p(q){q.client=c("MercuryAPIArgsSource").WEBMESSENGER;c("MercuryServerDispatcher").trySend("/ajax/mercury/search_context.php",q)}c("MercuryServerDispatcher").registerEndpoints({"/ajax/mercury/search_context.php":{mode:c("MercuryServerDispatcher").IMMEDIATE,handler:m.handleUpdate}});f.exports=m}),null);
__d("MessengerContentSearchFunnelLoggerConstants",[],(function a(b,c,d,e,f,g){"use strict";var h=Object.freeze({BROWSE_MESSAGE_IN_THREAD:"browse_message_in_thread",END_CONTENT_SEARCH:"end_content_search",INITIATE_CONTENT_SEARCH:"initiate_content_search",LOAD_MORE_THREADS:"load_more_threads",NUM_BROWSE_ACTIONS_WITHIN_THREAD:"num_browse_actions_within_thread",SELECT_THREAD:"select_thread",THREAD_IMPRESSIONS:"thread_impressions"}),i=Object.freeze({SEARCH_WITHIN_THREAD:"search_within_thread",SEARCH_ALL_THREADS:"search_all_threads",END_WITH_NEW_SEARCH:"end_with_new_search",END_WITH_DONE_BUTTON:"end_with_done_button",END_WITH_X_BUTTON:"end_with_x_button",END_WITH_BACK_BUTTON:"end_with_back_button"});f.exports={FUNNEL_NAME:"WWW_MESSENGER_CONTENT_SEARCH_FUNNEL",FUNNEL_LOGGER_EVENTS:h,FUNNEL_LOGGER_TAGS:i}}),null);
__d("MessengerThreadSearchActions",["MessengerDispatcher","keyMirror"],(function a(b,c,d,e,f,g){"use strict";var h=c("keyMirror")({CHANGE_RESULT_INDEX:null,GET_MORE_CONTEXT:null,GET_MORE_THREADS:null}),i={Types:h,selectPrevious:function j(){c("MessengerDispatcher").dispatch({type:h.CHANGE_RESULT_INDEX,delta:1})},selectNext:function j(){c("MessengerDispatcher").dispatch({type:h.CHANGE_RESULT_INDEX,delta:-1})},getMoreSearchContext:function j(k){c("MessengerDispatcher").dispatch({type:h.GET_MORE_CONTEXT,direction:k})},loadMoreThreads:function j(){c("MessengerDispatcher").dispatch({type:h.GET_MORE_THREADS})}};f.exports=i}),null);
__d("MessengerThreadSearchStore",["cx","immutable","Bootloader","ImmutableObject","MercuryIDs","MercuryMessages","MercurySearchContextResults","MercurySearchSnippetResults","MercuryThreads","MessengerContentSearchDataTypedLogger","MessengerContentSearchFunnelLoggerConstants","MessengerDispatcher","MessengerStateStore","MessengerStore","MessengerActions","MessengerThreadSearchActions","MessengerView"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("immutable").List,l=c("immutable").Record,m=c("MessengerContentSearchFunnelLoggerConstants").FUNNEL_LOGGER_EVENTS,n=m.BROWSE_MESSAGE_IN_THREAD,o=m.LOAD_MORE_THREADS,p=m.SELECT_THREAD,q=m.THREAD_IMPRESSIONS,r=l({downExhausted:null,loading:false,messages:null,query:null,results:k(),selectedIndex:0,threadID:null,totalCount:0,upExhausted:null,threads:null,threadsExhausted:null,mid:null});i=babelHelpers.inherits(s,c("MessengerStore"));j=i&&i.prototype;function s(){j.constructor.call(this);this.$MessengerThreadSearchStore3=new r()}s.prototype.getForFBID=function(t){this.$MessengerThreadSearchStore4=new(c("MercurySearchSnippetResults"))(t);this.$MessengerThreadSearchStore1=c("MercuryMessages").getForFBID(t);this.$MessengerThreadSearchStore2=c("MercuryThreads").getForFBID(t)};s.prototype.getState=function(){return this.$MessengerThreadSearchStore3};s.prototype.__onDispatch=function(t){__p&&__p();if(!this.$MessengerThreadSearchStore4)return;c("MessengerDispatcher").waitFor([c("MessengerStateStore").getDispatchToken()]);var u=c("MessengerStateStore").getState(),v=u.activeThreadID,w=u.masterView,x=u.mid,y=u.query,z=w===c("MessengerView").MASTER.SEARCH;switch(t.type){case c("MessengerActions").Types.REPLACE_STATE:if(x!=this.$MessengerThreadSearchStore3.mid&&v!=this.$MessengerThreadSearchStore3.activeThreadID){if(x&&v){this.$MessengerThreadSearchStore3=this.$MessengerThreadSearchStore3.merge({threadID:v,mid:x});c("MercurySearchContextResults").getSearchContext(this.$MessengerThreadSearchStore5(),this.$MessengerThreadSearchStore3.threadID,function(D){return this.setMessages(D)}.bind(this))}else this.$MessengerThreadSearchStore3=new r();return}else if(this.$MessengerThreadSearchStore3.query!==y||this.$MessengerThreadSearchStore3.threadID!==v){if(y&&!x){this.$MessengerThreadSearchStore3=this.$MessengerThreadSearchStore3.set("loading",true);this.$MessengerThreadSearchStore4.getSingleThreadSearchResults(y,v,function(){for(var D=arguments.length,E=Array(D),F=0;F<D;F++)E[F]=arguments[F];return this.accumulateSearchResultsAndEmitChange.apply(this,[y,v,0].concat(E))}.bind(this))}else{if(this.$MessengerThreadSearchStore3.query&&this.$MessengerThreadSearchStore3.results.size===0)this.logCurrentResult(null,"no_results_found","single_thread_search");var A=this.$MessengerThreadSearchStore3.results.get(this.$MessengerThreadSearchStore3.selectedIndex);if(A!==undefined)this.logCurrentResult(A.toObject(),"search_ended","single_thread_search");this.$MessengerThreadSearchStore6()}if(z){this.$MessengerThreadSearchStore3=this.$MessengerThreadSearchStore3.set("loading",true);if(y!==this.$MessengerThreadSearchStore3.query)this.$MessengerThreadSearchStore4.getAllThreadSearchResults(y,function(D,E){this.setAllThreadResults(D,E);this.$MessengerThreadSearchStore7({name:q,threads:Object.keys(D)})}.bind(this));else{this.$MessengerThreadSearchStore7({name:p,thread_id:this.$MessengerThreadSearchStore3.threadID});this.$MessengerThreadSearchStore4.getAllLocalThreadSearchResults(y,function(D,E){return this.setAllThreadResults(D,E)}.bind(this))}}else this.$MessengerThreadSearchStore8();this.emitChange()}break;case c("MessengerThreadSearchActions").Types.CHANGE_RESULT_INDEX:var B=Math.max(Math.min(this.$MessengerThreadSearchStore3.totalCount-1,this.$MessengerThreadSearchStore3.selectedIndex+t.delta),0);if(B===this.$MessengerThreadSearchStore3.selectedIndex)break;if(B>=this.$MessengerThreadSearchStore3.results.size){this.$MessengerThreadSearchStore3=this.$MessengerThreadSearchStore3.set("loading",true);this.$MessengerThreadSearchStore4.getSingleThreadSearchMoreResults(y,v,function(){for(var D=arguments.length,E=Array(D),F=0;F<D;F++)E[F]=arguments[F];return this.accumulateSearchResultsAndEmitChange.apply(this,[y,v,B].concat(E))}.bind(this))}else{this.$MessengerThreadSearchStore3=this.$MessengerThreadSearchStore3.merge({loading:true,selectedIndex:B});c("MercurySearchContextResults").getSearchContext(this.$MessengerThreadSearchStore5(),this.$MessengerThreadSearchStore3.threadID,function(D){return this.setMessages(D)}.bind(this))}this.emitChange();var C=this.$MessengerThreadSearchStore3.results.get(B).toObject();this.logCurrentResult(C,"result_loaded","single_thread_search");this.$MessengerThreadSearchStore7({name:n,message_id:C.message_id,thread_id:this.$MessengerThreadSearchStore3.threadID});break;case c("MessengerThreadSearchActions").Types.GET_MORE_CONTEXT:this.$MessengerThreadSearchStore3=this.$MessengerThreadSearchStore3.set("loading",true);c("MercurySearchContextResults").getMoreSearchContext(this.$MessengerThreadSearchStore5(),this.$MessengerThreadSearchStore3.threadID,t.direction,function(D){return this.setMessages(D)}.bind(this));this.emitChange();break;case c("MessengerThreadSearchActions").Types.GET_MORE_THREADS:this.$MessengerThreadSearchStore3=this.$MessengerThreadSearchStore3.set("loading",true);this.$MessengerThreadSearchStore4.getAllThreadSearchMoreResults(y,function(D,E){this.$MessengerThreadSearchStore7({name:o,threads:Object.keys(D)});this.setAllThreadResults(D,E)}.bind(this));this.emitChange();break}};s.prototype.logCurrentResult=function(t,u,v){var w=new(c("MessengerContentSearchDataTypedLogger"))().setSearchTerm(this.$MessengerThreadSearchStore3.query).setThreadFbid(c("MercuryIDs").getThreadFBIDFromThreadID(this.$MessengerThreadSearchStore3.threadID)).setNumResults(this.$MessengerThreadSearchStore3.results.size).setSearchOutcome(u).setSearchType(v);if(t!==undefined&&t!==null)w.setMessageID(t.message_id).setMessageTimestamp(t.timestamp).setResultIndex(this.$MessengerThreadSearchStore3.selectedIndex+1);w.log()};s.prototype.setAllThreadResults=function(t,u){__p&&__p();var v=Object.keys(t),w=v.map(function(x){var y=this.$MessengerThreadSearchStore2.getThreadMetaNow(x);if(!y)return;var z=t[y.thread_id];if(!z)return;return new(c("ImmutableObject"))(babelHelpers["extends"]({},y,{snippetCount:z.num_total_snippets}))}.bind(this)).filter(function(x){return x});this.$MessengerThreadSearchStore3=this.$MessengerThreadSearchStore3.merge({threads:w,threadsExhausted:u,loading:false});this.emitChange()};s.prototype.$MessengerThreadSearchStore8=function(){this.$MessengerThreadSearchStore9(["threads","threadsExhausted","loading"])};s.prototype.accumulateSearchResultsAndEmitChange=function(t,u,v,w,x){this.$MessengerThreadSearchStore3=this.$MessengerThreadSearchStore3.merge({query:t,threadID:u,selectedIndex:v,results:w,totalCount:x});if(this.$MessengerThreadSearchStore3.results.size){c("MercurySearchContextResults").getSearchContext(this.$MessengerThreadSearchStore5(),this.$MessengerThreadSearchStore3.threadID,function(w){return this.setMessages(w)}.bind(this));var y=this.$MessengerThreadSearchStore3.results.get(this.$MessengerThreadSearchStore3.selectedIndex);this.logCurrentResult(y.toObject(),"search_started","single_thread_search")}else this.$MessengerThreadSearchStore3=this.$MessengerThreadSearchStore3.merge({messages:null});this.emitChange()};s.prototype.$MessengerThreadSearchStore6=function(){this.$MessengerThreadSearchStore9(["query","threadID","selectedIndex","results","totalCount","downExhausted","loading","messages","upExhausted"])};s.prototype.$MessengerThreadSearchStore9=function(t){this.$MessengerThreadSearchStore3=this.$MessengerThreadSearchStore3.withMutations(function(u){t.forEach(function(v){return u.remove(v)})})};s.prototype.setMessages=function(t){__p&&__p();var u=this.$MessengerThreadSearchStore1.getMessagesFromIDs([].concat(t.up_message_ids,t.message_id,t.down_message_ids)).map(function(v){__p&&__p();var w,x=this;if(v&&v.message_id===t.message_id)if(!this.$MessengerThreadSearchStore3.results.isEmpty()){var w=function(){var y=x.$MessengerThreadSearchStore3.results.get(x.$MessengerThreadSearchStore3.selectedIndex).toJS(),z=y.matched_keywords,A=v.body.indexOf(y.body),B=Object.keys(y.matched_keywords).map(function(C){return{offset:A+Number(C),length:z[C].length,entity:{url:""},className:"__in"}});return{v:new(c("ImmutableObject"))(babelHelpers["extends"]({},v,{ranges:v.ranges?v.ranges.concat(B):B}))}}();if(typeof w==="object")return w.v}else return new(c("ImmutableObject"))(babelHelpers["extends"]({},v,{isSelected:true}));return v}.bind(this));this.$MessengerThreadSearchStore3=this.$MessengerThreadSearchStore3.merge({downExhausted:t.down_exhausted,loading:false,messages:u,upExhausted:t.up_exhausted});this.emitChange()};s.prototype.$MessengerThreadSearchStore5=function(){return this.$MessengerThreadSearchStore3.mid||this.$MessengerThreadSearchStore3.results.getIn([this.$MessengerThreadSearchStore3.selectedIndex,"message_id"])};s.prototype.$MessengerThreadSearchStore7=function(event){__p&&__p();c("Bootloader").loadModules(["MessengerContentSearchFunnelLogger"],function(t){__p&&__p();if(t&&event)switch(event.name){case n:t.browseMessageInThread(event.message_id,event.thread_id);break;case o:t.logLoadMoreThreads(event.threads);break;case p:t.logThreadSelect(event.thread_id);break;case q:t.logThreadImpressions(event.threads);break}},"MessengerThreadSearchStore")};f.exports=new s()}),null);
__d("MessengerURIListener",["MessengerActions","MessengerURISerializer","PageTransitions"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=false,i={start:function k(){if(!h)c("PageTransitions").registerHandler(j,6);h=true},stop:function k(){c("PageTransitions").removeHandler(j,6);h=false}};function j(k){var l=c("MessengerURISerializer").deserialize(k);if(l.notMessenger)return false;c("PageTransitions").transitionComplete();c("MessengerActions").changeState(l);return true}f.exports=i}),null);
__d("DisplayGenderConst",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({UNKNOWN:"UNKNOWN",FEMALE:"FEMALE",MALE:"MALE",NEUTER:"NEUTER"})}),null);
__d("MessengerThreadlistWebGraphQLQuery",["WebGraphQLQueryBase"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();f.exports=function(){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("WebGraphQLQueryBase"));i=h&&h.prototype;j.__getDocID=function(){"use strict";return"2071444759535931"};j.getQueryID=function(){"use strict";return"179048412673146"};function j(){"use strict";h.apply(this,arguments)}return j}()}),null);
__d("bs_js_dict",[],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=function h(n,o){delete n[o];return 0};function i(n){var o=Object.keys(n),p=o.length,j=new Array(p);for(var q=0,r=p-1|0;q<=r;++q){var s=o[q];j[q]=[s,n[s]]}return j}function j(n){var o=Object.keys(n),p=o.length,q=new Array(p);for(var r=0,s=p-1|0;r<=s;++r)q[r]=n[o[r]];return q}function k(i){__p&&__p();var n={},o=i;while(true){var p=o;if(p){var q=p[0];n[q[0]]=q[1];o=p[1];continue}else return n}}function l(i){var n={},o=i.length;for(var p=0,q=o-1|0;p<=q;++p){var r=i[p];n[r[0]]=r[1]}return n}function m(n,o){var p={},q=Object.keys(o),r=q.length;for(var s=0,t=r-1|0;s<=t;++s){var u=q[s];p[u]=n(o[u])}return p}g.unsafeDeleteKey=h;g.entries=i;g.values=j;g.fromList=k;g.fromArray=l;g.map=m}),null);
__d("messengerGraphQLThreadlistFetcherRe",["Promise","URI","bs_array","bs_js_dict","bs_caml_array","WebGraphQL","bs_caml_format","GenderConst","WorkModeConfig","DisplayGenderConst","messengerGraphQLThreadFetcherRe","messengerReadReceiptTransformerRe","MessengerThreadlistWebGraphQLQuery"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(l){return new(c("MessengerThreadlistWebGraphQLQuery"))({limit:l.limit,before:l.timestamp,tags:l.tags,includeDeliveryReceipts:l.includeDeliveryReceipts,includeSeqID:l.includeSeqID})}function i(l){__p&&__p();var m=l.gender,n=l.url,o;if(n==null)o=null;else{var p=+c("WorkModeConfig").is_work_user,q=p!==0?c("WorkModeConfig").company_subdomain+".facebook.com":"www.facebook.com";o=new(c("URI"))(n).getUnqualifiedURI().setDomain(q).setProtocol("https").toString()}var r=l.big_image_src,s=l.big_image_src,t=l.__typename,u;switch(t){case"Page":u="page";break;case"User":u="user";break;default:u=null}var v=l.accepts_messenger_user_feedback,w=l.is_viewer_friend,x=l.is_messenger_user,y=l.is_verified,z=l.is_messenger_platform_bot,A=l.is_message_blocked_by_viewer,B=l.is_viewer_coworker,C=l.is_employee;return{id:"fbid:"+l.id,fbid:l.id,gender:m==null?c("GenderConst").NOT_A_PERSON:m===c("DisplayGenderConst").MALE?c("GenderConst").MALE_SINGULAR:m===c("DisplayGenderConst").FEMALE?c("GenderConst").FEMALE_SINGULAR:c("GenderConst").NOT_A_PERSON,href:o,image_src:r==null?null:r.uri,big_image_src:s==null?null:s.uri,name:l.name,short_name:l.short_name,type:u,vanity:l.username,accepts_messenger_user_feedback:v==null?false:v,is_friend:w==null?false:w,is_messenger_user:x==null?false:x,is_business_enabled:l.__typename==="Page"?true:false,is_verified:y==null?false:y,is_messenger_platform_bot:z==null?false:z,is_messenger_blocked:A==null?false:A,is_coworker:B==null?true:B,employee:C==null?false:C}}function j(l,m,n,o){__p&&__p();var p=[],q=[],r={},s=[],t={},u=[undefined];c("bs_array").iteri(function(v,w){__p&&__p();var x=c("bs_caml_array").caml_array_get(m,v),y=[],z=[],A=[];c("bs_array").iter(function(D){__p&&__p();if(D==null)return 0;else{var E=c("messengerGraphQLThreadFetcherRe").transformThread(l,D,n);c("bs_array").iter(function(K){var L=i(K.messaging_actor);t[L.fbid]=L;return 0},D.all_participants.nodes);var F;if(E.is_canonical){var B=E.other_user_fbid;if(B==null)F=null;else{y.push(B);F=B}}else{var C=E.thread_fbid;if(C==null)F=null;else{z.push(C);F=C}}A.push(E.thread_id);p.push(E);var G=D.read_receipts;if(!(F==null))if(!(G==null))r[F]=c("messengerReadReceiptTransformerRe").transformReadReceipt(l,G);var H=D.delivery_receipts;if(F==null)return 0;else if(H==null)return 0;else{var I=H.nodes.sort(function(K,L){var M=c("bs_caml_format").caml_float_of_string(K.timestamp_precise),N=c("bs_caml_format").caml_float_of_string(L.timestamp_precise);if(M>N)return-1;else if(M===N)return 0;else return 1});if(I.length<1)return 0;else{var J=c("bs_caml_array").caml_array_get(I,0);if(E.is_canonical){s.push({other_user_fbid:F,thread_fbid:null,time:c("bs_caml_format").caml_float_of_string(J.timestamp_precise)});return 0}else{s.push({other_user_fbid:null,thread_fbid:F,time:c("bs_caml_format").caml_float_of_string(J.timestamp_precise)});return 0}}}}},w.viewer.message_threads.nodes);var B=w.viewer.message_threads.sync_sequence_id;if(!(B==null))u[0]=c("bs_caml_format").caml_int_of_string(B);var C=x.timestamp;q.push({start:x.offset,end:C==null?x.offset+x.limit|0:(x.offset+x.limit|0)-1|0,folder:x.folder,other_user_fbids:y,thread_fbids:z,thread_ids:A,filter:x.filter});return 0},o);return{threads:p,ordered_threadlists:q,roger:r,delivery_receipts:s,participants:c("bs_js_dict").values(t),sequence_id:u[0]}}function k(l,m,n){var o=c("bs_array").map(h,m);return c("Promise").all(c("WebGraphQL").execAll(o,{actorID:n?l:null,batchName:"MessengerGraphQLThreadlistFetcherRe"})).then(function(p){return j(l,m,n,p)})}g._getQuery=h;g.transformParticipant=i;g.transform=j;g.fetchAll=k}),null);
__d("messengerInitialDataTransformerRe",["bs_array","bs_caml_array","MercuryThreadlistConstants","messengerGraphQLThreadFetcherRe","messengerGraphQLThreadlistFetcherRe"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(i){__p&&__p();var j=i.viewer,k=i.is_page,l=i.additional_participant,m;if(l==null)m=[];else{var n=[];c("bs_array").iter(function(y){if(y==null)return 0;else{n.push(c("messengerGraphQLThreadlistFetcherRe").transformParticipant(y));return 0}},l.nodes);m=n}var o=i.thread_list,p=o==null?null:c("messengerGraphQLThreadlistFetcherRe").transform(j,[{limit:c("MercuryThreadlistConstants").WEBMESSENGER_THREAD_COUNT+1|0,folder:"inbox",timestamp:null,offset:0,filter:null}],+k,[o]),q=i.current_thread,r;if(q==null)r=null;else{var s=q.message_thread;r=s==null?null:c("messengerGraphQLThreadFetcherRe").transformThread(j,s,+k)}var t=p==null?[[],[],{},[],[]]:[p.ordered_threadlists,p.threads,p.roger,p.participants,p.delivery_receipts],u=t[1],v=i.thread_key,w=v==null?u.filter(function(y){return+(y.unread_count===0)}):[],x=w.length?c("bs_caml_array").caml_array_get(w,0).thread_fbid:null;if(!(r==null))u.push(r);return[{ordered_threadlists:t[0],threads:u,roger:t[2],participants:t[3].concat(m),delivery_receipts:t[4],payload_source:"server_initial_data"},x]}g.transform=h}),null);
__d("fBPaymentsDialogContainerReact",["ReasonReact","FBPaymentsDialogContainer.react"],(function a(b,c,d,e,f,g){"use strict";function h(i){return c("ReasonReact").wrapJsForReason(c("FBPaymentsDialogContainer.react"),{},i)}g.make=h}),null);
__d("mNCommerceDialogContainerReact",["ReasonReact","MNCommerceDialogContainer.react"],(function a(b,c,d,e,f,g){"use strict";function h(i){return c("ReasonReact").wrapJsForReason(c("MNCommerceDialogContainer.react"),{},i)}g.make=h}),null);
__d("messengerBannerReact",["utilsRe","bs_js_boolean","ReasonReact","bs_js_null_undefined","MessengerBanner.react"],(function a(b,c,d,e,f,g){"use strict";function h(i,j,k,l){return c("ReasonReact").wrapJsForReason(c("MessengerBanner.react"),{showWorkchatUpsellBanner:c("bs_js_boolean").to_js_boolean(i),initialPromotionData:c("bs_js_null_undefined").from_opt(j),isFirstRedirect:c("utilsRe").optionBoolToNullUndefinedBoolean(k)},l)}g.make=h}),null);
__d("messengerBugNubReact",["utilsRe","ReasonReact","bs_js_null_undefined","MessengerBugNub.react"],(function a(b,c,d,e,f,g){"use strict";function h(i,j,k){return c("ReasonReact").wrapJsForReason(c("MessengerBugNub.react"),{isBetaEnabled:c("utilsRe").optionBoolToNullUndefinedBoolean(i),unixName:c("bs_js_null_undefined").from_opt(j)},k)}g.make=h}),null);
__d("MercuryCanonicalGroupThreadActionTypes",["keyMirror"],(function a(b,c,d,e,f,g){"use strict";f.exports=c("keyMirror")({THREAD_SEARCH_UPDATED:null})}),null);
__d("MercuryCanonicalGroupThreadStore",["MercuryCanonicalGroupThreadActionTypes","FluxStore","MercuryCanonicalGroupThreadManager","MessengerDispatcher"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("FluxStore"));i=h&&h.prototype;function j(){i.constructor.call(this,c("MessengerDispatcher"));this.$MercuryCanonicalGroupThreadStore1=c("MercuryCanonicalGroupThreadManager").get()}j.prototype.__onDispatch=function(k){var l=k.type;switch(l){case c("MercuryCanonicalGroupThreadActionTypes").THREAD_SEARCH_UPDATED:this.__emitChange();break;default:break}};j.prototype.getOrFetch=function(k){var l=this.$MercuryCanonicalGroupThreadStore1.getNow(k);if(!l)this.$MercuryCanonicalGroupThreadStore1.getCanonicalGroupThreadIDForParticipants(k,function(){c("MessengerDispatcher").dispatch({type:c("MercuryCanonicalGroupThreadActionTypes").THREAD_SEARCH_UPDATED})});return l};f.exports=new j()}),null);
__d("MercuryReadOnlyReason",["fbt","Link.react","MercuryConfig","React","URI"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i={getReason:function j(){__p&&__p();var k=arguments.length<=0||arguments[0]===undefined?false:arguments[0];if(k){var l=c("MercuryConfig").DYIDeepLink;return h._("D\u00e9sol\u00e9, cette conversation n\u2019est plus active, car les messages ne sont plus envoy\u00e9s aux adresses e-mail. Depuis le 1er mai 2016, les conversations avec des adresses e-mail ne sont disponibles que dans une copie de vos donn\u00e9es Facebook. {download your information}.",[h.param("download your information",c("React").createElement("a",{href:l},h._("En savoir plus")))])}else if(c("MercuryConfig").ViewerIsReadOnly)return h._("Vous ne pouvez plus envoyer de messages pour le moment. {learn more about blocks}",[h.param("learn more about blocks",c("React").createElement(c("Link.react"),{href:new(c("URI"))("https://www.facebook.com/help/181183045316843"),target:"_blank"},"Learn more"))]);else if(c("MercuryConfig").ColdOpenBlock)return h._("Vous n\u2019\u00eates pas autoris\u00e9(e) \u00e0 commencer de nouvelles conversations pour le moment. {learn more about blocks}",[h.param("learn more about blocks",c("React").createElement(c("Link.react"),{href:new(c("URI"))("https://www.facebook.com/help/181183045316843"),target:"_blank"},"Learn more"))]);else return h._("Vous ne pouvez pas r\u00e9pondre \u00e0 cette conversation")}};f.exports=i}),null);
__d("DebouncedMentionsTextEditor.react",["AbstractMentionsTextEditor.react","clearImmediate","debounce","setImmediate"],(function a(b,c,d,e,f,g){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("AbstractMentionsTextEditor.react"));i=h&&h.prototype;function j(k){"use strict";__p&&__p();i.constructor.call(this,k);this.__maybeSearch=function(){__p&&__p();var l,m=this,n=this.props.editorState,o=n.getSelection();if(o.getHasFocus()&&o.isCollapsed())(function(){var p=n.getCurrentContent(),q=m.props.mentionsSource;if(q){if(m.$DebouncedMentionsTextEditor1)c("clearImmediate")(m.$DebouncedMentionsTextEditor1);m.$DebouncedMentionsTextEditor1=c("setImmediate")(function(){q.search(p,o,this.__onShowMentions)}.bind(m))}})()}.bind(this);this.__debouncedSearch=c("debounce")(this.__maybeSearch,50)}j.prototype.componentDidUpdate=function(k){"use strict";if(this.props.editorState!==k.editorState)this.__debouncedSearch()};j.prototype.componentWillUnmount=function(){"use strict";if(this.$DebouncedMentionsTextEditor1)c("clearImmediate")(this.$DebouncedMentionsTextEditor1);i.componentWillUnmount.call(this)};f.exports=j}),null);
__d("MessengerSingleSectionContactList.react",["cx","MessengerContactAdapters","MessengerContactList.react","MessengerTypeaheadUtils","React","TypeaheadViewPropTypes","joinClasses","wrapNullableForReact"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").PureComponent);j=i&&i.prototype;k.prototype.render=function(){var l=this.props,m=l.entries,n=l.viewProps,o=(!m.length?"_599s":"")+" _29hl _8i1 _11_d _4p-s";return c("React").createElement(c("MessengerContactList.react"),{controlleeID:this.props.controlleeID,className:c("joinClasses")(this.props.className,o,n.className),contactAdapter:c("MessengerContactAdapters").fromSearchableEntry,hasHoverState:true,highlightedEntry:c("wrapNullableForReact")(this.props.highlightedEntry),isLoading:false,listSections:c("MessengerTypeaheadUtils").buildSingleSection(m),onRenderHighlight:this.props.onRenderHighlight,onHighlight:this.props.onHighlight,onScrollIntoView:this.props.onScrollIntoView,onSelect:this.props.onSelect,viewer:n.viewer})};function k(){i.apply(this,arguments)}k.propTypes=c("TypeaheadViewPropTypes");k.defaultProps={role:"listbox"};f.exports=k}),null);
__d("XShareScrapeAttachmentAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/message_share_attachment/fromURI/",{})}),null);
__d("MessengerURLUploader",["AsyncRequest","Event","MessengerActions","SubscriptionsHandler","URLMatcher","XShareScrapeAttachmentAsyncController","debounce","gkx"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("XShareScrapeAttachmentAsyncController").getURIBuilder().getURI(),i=920,j=920;function k(l,m,n){__p&&__p();this.handleInputValueChange=function(o){__p&&__p();var p=this.$MessengerURLUploader3(),q=c("URLMatcher").match(p);if(!!q){if(this.$MessengerURLUploader5!==q){this.$MessengerURLUploader5=q;this.$MessengerURLUploader2=null;if(c("gkx")("AT5M-KOnq98igVULtzbIXLLujZOrcPEb_vzPxIrrMO4yDC59FjeQpdoZs2nMsaoB9WIY9SOWsfOkycr87iOYdoQQ"))c("MessengerActions").loadingPreview(this.$MessengerURLUploader7,q);this.loadShare()}}else if(!c("gkx")("AT5M-KOnq98igVULtzbIXLLujZOrcPEb_vzPxIrrMO4yDC59FjeQpdoZs2nMsaoB9WIY9SOWsfOkycr87iOYdoQQ")){this.$MessengerURLUploader5=null;this.$MessengerURLUploader2=null}}.bind(this);this.$MessengerURLUploader3=l;this.$MessengerURLUploader6=new(c("SubscriptionsHandler"))();this.$MessengerURLUploader7=n;this.$MessengerURLUploader4=c("debounce")(this.handleInputValueChange,200);this.initInput(m)}k.prototype.getData=function(){return this.$MessengerURLUploader2};k.prototype.getMatchedURL=function(){return this.$MessengerURLUploader5};k.prototype.initInput=function(l){this.$MessengerURLUploader6.addSubscriptions(c("Event").listen(l,"keyup",this.$MessengerURLUploader4),c("Event").listen(l,"paste",this.$MessengerURLUploader4))};k.prototype.loadShare=function(){if(this.$MessengerURLUploader1&&this.$MessengerURLUploader1.abort)this.$MessengerURLUploader1.abort();var l=this.$MessengerURLUploader5;if(l)this.$MessengerURLUploader1=new(c("AsyncRequest"))().setMethod("POST").setURI(h).setData({uri:l,image_width:j,image_height:i,disallow_delayed:true}).setHandler(this.handleShareLoad.bind(this,l)).send()};k.prototype.handleShareLoad=function(l,m){if(l===this.$MessengerURLUploader5)this.$MessengerURLUploader2=(m.payload||0).share_data};k.prototype.setThreadID=function(l){this.$MessengerURLUploader7=l};k.prototype.clearShareData=function(){this.$MessengerURLUploader5=null;this.$MessengerURLUploader2=null};f.exports=k}),null);
__d("AtSignAllowEmptyMentionsStrategy",["DocumentMentionsRegex"],(function a(b,c,d,e,f,g){var h=c("DocumentMentionsRegex").PUNCTUATION,i=["@","\\uff20"].join(""),j="[^"+i+h+"\\s]",k="(?:\\.[ |$]| |["+h+"]|)",l=new RegExp("(?:^|\\s|\\()(["+i+"]((?:"+j+k+"){0,20}))$"),m={name:"AtSignAllowEmptyMentionsStrategy",findMentionableString:function n(o){var p=l.exec(o);if(p!==null){var q=p[2];return{matchingString:q,leadOffset:p[1].length}}return null}};f.exports=m}),null);
__d("FourLetterMentionsStrategy",["DocumentMentionsRegex"],(function a(b,c,d,e,f,g){"use strict";var h=3,i="\\b[a-z][^\\s"+c("DocumentMentionsRegex").PUNCTUATION+"]",j=new RegExp("(^|[^#])((?:"+i+"{"+h+",})$)"),k={name:"FourLetterMentionsStrategy",findMentionableString:function l(m){var n=j.exec(m);if(n!==null)return{matchingString:n[2],leadOffset:n[2].length};return null}};f.exports=k}),null);
__d("createMentionsSearchSourceFromParticipants",["fbt","ix","AtSignAllowEmptyMentionsStrategy","CapitalizedNameMentionsStrategy","DocumentCompositeMentionsSource","DocumentMentionsSource","FourLetterMentionsStrategy","LogHistory","SearchableEntry","StaticSearchSource","nullthrows"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=c("LogHistory").getInstance("messenger_mentions"),k=i("91674").uri;function l(n,o,p,q){__p&&__p();if(!n||!o||o.length<=2)return null;var r=o.reduce(function(t,u){if(!u||u.fbid===n)return t;var v=p&&p.custom_nickname&&p.custom_nickname[u.fbid]?p.custom_nickname[u.fbid]:"";t.push(new(c("SearchableEntry"))({uniqueID:u.fbid,title:"@"+u.name,subtitle:v,photo:u.image_src,keywordString:v}));return t},[]);if(q&&p&&p.thread_fbid)r.push(m(p.thread_fbid));var s=new(c("StaticSearchSource"))(r);j.debug("constructed_search_source",JSON.stringify({participants:o.map(function(t){return t&&t.fbid})}));return new(c("DocumentCompositeMentionsSource"))([new(c("DocumentMentionsSource"))(c("AtSignAllowEmptyMentionsStrategy"),s),new(c("DocumentMentionsSource"))(c("CapitalizedNameMentionsStrategy"),s),new(c("DocumentMentionsSource"))(c("FourLetterMentionsStrategy"),s)])}function m(n){var o=h._("tout le monde").toString(),p=h._("Mentionner tous les participants de cette discussion").toString();return new(c("SearchableEntry"))({photo:k,title:"@"+o,uniqueID:c("nullthrows")(n),subtitle:p})}f.exports=l}),null);
__d("MessengerComposerInput.react",["cx","fbt","Bootloader","CompositeDraftDecorator","DebouncedMentionsTextEditor.react","DraftModifier","DOMDimensions","EditorState","EmojiFormat","MessengerActions","MessengerDialog.react","messengerDialogBodyReact","MessengerDialogButton.react","MessengerDialogFooter.react","MessengerDialogHeader.react","MessengerEmojiSpan.react","MessengerEmoticonSpan.react","MessengerMentionsEntityDecorator.react","MessengerSingleSectionContactList.react","Event","immutable","MentionsLayer.react","MercuryIDs","MercuryThreadIDMap","MercuryThreadSnippet.react","MercuryThreadTitle.react","MercuryTimestamp","MercuryTriodeSourceUtil","MessengerBotMenuButton.react","MessengerConstants","messengerDomIDsRe","MessengerEditorStateManager","MessengerMentionSource","MessengerTabIndices","messengerUploadFilesUtilRe","MessengerURLUploader","React","ReactDOM","Run","TypingDetectorController","URLMatcher","clearImmediate","createMessengerMentionDraftEntity","createMentionsSearchSourceFromParticipants","debounce","getEntityMatcher","getEveryoneMentionIndex","getProfileRangesForContentState","getThreadTypeNameFromThreadType","getVisibleValueForContentStateWithMessengerEmoji","gkx","handleBeforeInputForMessengerEmoji","handleBeforeInputForMessengerEmoticon","handleSoftNewlineForMessengerEmoticon","insertEmoticonIntoEditorState","insertMentionIntoEditorState","insertMessengerEmojiIntoContentState","isSoftNewlineEvent","setImmediate","shouldNotRenderSegoe","throttle"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("messengerDialogBodyReact").jsComponent,m=c("messengerDomIDsRe").ids,n=c("React").PropTypes,o=1,p=/^image\//,q="handled",r=8,s="not-handled";j=babelHelpers.inherits(t,c("React").PureComponent);k=j&&j.prototype;function t(w){__p&&__p();k.constructor.call(this,w);u.call(this);this.$MessengerInput11=this.$MessengerInput11.bind(this);this.state=this.$MessengerInput12();this.$MessengerInput6=c("debounce")(function(x){if(this.props.isComposing&&x.isComposing)return;if(!this.props.thread||!x.thread||v(this.props,x))this.$MessengerInput13()}.bind(this),300);this.$MessengerInput7=c("throttle")(function(){if(this.$MessengerInput10){var x=c("DOMDimensions").getElementDimensions(c("ReactDOM").findDOMNode(this)).height;if(this.$MessengerInput1!==x)this.props.onResize&&this.props.onResize();this.$MessengerInput1=x}}.bind(this),100)}t.prototype.$MessengerInput12=function(w){return{editorState:this.$MessengerInput14(c("MessengerEditorStateManager").get(this.props.threadID),w)}};t.prototype.componentDidMount=function(){this.$MessengerInput10=true;this.$MessengerInput1=c("DOMDimensions").getElementDimensions(c("ReactDOM").findDOMNode(this)).height;this.$MessengerInput13();this.$MessengerInput2=new(c("MessengerURLUploader"))(this.getValue,c("ReactDOM").findDOMNode(this.refs.input),this.props.threadID);c("Run").onUnload(this.$MessengerInput15);this.$MessengerInput3=c("Event").listen(window,"blur",this.$MessengerInput15);this.$MessengerInput4=c("Event").listen(window,"focus",this.$MessengerInput16);this.$MessengerInput5=c("debounce")(function(){this.$MessengerInput17()}.bind(this),1e3)};t.prototype.componentWillUpdate=function(w){if(this.props.threadID!==w.threadID)this.$MessengerInput17()};t.prototype.componentDidUpdate=function(w,x){this.$MessengerInput9=c("setImmediate")(this.$MessengerInput7);if(this.props.threadID!==w.threadID)this.$MessengerInput13();else this.$MessengerInput6(w);if(x.editorState!==this.state.editorState)this.props.onChange&&this.props.onChange(this.getValue())};t.prototype.componentWillUnmount=function(){this.$MessengerInput10=false;this.$MessengerInput8&&this.$MessengerInput8.destroy();this.props.threadID&&this.$MessengerInput17();this.$MessengerInput9&&c("clearImmediate")(this.$MessengerInput9);this.$MessengerInput3&&this.$MessengerInput3.remove();this.$MessengerInput4&&this.$MessengerInput4.remove()};t.prototype.insertEmoticon=function(w){var x=c("insertEmoticonIntoEditorState")(w,this.state.editorState);if(x!==this.state.editorState)this.$MessengerInput18(x)};t.prototype.insertEmoji=function(w){var x=this.state.editorState,y=c("insertMessengerEmojiIntoContentState")(c("EmojiFormat").codeArrayToCodeString(w),x.getCurrentContent(),x.getSelection(),x.getCurrentInlineStyle()),z=c("EditorState").push(x,y,"insert-characters");if(z!==this.state.editorState)this.$MessengerInput18(c("EditorState").forceSelection(z,y.getSelectionAfter()))};t.prototype.$MessengerInput20=function(){var w=this.props.fileUploader;return Boolean(w&&w.get("uploadedFiles").size>0)};t.prototype.$MessengerInput13=function(){__p&&__p();if(!this.$MessengerInput10)return;this.$MessengerInput21();this.$MessengerInput22();if(this.$MessengerInput2){this.$MessengerInput2.setThreadID(this.props.threadID);this.$MessengerInput2.clearShareData()}var w=this.$MessengerInput12();if(this.props.mentionsEnabled){var x=this.props,y=x.participants,z=x.viewer,A=x.thread;w.mentionsSource=c("createMentionsSearchSourceFromParticipants")(z,y&&y.toArray(),A,c("gkx")("AT49sw5n0nlIyoqYGYpRJXtOnRzCLqSpsmIoWA7hmyYTaoQcU5JHlDW_AWGZ_laa8hQ933FOWyuLNLlpGxYhTnOb"))}this.setState(w,function(){if(this.props.threadID!==c("MessengerConstants").NEW_THREAD_KEY)c("setImmediate")(function(){if(!this.props.disableAutofocus)this.focus()}.bind(this))}.bind(this))};t.prototype.$MessengerInput17=function(){if(!this.props.threadID)return;c("MessengerEditorStateManager").set(this.props.threadID,this.state.editorState)};t.prototype.$MessengerInput21=function(w){if(this.$MessengerInput2)this.$MessengerInput2.clearShareData();this.setState({editorState:this.$MessengerInput14(c("EditorState").createEmpty()),addedMentionsCount:0,mentionsTriggeredCount:0,mentionsTriggerSource:null,showEveryoneMentionDialog:false},w)};t.prototype.$MessengerInput22=function(){this.$MessengerInput8&&this.$MessengerInput8.destroy();this.$MessengerInput8=null;var w=this.props.viewer;if(!w)return;var x=c("ReactDOM").findDOMNode(this.refs.input);if(this.props.threadID!==c("MessengerConstants").NEW_THREAD_KEY&&x)this.$MessengerInput8=new(c("TypingDetectorController"))(c("MercuryIDs").getUserIDFromThreadID(this.props.threadID),x,c("MercuryTriodeSourceUtil").getMercuryTriodeSource(),null,c("MercuryThreadIDMap").getForFBID(w).getServerIDFromClientIDNow(this.props.threadID),this.getValue)};t.prototype.$MessengerInput23=function(){var w=this.props.fileUploader;if(w){c("messengerUploadFilesUtilRe").sendAttchments(w,this.props.onFileUpload);c("MessengerActions").cleanFiles(this.props.threadID)}};t.prototype.onEveryoneWarningAccept=function(){this.setState({showEveryoneMentionDialog:false},function(){if(this.props.thread){var w=this.getMentions(this.props.thread.thread_fbid);this.$MessengerInput24(w)}}.bind(this))};t.prototype.hideWarningDialog=function(){this.setState({showEveryoneMentionDialog:false})};t.prototype.getEveryoneMentionWarningDialog=function(){var w=i._("Mentionner tout le monde\u00a0?").toString(),x=i._("Cela enverra une mention \u00e0 tous les membres de ce groupe.").toString();return c("React").createElement(c("MessengerDialog.react"),{onToggle:function(y){if(!y)this.hideWarningDialog()}.bind(this)},c("React").createElement(c("MessengerDialogHeader.react"),null,w),c("React").createElement(l,null,x),c("React").createElement(c("MessengerDialogFooter.react"),null,c("React").createElement(c("MessengerDialogButton.react"),{action:"cancel",label:i._("Annuler"),type:"secondary",onClick:function(){return this.hideWarningDialog()}.bind(this)}),c("React").createElement(c("MessengerDialogButton.react"),{label:i._("OK"),type:"primary",use:"default",onClick:function(){return this.onEveryoneWarningAccept()}.bind(this)})))};t.prototype.$MessengerInput25=function(){if(this.props.thread){var w=this.getMentions(this.props.thread.thread_fbid),x=c("getEveryoneMentionIndex")(w)>-1;if(x)this.setState({showEveryoneMentionDialog:x});else this.$MessengerInput24(w)}else this.$MessengerInput24()};t.prototype.$MessengerInput24=function(w){__p&&__p();if(this.props.onMessageSend&&this.props.onMessageSend(this.getValue(),{shareable_attachment:this.getShareData(),profile_ranges:w},function(x){var y,z=this;if(c("gkx")("AT5M-KOnq98igVULtzbIXLLujZOrcPEb_vzPxIrrMO4yDC59FjeQpdoZs2nMsaoB9WIY9SOWsfOkycr87iOYdoQQ"))c("MessengerActions").removeSharePreview(this.props.threadID);if(x&&this.props.mentionsEnabled&&(w&&w.length||this.state.addedMentionsCount||this.state.mentionsTriggeredCount||this.state.mentionsTriggerSource))(function(){var A=z.state,B=A.addedMentionsCount,C=A.mentionsTriggeredCount,D=A.mentionsTriggerSource,E=z.props,F=E.thread,G=E.participants,H=x;c("Bootloader").loadModules(["MessengerMentionsTypedLogger","MessengerMentionsLoggerEvents"],function(I,J){new I().setEvent(J.MENTION).setGroupSize(G&&G.size).setNumDelivered(w&&w.length||0).setNumSelects(B).setNumTriggers(C).setThreadid(F&&F.thread_id).setThreadType(c("getThreadTypeNameFromThreadType")(F&&F.thread_type)).setOfflineThreadid(H.offline_threading_id).updateExtraData({source:D}).log()},"MessengerComposerInput.react")})()}.bind(this)))this.$MessengerInput21(function(){this.$MessengerInput17();this.$MessengerInput8&&this.$MessengerInput8.resetState()}.bind(this))};t.prototype.getMentions=function(w){return c("getProfileRangesForContentState")(this.state.editorState.getCurrentContent(),w)};t.prototype.getInput=function(){return this.refs.input};t.prototype.render=function(){__p&&__p();var w=this.props,x=w.participants,y=w.thread,z=w.viewer,A=null;if(x&&y&&z)A=i._("Conversation avec {participantListAsShownInThreadList}. Mise \u00e0 jour {lastUpdatedTime} par {recentUpdateStringAsShownInThreadList}",[i.param("participantListAsShownInThreadList",this.$MessengerInput26(y,z)),i.param("lastUpdatedTime",c("MercuryTimestamp").getAbsoluteTimestamp(y.timestamp)),i.param("recentUpdateStringAsShownInThreadList",this.$MessengerInput27(x,y,z))]);else A=i._("Saisie d\u2019un nouveau message");var B=null;if(this.props.threadID&&this.props.pageID)B=c("React").createElement("div",{ref:"botsMenuContainer",className:"_3km1"},c("React").createElement(c("MessengerBotMenuButton.react"),{flyoutAlignment:"left",threadID:this.props.threadID,pageID:this.props.pageID,className:"_3km2"}));var C="";if(this.props.disableInput)C=i._("L\u2019\u00e9diteur est d\u00e9sactiv\u00e9 pour ce fil.").toString();else if(this.props.thread&&!this.props.thread.is_canonical)C=i._("\u00c9crivez un message, \u0040nom...").toString();else C=i._("\u00c9crivez un message...").toString();var D=this.getEveryoneMentionWarningDialog();return c("React").createElement("div",{className:"_kmc"+(this.props.smallerEqual640?" _2swd":"")+(c("shouldNotRenderSegoe")(this.state.editorState.getCurrentContent().getPlainText())?" _2por":"")+" navigationFocus",onClick:this.focus,role:"presentation"},this.state.showEveryoneMentionDialog?D:null,this.props.showMenu?B:null,c("React").createElement("div",{className:"_3-8x"+(this.props.showMenu?" _3km3":"")+" _3oh-"},c("React").createElement(c("DebouncedMentionsTextEditor.react"),{autoHighlight:true,ariaControls:m.CONVERSATION,ariaDescribedBy:m.COMPOSER_INPUT_DESCRIPTION,ariaLabel:C,editorState:this.state.editorState,handleBeforeInput:this.$MessengerInput28,handleContentReturn:this.$MessengerInput19,handlePastedFiles:this.$MessengerInput11,handleReturn:this.$MessengerInput19,maxResults:r,readOnly:this.props.disableInput,mentionCreationFn:this.$MessengerInput29,mentionResultsComponent:c("MentionsLayer.react"),mentionResultsProps:{typeaheadView:c("MessengerSingleSectionContactList.react"),typeaheadViewProps:{className:"_13iv",viewer:this.props.viewer},position:"above",autoflip:true},mentionsSource:this.state.mentionsSource,onChange:this.$MessengerInput18,placeholder:C,ref:"input",spellCheck:true,stripPastedStyles:true,tabIndex:this.props.threadID===c("MessengerConstants").NEW_THREAD_KEY?c("MessengerTabIndices").COMPOSER_INPUT:0,textAlignment:"left",onAddMention:this.$MessengerInput30,onShowMentions:this.$MessengerInput31}),c("React").createElement("div",{className:"_5ca7",id:m.COMPOSER_INPUT_DESCRIPTION},A)))};t.prototype.$MessengerInput26=function(w,x){return c("React").createElement(c("MercuryThreadTitle.react"),{thread:w,viewer:x})};t.prototype.$MessengerInput27=function(w,x,y){return c("React").createElement(c("MercuryThreadSnippet.react"),{participants:w,shouldAlwaysRenderSender:true,shouldRenderYou:true,thread:x,viewer:y})};t.prototype.$MessengerInput14=function(w,x){var y=this.$MessengerInput32(w),z=c("EditorState").set(w,{decorator:y});return x||this.props.disableAutofocus?z:c("EditorState").moveFocusToEnd(z)};t.prototype.$MessengerInput32=function(w){var x=c("MessengerEmoticonSpan.react"),y=w.getCurrentContent(),z=[{strategy:c("getEntityMatcher")(function(A){return A.getType()==="EMOTICON"},y.getEntity),component:x}];z.push({strategy:c("getEntityMatcher")(function(A){return A.getType()==="EMOJI"},y.getEntity),component:c("MessengerEmojiSpan.react")});z.push({strategy:c("getEntityMatcher")(function(A){return A.getType()==="MENTION"},y.getEntity),component:c("MessengerMentionsEntityDecorator.react")});return new(c("CompositeDraftDecorator"))(z)};t.prototype.$MessengerInput33=function(w,x){var y=c("handleBeforeInputForMessengerEmoticon")(x,w);if(y===x)return false;this.setState({editorState:y});return true};t.prototype.$MessengerInput34=function(w,x){var y=c("handleBeforeInputForMessengerEmoji")(x,w);if(y===x)return false;this.setState({editorState:y});return true};t.prototype.handleTextDropped=function(w){var x=this.state.editorState,y=x.getSelection();if(y.get("hasFocus"))return;var z=c("DraftModifier").replaceText(x.getCurrentContent(),y,w,x.getCurrentInlineStyle()),A=c("EditorState").push(x,z,"insert-fragment");this.$MessengerInput18(A)};t.prototype.getShareData=function(){__p&&__p();if(c("gkx")("AT5M-KOnq98igVULtzbIXLLujZOrcPEb_vzPxIrrMO4yDC59FjeQpdoZs2nMsaoB9WIY9SOWsfOkycr87iOYdoQQ")){var w=this.props.sharePreview;if(w&&w.type&&w.params)return{share_type:w.type,share_params:w.params.get("data")};return null}var x=c("URLMatcher").match(this.getValue());if(x===this.$MessengerInput2.getMatchedURL())return this.$MessengerInput2.getData();return null};t.prototype.exitCurrentMode=function(){this.refs.input&&this.refs.input.exitCurrentMode()};t.prototype.$MessengerInput35=function(){var w=this.props.sharePreview;return!!(w&&w.params&&w.type)};t.prototype.addMention=function(w){var x=c("insertMentionIntoEditorState")(w,this.state.editorState,0,this.$MessengerInput29);if(!this.state.mentionsTriggerSource)this.setState({mentionsTriggerSource:c("MessengerMentionSource").REPLY});this.$MessengerInput18(x);this.$MessengerInput30()};t.propTypes={disableAutofocus:n.bool,fileUploader:n.object,handleOnlyImageUploads:n.bool.isRequired,isComposing:n.bool,mentionsEnabled:n.bool,pageID:n.string,participants:n.instanceOf(c("immutable").Map),sharePreview:n.object,showMenu:n.bool,disableInput:n.bool,smallerEqual640:n.bool,thread:n.object,threadID:n.string,viewer:n.string,onBeforeInput:n.func,onChange:n.func,onFileUpload:n.func,onResize:n.func,onMessageSend:n.func};var u=function u(){__p&&__p();this.$MessengerInput10=false;this.$MessengerInput18=function(w){if(w!==this.state.editorState)this.setState({editorState:w},function(){this.$MessengerInput5()}.bind(this))}.bind(this);this.$MessengerInput19=function(event,w){if(c("isSoftNewlineEvent")(event)){var x=c("handleSoftNewlineForMessengerEmoticon");this.setState({editorState:x(w)});return q}this.setState({},this.triggerSend);return q}.bind(this);this.getValue=function(){return c("getVisibleValueForContentStateWithMessengerEmoji")(this.state.editorState.getCurrentContent())}.bind(this);this.focus=function(){this.refs.input&&this.refs.input.focus()}.bind(this);this.$MessengerInput28=function(w,x){this.props.onBeforeInput&&this.props.onBeforeInput(w,x);var y=this.$MessengerInput33(w,x),z=this.$MessengerInput34(w,x);return y||z?q:s}.bind(this);this.$MessengerInput11=function(w){var x=this.props.handleOnlyImageUploads?w.filter(function(y){return y&&p.test(y.type)}):w;if(x.length){c("gkx")("AT5V6GuV7OE1f4CNmq1NUhZOeDrgnZF-AQ7WoOvZA8jFMJsYzyghwU79Bm31vgH-mi9DAlUGSFnfYvhwjhMfTolYEEzHhgUrhLD2UxTqbooHHw")?c("MessengerActions").prepareFilesForSend(this.props.threadID,x):this.props.onFileUpload(x);return q}return s}.bind(this);this.$MessengerInput15=function(){this.$MessengerInput17()}.bind(this);this.$MessengerInput16=function(){this.setState(this.$MessengerInput12(true))}.bind(this);this.triggerSend=function(){if(this.$MessengerInput20())this.$MessengerInput23();if(this.getValue().trim().length>0||this.$MessengerInput35())this.$MessengerInput25()}.bind(this);this.$MessengerInput30=function(){var w=(this.state.addedMentionsCount||0)+1;this.setState({addedMentionsCount:w})}.bind(this);this.$MessengerInput31=function(w,x){var y=(this.state.mentionsTriggeredCount||0)+1,z={mentionsTriggeredCount:y};if(!this.state.mentionsTriggerSource)z.mentionsTriggerSource=x===o?c("MessengerMentionSource").ATSIGN:c("MessengerMentionSource").TYPEAHEAD;this.setState(z)}.bind(this);this.$MessengerInput29=function(w){return c("createMessengerMentionDraftEntity")(this.state.editorState.getCurrentContent(),w)}.bind(this)};function v(w,x){var y=w.participants,z=x.participants;if(!y||!z)return true;var A=y.filter(Boolean),B=z.filter(Boolean);return A.size!==B.size||!A.equals(B)}f.exports=t}),null);
__d("XMNCommercePageNullStateCTAController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/messages/commerce/page/nullstate/",{})}),null);
__d("messengerFileSizeErrorDialogReact",["fbt","ReasonReact","messengerDialogsRe","messengerDialogReact","messengerDialogBodyReact"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();function i(o){switch(o){case"size-exceeded":return 1;case"wrong-type":return 0;default:return 2}}var j=c("ReasonReact").statelessComponent("MessengerFileSizeErrorDialogReact");function k(o){if(o)return 0;else return c("messengerDialogsRe").removeDialog(0)}function l(o){switch(o){case 0:return h._("Le type de fichier que vous tentez de joindre n\u2019est pas autoris\u00e9. Veuillez r\u00e9essayer avec un format diff\u00e9rent.");case 1:return h._("Le fichier s\u00e9lectionn\u00e9 est trop volumineux. La taille maximale est 25 Mo.");case 2:return null}}function m(o,p){var q=j.slice();q[9]=function(){return c("ReasonReact").element(0,0,c("messengerDialogReact").Dialog[0](0,k,0,0,0,0,0,[c("ReasonReact").element(0,0,c("messengerDialogReact").Header[0](0,0,h._("Impossible de t\u00e9l\u00e9charger les fichiers"))),c("ReasonReact").element(0,0,c("messengerDialogBodyReact").make(0,[l(o)])),c("ReasonReact").element(0,0,c("messengerDialogReact").Footer[0](0,0,[c("ReasonReact").element(0,0,c("messengerDialogReact").Button[0]([0],[h._("OK")],0,0,0,[0],0,0,[]))]))]))};return q}var n=c("ReasonReact").wrapReasonForJs(j,function(o){return m(i(o.error),[])});g.errorOfString=i;g.component=j;g.handleToggle=k;g.renderDialogBody=l;g.make=m;g.jsComponent=n}),null);
__d("bs_marshal",["bs_caml_string","bs_caml_missing_polyfill","bs_caml_builtin_exceptions"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(p,q,r,s,t){if(q<0||r<0||q>(p.length-r|0))throw[c("bs_caml_builtin_exceptions").invalid_argument,"Marshal.to_buffer: substring out of bounds"];else return c("bs_caml_missing_polyfill").not_implemented("caml_output_value_to_buffer not implemented by bucklescript yet\n")}function i(p,q){if(q<0||q>(p.length-20|0))throw[c("bs_caml_builtin_exceptions").invalid_argument,"Marshal.data_size"];else return c("bs_caml_missing_polyfill").not_implemented("caml_marshal_data_size not implemented by bucklescript yet\n")}function j(p,q){return 20+i(p,q)|0}function k(p,q){if(q<0||q>(p.length-20|0))throw[c("bs_caml_builtin_exceptions").invalid_argument,"Marshal.from_bytes"];else{var r=c("bs_caml_missing_polyfill").not_implemented("caml_marshal_data_size not implemented by bucklescript yet\n");if(q>(p.length-(20+r|0)|0))throw[c("bs_caml_builtin_exceptions").invalid_argument,"Marshal.from_bytes"];else return c("bs_caml_missing_polyfill").not_implemented("caml_input_value_from_string not implemented by bucklescript yet\n")}}function l(p,q){return k(c("bs_caml_string").bytes_of_string(p),q)}function m(p,q,r){return c("bs_caml_missing_polyfill").not_implemented("caml_output_value not implemented by bucklescript yet\n")}function n(){return c("bs_caml_missing_polyfill").not_implemented("caml_input_value not implemented by bucklescript yet\n")}var o=20;g.to_channel=m;g.to_buffer=h;g.from_channel=n;g.from_bytes=k;g.from_string=l;g.header_size=o;g.data_size=i;g.total_size=j}),null);
__d("bs_obj",["bs_marshal","bs_caml_array","bs_caml_missing_polyfill","bs_caml_builtin_exceptions"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("bs_caml_array").caml_array_get,i=c("bs_caml_array").caml_array_set;function j(){return c("bs_caml_missing_polyfill").not_implemented("caml_output_value_to_string not implemented by bucklescript yet\n")}function k(G,H){return[c("bs_marshal").from_bytes(G,H),H+c("bs_marshal").total_size(G,H)|0]}function l(G){var H=G.length!==undefined&&(G.tag|0)!==248&&G.length>=1?G[0]:G,I;if(H.length!==undefined&&H.tag===248)I=H[0];else throw c("bs_caml_builtin_exceptions").not_found;if(I.tag===252)return H;else throw c("bs_caml_builtin_exceptions").not_found}function m(G){try{var H=l(G);return H[0]}catch(I){if(I===c("bs_caml_builtin_exceptions").not_found)throw[c("bs_caml_builtin_exceptions").invalid_argument,"Obj.extension_name"];else throw I}}function n(G){try{var H=l(G);return H[1]}catch(I){if(I===c("bs_caml_builtin_exceptions").not_found)throw[c("bs_caml_builtin_exceptions").invalid_argument,"Obj.extension_id"];else throw I}}function o(G){try{return l(G)}catch(H){if(H===c("bs_caml_builtin_exceptions").not_found)throw[c("bs_caml_builtin_exceptions").invalid_argument,"Obj.extension_slot"];else throw H}}var p=0,q=245,r=246,s=247,t=248,u=249,v=250,w=251,x=251,y=252,z=253,A=254,B=255,C=255,D=1e3,E=1001,F=1002;g.double_field=h;g.set_double_field=i;g.first_non_constant_constructor_tag=p;g.last_non_constant_constructor_tag=q;g.lazy_tag=r;g.closure_tag=s;g.object_tag=t;g.infix_tag=u;g.forward_tag=v;g.no_scan_tag=w;g.abstract_tag=x;g.string_tag=y;g.double_tag=z;g.double_array_tag=A;g.custom_tag=B;g.final_tag=C;g.int_tag=D;g.out_of_heap_tag=E;g.unaligned_tag=F;g.extension_name=m;g.extension_id=n;g.extension_slot=o;g.marshal=j;g.unmarshal=k}),null);
__d("bs_camlinternalLazy",["bs_obj","bs_curry","bs_caml_exceptions"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("bs_caml_exceptions").create("CamlinternalLazy.Undefined");function i(){throw h}function j(n){__p&&__p();var o=n[0];n[0]=i;try{var p=c("bs_curry")._1(o,0);n[0]=p;n.tag=c("bs_obj").forward_tag;return p}catch(q){n[0]=function(){throw q};throw q}}function k(n){var o=n[0];n[0]=i;var p=c("bs_curry")._1(o,0);n[0]=p;n.tag=c("bs_obj").forward_tag;return p}function l(n){var o=n.tag|0;if(o===c("bs_obj").forward_tag)return n[0];else if(o!==c("bs_obj").lazy_tag)return n;else return j(n)}function m(n){var o=n.tag|0;if(o===c("bs_obj").forward_tag)return n[0];else if(o!==c("bs_obj").lazy_tag)return n;else return k(n)}g.Undefined=h;g.force_lazy_block=j;g.force_val_lazy_block=k;g.force=l;g.force_val=m}),null);
__d("messengerSendButtonReact",["fbt","bs_block","linkReact","ReasonReact","bs_js_primitive","bs_camlinternalLazy"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("ReasonReact").statelessComponent("MessengerSendButtonReact"),j=c("bs_block").__(246,[function(){return h._("Appuyer sur Entr\u00e9e pour envoyer")+("\n"+h._("Appuyez sur Maj+Entr\u00e9e pour ajouter un paragraphe"))}]);function k(m,n,o,p){var q=i.slice();q[9]=function(){var r=n?[{color:n[0]}]:0,s=j.tag|0;return c("ReasonReact").element(0,0,c("linkReact").make(0,[m],["tooltip"],[s===250?j[0]:s===246?c("bs_camlinternalLazy").force_lazy_block(j):j],0,0,0,[o],0,0,0,r,0,0,0,h._("Envoyer")))};return q}var l=c("ReasonReact").wrapReasonForJs(i,function(m){return k(m.className,c("bs_js_primitive").null_undefined_to_opt(m.customColor),m.onClick,[])});g.component=i;g.title=j;g.make=k;g.jsComponent=l}),null);
__d("MessengerComposer.react",["cx","cssVar","fbt","invariant","AsyncRequest","AutoFocusableLink.react","BootloadedComponent.react","MercuryBootloadOnInteraction.react","BootloadOnRender.react","Bootloader","ChatPhotoUploader.react","ChatConfig","CurrentUser","EmoticonsList","immutable","JSResource","LazyComponent.react","MercuryConfig","MercuryIDs","MercuryReadOnlyReason","MercuryParticipants","MercuryThreadActions","MessageRequestUtils","MessagingTag","MessengerStateStore","MessengerActions","MessengerBotMenuDataFetcher","messengerBlockDialogReact","messengerConfirmBlockThreadDialogReact","messengerButtonReact","MessengerComposerInput.react","MessengerConstants","MessengerContextualDialog.react","messengerDialogsRe","MessengerMessageRequestsTypedLogger","messengerFileSizeErrorDialogReact","MessengerHotLikeButton.react","MessengerHotLikeUtils","MessengerQuickCamOrigins","MessengerResponsiveBlock.react","messengerSendButtonReact","MessengerView","MNCommerceCallToActionType","MNCommercePageSetting","MNCommercePostbackCTADataManager","MNCommercePostbackRefSendManager","P2PGKValues","React","MercuryShareAttachmentRenderLocations","WorkQEWorkChatFileAttachmentIcon","XMessagingUnblockMessagesController","XMNCommercePageNullStateCTAController","XUISpinner.react","getPageIDFromThreadID","gkx","isWebGLEnabled","idx"],(function a(b,c,d,e,f,g,h,i,j,k){"use strict";__p&&__p();var l,m,n=c("messengerBlockDialogReact").jsComponent,o=c("messengerConfirmBlockThreadDialogReact").jsComponent,p=c("messengerButtonReact").jsComponent,q=c("messengerFileSizeErrorDialogReact").jsComponent,r=c("messengerSendButtonReact").jsComponent,s=c("React").PropTypes,t=640,u=360,v=navigator.mediaDevices&&navigator.mediaDevices.getUserMedia||navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;l=babelHelpers.inherits(w,c("React").PureComponent);m=l&&l.prototype;function w(x){__p&&__p();m.constructor.call(this,x);this.handleFileUpload=function(y){this.refsUploader&&this.refsUploader.uploadFiles(y);this.exitCurrentMode()}.bind(this);this.$MessengerComposer30=function(y){var z=c("EmoticonsList").symbols[y];if(!z)return;this.refsInput&&this.refsInput.insertEmoticon(z)}.bind(this);this.focusInput=function(){this.refsInput&&this.refsInput.focus()}.bind(this);this.$MessengerComposer46=function(){var y=c("XMessagingUnblockMessagesController").getURIBuilder().getURI(),z=this.props.threadID;new(c("AsyncRequest"))(y).setMethod("POST").setData({fbid:c("MercuryIDs").getUserIDFromThreadID(z)}).send()}.bind(this);this.$MessengerComposer44=function(){__p&&__p();var y=this.props.thread,z=!!y&&c("MessageRequestUtils").isFiltered(y),A=c("MessengerStateStore").getState().threadIDs;if(A){var B=A.filter(function(E){return this.props.threadID!==E}.bind(this));c("MessengerActions").selectAggregation(B)}var C=c("CurrentUser").getID(),D=c("MercuryIDs").getThreadKeyfromThreadIDUserID(this.props.threadID,C);this.$MessengerComposer42()["delete"](this.props.threadID);c("MessengerActions").selectThread(null);new(c("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_delete_request").setThreadID(c("MercuryIDs").getThreadFBIDFromThreadID(this.props.threadID)).setSurface("thread").setFolderType(z?"other":"pending").setThreadKey(D).setEntryPoint("inbox_banner").log()}.bind(this);this.$MessengerComposer48=function(){if(c("MercuryConfig").WMBF)this.$MessengerComposer43();else{this.$MessengerComposer42().archive(this.props.threadID);c("MessengerActions").selectThread(null)}}.bind(this);this.$MessengerComposer43=function(){__p&&__p();var y,z,A=this,B=(y=this.props)!=null?(y=y.thread)!=null?y.thread_id:y:y,C=c("MercuryIDs").isGroupChat(B);if(C)this.$MessengerComposer49();else{var D;(function(){var E=(D=A.props)!=null?(D=D.thread)!=null?D.other_user_fbid:D:D,F=E?c("MercuryParticipants").getNow(c("MercuryIDs").getParticipantIDFromUserID(E)):null,G=F&&F.short_name;if(G)c("messengerDialogsRe").showDialog(function(){return c("React").createElement(n,{onBlock:function(){this.$MessengerComposer50(G)}.bind(this),contact:F,onToggle:this.$MessengerComposer51})}.bind(A))})()}}.bind(this);this.$MessengerComposer45=function(y){var z=this.props.thread,A=c("CurrentUser").getID(),B=c("MercuryIDs").getThreadKeyfromThreadIDUserID(this.props.threadID,A),C=!!z&&c("MessageRequestUtils").isFiltered(z);if(!y)new(c("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_decline_cancel").setThreadID(c("MercuryIDs").getThreadFBIDFromThreadID(this.props.threadID)).setSurface("thread").setFolderType(C?c("MessagingTag").OTHER:c("MessagingTag").PENDING).setThreadKey(B).setEntryPoint("inbox_banner").log()}.bind(this);this.$MessengerComposer40=function(y,z){if(y.platformFBID.toString()===c("MercuryConfig").MessengerAppID)this.props.onStickerSelect(y.resultID.toString());else this.refsGifUploader&&this.refsGifUploader.uploadURL({attribution_app_id:y.platformFBID,external_image_url:y.source.url,preview_url:y.media.preview?y.media.preview.url:y.media.thumbnail.url,source:y.source})}.bind(this);this.$MessengerComposer41=function(y){this.focusInput();this.refsInput&&this.refsInput.insertEmoji(y)}.bind(this);this.$MessengerComposer14=function(y){this.setState({currentValue:y})}.bind(this);this.$MessengerComposer13=function(y,z,A){this.refsEmojiButton&&this.refsEmojiButton.hideFlyout();return this.props.onMessageSend&&this.props.onMessageSend(y,z,A)}.bind(this);this.$MessengerComposer39=function(y){this.refsInput&&this.refsInput.triggerSend()}.bind(this);this.$MessengerComposer10=function(){__p&&__p();if(this.state.nullStateCTA!==null)switch(this.state.nullStateCTA.action_type){case c("MNCommerceCallToActionType").OPEN_NATIVE:break;case c("MNCommerceCallToActionType").POSTBACK:default:this.setState({disableNullState:true});if(c("MNCommercePostbackRefSendManager").hasMDotMeRef(this.$MessengerComposer4())){c("MNCommercePostbackCTADataManager").sendAndConfirm(this.state.nullStateCTA.id,this.state.nullStateCTA.title,this.props.threadID,null,this.$MessengerComposer1,c("MNCommercePostbackRefSendManager").getMdotMeRef());c("MessengerActions").changeMDotMeReferral()}else c("MNCommercePostbackCTADataManager").sendAndConfirm(this.state.nullStateCTA.id,this.state.nullStateCTA.title,this.props.threadID,null,this.$MessengerComposer1);break}}.bind(this);this.$MessengerComposer1=function(){this.setState({showNullState:true,disableNullState:false})}.bind(this);this.$MessengerComposer1=this.$MessengerComposer1.bind(this);this.state=this.$MessengerComposer2()}w.prototype.componentWillReceiveProps=function(x){if(x.threadID!==this.props.threadID){this.setState(this.$MessengerComposer2());if(x.thread)this.$MessengerComposer3(x.thread.message_count,c("getPageIDFromThreadID")(x.threadID))}if(x.thread&&x.thread.message_count>0)this.setState({showNullState:false})};w.prototype.componentWillMount=function(){if(this.props.thread)this.$MessengerComposer3(this.props.thread.message_count,this.$MessengerComposer4())};w.prototype.componentDidUpdate=function(x){if(x.canReply!==this.props.canReply)this.props.onResize&&this.props.onResize();if(this.props.thread){this.$MessengerComposer5();this.$MessengerComposer6()}};w.prototype.render=function(){__p&&__p();if(!this.props.canReply)return this.$MessengerComposer7();else if(this.props.thread&&c("MessageRequestUtils").isMessageRequest(this.props.thread)&&!this.state.pendingActionsBypassed)return this.$MessengerComposer8();var x=this.props.thread&&this.props.thread.message_count;c("MNCommercePostbackRefSendManager").sendMDotMeRef(this.$MessengerComposer4(),x);if(this.state.showNullState&&this.state.nullStateCTA!==null)return c("React").createElement("div",{className:"_2xh0"},this.$MessengerComposer9(),c("React").createElement("div",{className:"_2xh4 _59w_"},c("React").createElement(c("BootloadOnRender.react"),{component:c("React").createElement(c("LazyComponent.react"),{cta:this.state.nullStateCTA,onClick:this.$MessengerComposer10,disabled:this.state.disableNullState,threadID:this.props.threadID}),loader:c("JSResource")("ChatPageComposerNullState.react").__setRef("MessengerComposer.react"),placeholder:c("React").createElement(c("XUISpinner.react"),{size:"small"})})));var y=this.$MessengerComposer11();return c("React").createElement(c("MessengerResponsiveBlock.react"),{breakpointsToggles:function z(A){return[A!=null&&A<=t,A]}},function(z){var A=z[0],B=z[1];return c("React").createElement("div",{"aria-label":j._("Nouveau message"),className:"_4rv3",role:"region"},c("gkx")("AT5V6GuV7OE1f4CNmq1NUhZOeDrgnZF-AQ7WoOvZA8jFMJsYzyghwU79Bm31vgH-mi9DAlUGSFnfYvhwjhMfTolYEEzHhgUrhLD2UxTqbooHHw")&&this.$MessengerComposer12(this.props.threadID),c("React").createElement("div",{className:"_5irm"+(A?" _1_73":"")},c("React").createElement(c("MessengerComposerInput.react"),{disableAutofocus:!!this.props.disableAutofocus,fileUploader:this.props.fileUploader,handleOnlyImageUploads:false,isComposing:y,mentionsEnabled:this.props.mentionsEnabled,ref:function(C){return this.refsInput=C}.bind(this),onBeforeInput:function(){return this.refsEmojiButton&&this.refsEmojiButton.hideFlyout()}.bind(this),onResize:this.props.onResize,onMessageSend:this.$MessengerComposer13,participants:this.props.participants,sharePreview:this.props.sharePreview,smallerEqual640:A,thread:this.props.thread,threadID:y?c("MessengerConstants").NEW_THREAD_KEY:this.props.threadID,pageID:this.$MessengerComposer4(),viewer:this.props.viewer,onFileUpload:this.handleFileUpload,onChange:this.$MessengerComposer14,showMenu:this.state.showMenu,disableInput:this.state.disableInput}),this.$MessengerComposer15(B)))}.bind(this))};w.prototype.$MessengerComposer12=function(x){__p&&__p();if(!x)return null;var y=this.props.fileUploader;if(!y)return null;var z=y.get("uploadedFiles");if(z.size==0)return null;var A=this.props.thread,B=A&&A.custom_color?A.custom_color:"#0084ff";return c("React").createElement(c("BootloadOnRender.react"),{component:c("React").createElement(c("LazyComponent.react"),{files:z,small:false,threadID:x,threadCustomColor:B,onClick:this.$MessengerComposer16,onResize:this.props.onResize}),loader:c("JSResource")("MercuryStageFilePreviewReactComponent").__setRef("MessengerComposer.react"),placeholder:c("React").createElement(c("XUISpinner.react"),{className:"_2qf"})})};w.prototype.$MessengerComposer16=function(x,y){c("MessengerActions").cancelFileUpload(x,y)};w.prototype.$MessengerComposer15=function(x){return this.state.disableInput===true?null:c("React").createElement("div",{ref:function(y){this.refsButtonsContainer=y}.bind(this),className:"_4rv4"},this.$MessengerComposer17(x),this.$MessengerComposer18())};w.prototype.$MessengerComposer17=function(x){if(this.props.hideActions)return null;if(x&&x<u)return c("React").createElement("div",null,c("React").createElement("ul",{className:"_39bj"},this.$MessengerComposer19(),this.$MessengerComposer20(),this.$MessengerComposer21(),this.$MessengerComposer22()),c("React").createElement("ul",{className:"_39bj"},this.$MessengerComposer23(),this.$MessengerComposer24(),this.$MessengerComposer25(),this.$MessengerComposer26(),this.$MessengerComposer27()));return c("React").createElement("ul",{className:"_39bj"},c("CurrentUser").isWorkUser()&&c("WorkQEWorkChatFileAttachmentIcon").showIcon?this.$MessengerComposer28():null,this.$MessengerComposer19(),this.$MessengerComposer20(),this.$MessengerComposer21(),this.$MessengerComposer22(),this.$MessengerComposer23(),this.$MessengerComposer24(),this.$MessengerComposer25(),this.$MessengerComposer26(),this.$MessengerComposer27())};w.prototype.$MessengerComposer29=function(x){c("messengerDialogsRe").showDialog(function(){return c("React").createElement(q,{error:x.error})})};w.prototype.handleTextDropped=function(x){this.refsInput&&this.refsInput.handleTextDropped(x)};w.prototype.$MessengerComposer24=function(){return c("React").createElement("li",null,this.$MessengerComposer31())};w.prototype.$MessengerComposer31=function(){if(!c("P2PGKValues").P2PVisible||!this.props.threadID||this.$MessengerComposer32()||!this.props.p2pPaymentConfig)return null;var x="_30yy _25pc _39bk";return c("React").createElement(c("BootloadOnRender.react"),{component:c("React").createElement(c("LazyComponent.react"),{className:x,ContextualDialog:c("MessengerContextualDialog.react"),threadID:this.props.threadID,p2pPaymentConfig:this.props.p2pPaymentConfig}),loader:c("JSResource")("P2PSendMoneyContainerBootloader.react").__setRef("MessengerComposer.react"),placeholder:c("React").createElement(c("AutoFocusableLink.react"),{className:x,role:"button"})})};w.prototype.$MessengerComposer27=function(){if(c("ChatConfig").get("messenger_www_quickcam")&&c("ChatConfig").get("messenger_www_html5_quickcam")&&this.props.threadID)return c("React").createElement(c("MercuryBootloadOnInteraction.react"),{component:c("React").createElement(c("LazyComponent.react"),{className:"_4rv5 _39bk"+(this.state.flyoutOpen?" _5jhb":""),location:c("MessengerQuickCamOrigins").MESSENGER,threadID:this.props.threadID,viewer:this.props.viewer}),loader:c("JSResource")("MessengerQuickCamButtonHTML5.react").__setRef("MessengerComposer.react"),placeholder:c("React").createElement(c("AutoFocusableLink.react"),{className:"_4rv5 _39bk",role:"button"})});return null};w.prototype.$MessengerComposer23=function(){if(!v)return null;return c("React").createElement("li",null,c("React").createElement(c("MercuryBootloadOnInteraction.react"),{component:c("React").createElement(c("LazyComponent.react"),{onVoiceClipCreate:this.props.onVoiceClipCreate}),loader:c("JSResource")("MessengerVoiceClipButton.react").__setRef("MessengerComposer.react"),placeholder:c("React").createElement(c("AutoFocusableLink.react"),{className:"_4rv7 _39bk _30yy",role:"button"})}))};w.prototype.$MessengerComposer25=function(){if(this.props.thread&&this.props.thread.is_canonical)return null;if(!this.props.threadFBID)return null;return c("React").createElement("li",null,c("React").createElement(c("MercuryBootloadOnInteraction.react"),{component:c("React").createElement(c("LazyComponent.react"),{customColor:this.props.thread&&this.props.thread.custom_color,threadFBID:this.props.threadFBID}),loader:c("JSResource")("MessengerGroupPollingButton.react").__setRef("MessengerComposer.react"),placeholder:c("React").createElement(c("AutoFocusableLink.react"),{className:"_39bk _30yy _2o-b",role:"button"})}))};w.prototype.$MessengerComposer26=function(){var x=c("gkx")("AT4VU3LTU_m0y3MeJeai7hJytsOcRy63JbTrv7QtkGDcMH9aN_sV8sDNC1ebrhVq0RfT0H4FEgW5UVoJHsOiHpnF")&&c("isWebGLEnabled")();return x&&this.props.threadFBID&&!this.$MessengerComposer32()?c("React").createElement("li",null,c("React").createElement(c("MercuryBootloadOnInteraction.react"),{component:c("React").createElement(c("LazyComponent.react"),{customColor:this.props.thread&&this.props.thread.custom_color,threadFBID:this.props.threadFBID}),loader:c("JSResource")("MessengerGamesButton.react").__setRef("MessengerComposer.react"),placeholder:c("React").createElement(c("AutoFocusableLink.react"),{className:"_39bk _30yy _4ce_",role:"button"})})):null};w.prototype.$MessengerComposer33=function(x){return c("React").createElement("li",{className:"_39bk"},c("React").createElement(c("ChatPhotoUploader.react"),{allowCrossPage:true,disabled:!(this.props.threadID||this.$MessengerComposer34()),ref:function(y){return this.refsUploader=y}.bind(this),imageClassName:(x=="files"?"_5vn8":"")+(x=="attachment"?" _46si":""),imagesOnly:false,inputClassname:"_260t",linkClassName:"_30yy _260u",focusInput:this.focusInput,onAllUploadsComplete:this.props.onPhotoUploadComplete,onLastUploadFail:this.props.onPhotoUploadFail,onLastUploadCancel:this.props.onPhotoUploadCancel,onSubmit:this.props.onPhotoUploadSubmit,onUploadError:this.$MessengerComposer29,threadID:this.props.threadID}))};w.prototype.$MessengerComposer19=function(){return this.$MessengerComposer33("files")};w.prototype.$MessengerComposer28=function(){return this.$MessengerComposer33("attachment")};w.prototype.$MessengerComposer35=function(){return this.state.currentValue.length>0||this.$MessengerComposer36()||this.$MessengerComposer37()};w.prototype.$MessengerComposer36=function(){var x=this.props.fileUploader;return Boolean(x&&x.get("uploadedFiles").size>0)};w.prototype.$MessengerComposer37=function(){var x=this.props.sharePreview;return!!(x&&x.params&&x.type)};w.prototype.$MessengerComposer38=function(){var x=this.props.fileUploader;return Boolean(x&&x.get("uploadingFiles").size>0)};w.prototype.$MessengerComposer18=function(){var x=!(this.props.threadID||this.$MessengerComposer34());if(!x&&this.$MessengerComposer35()&&!this.$MessengerComposer38())return c("React").createElement(r,{className:(this.props.threadID?"_30yy":"")+" _38lh _39bl",customColor:this.props.thread&&this.props.thread.custom_color,onClick:this.$MessengerComposer39});return c("React").createElement(c("MessengerHotLikeButton.react"),{className:"_4rv9"+(this.props.threadID?" _30yy":"")+" _39bl",disabled:x,customColor:this.props.thread&&this.props.thread.custom_color,customLike:c("MessengerHotLikeUtils").getCustomEmojiFromThread(this.props.thread)||undefined,sendSticker:this.props.onStickerSelect,sendCustomLike:this.props.onCustomLikeSelect,threadID:this.props.threadID,renderSize:24})};w.prototype.$MessengerComposer20=function(){var x=(this.props.threadID?"_30yy":"")+" _4rv6 _39bk";return c("React").createElement("li",null,c("React").createElement(c("MercuryBootloadOnInteraction.react"),{component:c("React").createElement(c("LazyComponent.react"),{className:x,ContextualDialogClass:c("MessengerContextualDialog.react"),disabled:!(this.props.threadID||this.$MessengerComposer34()),getInput:function(){return this.refsInput}.bind(this),flyoutAlignment:"right",flyoutClassName:"_293j",flyoutWidth:285,onStickerSelect:this.props.onStickerSelect,onEmoticonSelect:this.$MessengerComposer30,threadID:this.props.threadID}),loader:c("JSResource")("ChatStickerButton.react").__setRef("MessengerComposer.react"),placeholder:c("React").createElement(c("AutoFocusableLink.react"),{className:x,role:"button"})}))};w.prototype.$MessengerComposer9=function(){__p&&__p();var x,y=(x=this.props)!=null?(x=x.thread)!=null?x.other_user_fbid:x:x,z=y?c("MercuryParticipants").getNow(c("MercuryIDs").getParticipantIDFromUserID(y)):null,A=z&&z.name||"page";if(this.state.nullStateCTA!==null)switch(this.state.nullStateCTA.action_type){case c("MNCommerceCallToActionType").OPEN_NATIVE:return null;case c("MNCommerceCallToActionType").POSTBACK:if(!c("MNCommercePostbackRefSendManager").hasMDotMeRef(this.$MessengerComposer4())&&!this.state.nullStateCTA.instantgame_metadata)return c("React").createElement("div",{className:"_3zc8"},j._("Lorsque vous appuierez sur {cta title}, {name} verra vos informations publiques.",[j.param("cta title",this.state.nullStateCTA.title),j.param("name",A)]));else if(c("MNCommercePostbackRefSendManager").hasMDotMeRef(this.$MessengerComposer4())){var B=this.$MessengerComposer4(),C=z&&z.vanity?"m.me/"+z.vanity:B?"m.me/"+B:"m.me";return c("React").createElement("div",{className:"_3zc8"},j._("When you tap {cta title}, {name} will see your public info and that you opened their {link} link.",[j.param("cta title",this.state.nullStateCTA.title),j.param("name",A),j.param("link",C)]))}break;default:return null}return null};w.prototype.$MessengerComposer21=function(){var x=(this.props.threadID?"_30yy":"")+" _yht _39bk";return c("React").createElement("li",null,c("React").createElement("div",{style:{display:"none"}},c("React").createElement(c("ChatPhotoUploader.react"),{allowCrossPage:true,disabled:false,ref:function(y){return this.refsGifUploader=y}.bind(this),imagesOnly:false,focusInput:this.focusInput,onAllUploadsComplete:this.props.onPhotoUploadComplete,onLastUploadFail:this.props.onPhotoUploadFail,onLastUploadCancel:this.props.onPhotoUploadCancel,onSubmit:this.props.onPhotoUploadSubmit,onUploadError:this.$MessengerComposer29})),c("React").createElement(c("MercuryBootloadOnInteraction.react"),{component:c("React").createElement(c("LazyComponent.react"),{className:x,ContextualDialogClass:c("MessengerContextualDialog.react"),getInput:function(){return this.refsInput}.bind(this),getQuery:function(){return this.refsInput?this.refsInput.getValue():""}.bind(this),location:c("MercuryShareAttachmentRenderLocations").MESSENGER,onSelect:this.$MessengerComposer40}),loader:c("JSResource")("ChatContentSearchButton.react").__setRef("MessengerComposer.react"),placeholder:c("React").createElement(c("AutoFocusableLink.react"),{className:x,role:"button"})}))};w.prototype.$MessengerComposer22=function(){var x=(this.props.threadID?"_30yy":"")+" _5s2p _39bk";return c("React").createElement("li",null,c("React").createElement(c("MercuryBootloadOnInteraction.react"),{component:c("React").createElement(c("LazyComponent.react"),{className:x,ContextualDialogClass:c("MessengerContextualDialog.react"),flyoutAlignment:"right",getInput:function(){return this.refsInput}.bind(this),onSelect:this.$MessengerComposer41,onMount:function(y){return this.refsEmojiButton=y}.bind(this),sendCustomEmoji:this.props.onCustomLikeSelect,threadID:this.props.threadID}),loader:c("JSResource")("ChatEmojiButton.react").__setRef("MessengerComposer.react"),placeholder:c("React").createElement(c("AutoFocusableLink.react"),{className:x,role:"button"})}))};w.prototype.$MessengerComposer8=function(){__p&&__p();var x=this.props.thread,y=!!x&&c("MessageRequestUtils").isFiltered(x),z=c("CurrentUser").getID(),A=c("MercuryIDs").getThreadKeyfromThreadIDUserID(this.props.threadID,z);return c("React").createElement(c("BootloadedComponent.react"),{bootloadPlaceholder:c("React").createElement("div",{style:{height:51}}),bootloadLoader:c("JSResource")("MessengerPendingActions.react").__setRef("MessengerComposer.react"),folder:this.props.thread&&this.props.thread.folder,onAcceptClick:function(){this.$MessengerComposer42().changeFolder(this.props.threadID,c("MessagingTag").INBOX);var B=c("MessengerStateStore").getState().threadIDs;if(B){var C=B.filter(function(D){return this.props.threadID!==D}.bind(this));c("MessengerActions").selectAggregation(C)}this.setState({pendingActionsBypassed:true},function(){return new(c("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_accept_request").setThreadID(c("MercuryIDs").getThreadFBIDFromThreadID(this.props.threadID)).setSurface("thread").setFolderType(y?"other":"pending").setThreadKey(A).setEntryPoint(null).log()}.bind(this))}.bind(this),onDeclineClick:function(){var B=c("MercuryIDs").isGroupChat(this.props.threadID);c("Bootloader").loadModules(["messengerDeclineDialogReact"],function(C){var D=C.jsComponent;c("messengerDialogsRe").showDialog(function(){return c("React").createElement(D,{onBlock:this.$MessengerComposer43,onDelete:this.$MessengerComposer44,onToggle:this.$MessengerComposer45,isGroupChat:B})}.bind(this));new(c("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_decline_attempt").setThreadID(c("MercuryIDs").getThreadFBIDFromThreadID(this.props.threadID)).setSurface("thread").setFolderType("pending").setThreadKey(A).setEntryPoint("inbox_banner").log()}.bind(this),"MessengerComposer.react")}.bind(this),onDeleteClick:function(){c("Bootloader").loadModules(["messengerFilteredDeleteDialogReact"],function(B){var C=B.jsComponent;c("messengerDialogsRe").showDialog(function(){return c("React").createElement(C,{onDelete:this.$MessengerComposer44,onToggle:this.$MessengerComposer45})}.bind(this))}.bind(this),"MessengerComposer.react");new(c("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_decline_attempt").setThreadID(c("MercuryIDs").getThreadFBIDFromThreadID(this.props.threadID)).setSurface("thread").setFolderType("other").setThreadKey(A).setEntryPoint("inbox_banner").log()}.bind(this)})};w.prototype.$MessengerComposer7=function(){__p&&__p();if(!this.props.thread||this.props.view===c("MessengerView").DETAIL.COMPOSE)return null;var x=this.props.thread,y=this.props.participants,z=false,A=false;if(x.cannot_reply_reason==="blocked"){z=true;x.is_canonical===true||k(0);y!=null||k(0);var B=x.other_user_fbid;B!=null||k(0);var C=y.get(c("MercuryIDs").getParticipantIDFromUserID(B));C!=null||k(0);if(C.is_messenger_blocked)A=true}if(z)if(A)return c("React").createElement("div",{className:"_4rv3"},c("React").createElement("div",{className:"_2wy4"},j._("Vous avez bloqu\u00e9 les messages de cette personne. {unblock_now_button}",[j.param("unblock_now_button",c("React").createElement(p,{label:j._("D\u00e9bloquer"),onClick:this.$MessengerComposer46,type:"secondary"}))])));else return c("React").createElement("div",{className:"_4rv3"},c("React").createElement("div",{className:"_2wy4"},j._("Cette personne n\u2019est pas disponible pour le moment.")));return c("React").createElement("div",{className:"_4rv3"},c("React").createElement("div",{className:"_2wy4"},c("MercuryReadOnlyReason").getReason(x.has_email_participant)))};w.prototype.$MessengerComposer47=function(){return c("MercuryThreadActions").getForFBID(this.props.viewer)};w.prototype.$MessengerComposer49=function(){var x,y=(x=this.props)!=null?(x=x.thread)!=null?x.thread_id:x:x;if(y){var z=c("MessengerStateStore").getState().activeThreadID===y;this.$MessengerComposer47().changeFolder(y,"other");z&&c("MessengerActions").selectThread(null)}};w.prototype.$MessengerComposer51=function(){c("messengerDialogsRe").removeDialog()};w.prototype.$MessengerComposer50=function(x){var y=this.props.threadID,z=y===c("MessengerStateStore").getState().activeThreadID;this.$MessengerComposer47().blockIgnoreOnMessengerDotCom(z,y,function(){this.$MessengerComposer52(x)}.bind(this))};w.prototype.$MessengerComposer52=function(x){var y=this.props,z=y.threadID,A=y.thread;c("messengerDialogsRe").showDialog(function(){return c("React").createElement(o,{participantName:x})});var B=c("CurrentUser").getID(),C=c("MercuryIDs").getThreadKeyfromThreadIDUserID(z,B),D=!!A&&c("MessageRequestUtils").isFiltered(A);new(c("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_block_request").setThreadID(c("MercuryIDs").getThreadFBIDFromThreadID(z)).setSurface("thread").setFolderType(D?c("MessagingTag").OTHER:c("MessagingTag").PENDING).setThreadKey(C).setEntryPoint(null).log()};w.prototype.exitCurrentMode=function(){this.refsInput&&this.refsInput.exitCurrentMode()};w.prototype.$MessengerComposer11=function(){return this.props.view===c("MessengerView").DETAIL.COMPOSE};w.prototype.$MessengerComposer34=function(){return!!(this.$MessengerComposer11()&&this.props.recipients&&this.props.recipients.size)};w.prototype.$MessengerComposer32=function(){return!!this.$MessengerComposer4()};w.prototype.$MessengerComposer4=function(){return c("getPageIDFromThreadID")(this.props.threadID)};w.prototype.$MessengerComposer5=function(){var x=this.$MessengerComposer4();if(x)c("MessengerBotMenuDataFetcher").getHasPageSetting(x,function(y){this.setState({showMenu:y})}.bind(this),function(){this.setState({showMenu:false})}.bind(this),c("MNCommercePageSetting").STRUCTURED_MENU_ENABLED);else this.setState({showMenu:false})};w.prototype.$MessengerComposer6=function(){var x=this.$MessengerComposer4();if(x)c("MessengerBotMenuDataFetcher").getHasPageSetting(x,function(y){this.setState({disableInput:y})}.bind(this),function(){this.setState({disableInput:false})}.bind(this),c("MNCommercePageSetting").COMPOSER_INPUT_DISABLED);else this.setState({disableInput:false})};w.prototype.$MessengerComposer3=function(x,y){var z=x===0,A=!!y;if(A&&z){var B=c("XMNCommercePageNullStateCTAController").getURIBuilder();new(c("AsyncRequest"))().setURI(B.getURI()).setMethod("POST").setData({page_id:y}).setHandler(function(C){if(C&&C.payload)this.setState({showNullState:true,nullStateCTA:C.payload});else this.setState({showNullState:false,disableNullState:false})}.bind(this)).send()}else this.setState({showNullState:false,disableNullState:false})};w.prototype.$MessengerComposer2=function(){return{pendingActionsBypassed:false,currentValue:"",nullStateCTA:null,showMenu:false,disableInput:false,showNullState:false,disableNullState:false}};w.prototype.$MessengerComposer42=function(){return c("MercuryThreadActions").getForFBID(this.props.viewer)};w.prototype.testUtils_renderRawP2PSendMoneyButton=function(){return this.$MessengerComposer31()};w.prototype.replyToMention=function(x){this.refsInput&&this.refsInput.addMention&&this.refsInput.addMention(x)};w.propTypes={canReply:s.bool,disableAutofocus:s.bool,fileUploader:s.object,hideActions:s.bool,mentionsEnabled:s.bool,onCustomLikeSelect:s.func,onMessageSend:s.func,onPhotoUploadComplete:s.func,onPhotoUploadCancel:s.func,onPhotoUploadFail:s.func,onPhotoUploadSubmit:s.func,onResize:s.func,onStickerSelect:s.func.isRequired,onVoiceClipCreate:s.func,p2pPaymentConfig:s.object,participants:s.instanceOf(c("immutable").Map),recipients:s.instanceOf(c("immutable").List),sharePreview:s.object,threadID:s.string,threadFBID:s.string,thread:s.object,view:s.string,viewer:s.string};f.exports=w}),null);
__d("MessengerEmojiUsageUtils",["MessengerSupportedEmojiUtils","Utf16"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=65039,i={findAllEmojis:function j(k){__p&&__p();var l=[],m=c("MessengerSupportedEmojiUtils").parse(k);m.forEach(function(n){var o=[];n.emoji.forEach(function(p){var q=c("Utf16").decode(p);if(q)o.push(q)});o[o.length-1]===h&&o.pop();l.push(o)});return l}};f.exports=i}),null);
__d("messengerSimpleDialogReact",["fbt","ReasonReact","messengerDialogsRe","messengerDialogReact","messengerDialogBodyReact"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("ReasonReact").statelessComponent("MessengerSimpleDialogReact");function j(m){if(m)return 0;else return c("messengerDialogsRe").removeDialog(0)}function k(m,n,o){var p=i.slice();p[9]=function(){return c("ReasonReact").element(0,0,c("messengerDialogReact").Dialog[0](0,j,0,0,0,0,0,[c("ReasonReact").element(0,0,c("messengerDialogReact").Header[0](0,0,m)),c("ReasonReact").element(0,0,c("messengerDialogBodyReact").make(0,[n])),c("ReasonReact").element(0,0,c("messengerDialogReact").Footer[0](0,0,[c("ReasonReact").element(0,0,c("messengerDialogReact").Button[0]([0],[h._("OK")],0,0,0,[0],0,0,[]))]))]))};return p}var l=c("ReasonReact").wrapReasonForJs(i,function(m){return k(m.title,m.body,[])});g.component=i;g.handleToggle=j;g.make=k;g.jsComponent=l}),null);
__d("MessengerComposerContainer.react",["fbt","Arbiter","AsyncUploadRequest","EmojiLikeUtils","EmojiState","EmojiDispatcher","immutable","MercuryAttachment","MercuryAttachmentType","MercuryConfig","MercuryThreadIDMap","MercuryThreadInformer","MercuryIDs","MercuryLocalIDs","MercuryMessageActions","MercuryMessageObject","MercuryParticipants","MercurySendMessageHandler","MercuryThreads","MercuryThreadActions","MercuryTriodeSourceUtil","MessageRequestUtils","MessengerActions","MessengerComposer.react","MessengerComposerActions","messengerDialogsRe","MessengerEmojiUsageUtils","messengerSimpleDialogReact","MessengerView","MNPlatformTagsDataManager","P2PPaymentConfig","PhotosUploadID","React","ReactDOM","SearchableEntry","SubscriptionsHandler","nullthrows","setImmediate","EmojiStateStore"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("messengerSimpleDialogReact").jsComponent,l=c("React").PropTypes;i=babelHelpers.inherits(m,c("React").PureComponent);j=i&&i.prototype;function m(){__p&&__p();var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=j.constructor).call.apply(o,[this].concat(r)),this.$MessengerComposerContainer7=function(t,u,v){__p&&__p();c("EmojiState").updateRecentlyUsed(c("MessengerEmojiUsageUtils").findAllEmojis(t));if(!this.props.canReply){v&&v(null);return false}var w=null,x=false;if(!this.$MessengerComposerContainer14(t,u))x=this.$MessengerComposerContainer15(function(y){__p&&__p();var z=this.$MessengerComposerContainer2.constructUserGeneratedMessageObject(t,c("MercuryTriodeSourceUtil").getMercuryTriodeSource(),y),A=c("MercuryIDs").getUserIDFromThreadID(y);if(c("MNPlatformTagsDataManager").hasThreadTags(A)){var B=c("MNPlatformTagsDataManager").getThreadTags();z.tags=B}if(u){if(u.shareable_attachment)z.shareable_attachment=u.shareable_attachment;if(u.profile_ranges)z.profile_ranges=z.profile_xmd=u.profile_ranges}w=z;return z}.bind(this));v&&v(x?w:null);w=null;return x}.bind(this),this.$MessengerComposerContainer9=function(t,u){this.$MessengerComposerContainer3.cancelAttachmentPlaceholder(u.upload_id,u)}.bind(this),this.$MessengerComposerContainer8=function(t,u){this.$MessengerComposerContainer3.confirmAttachmentPlaceholder(u.upload_id,u)}.bind(this),this.$MessengerComposerContainer10=function(t,u){this.$MessengerComposerContainer3.cancelAttachmentPlaceholder(u.upload_id,u);var v=h._("Impossible de t\u00e9l\u00e9charger la photo"),w=h._("Veuillez r\u00e9essayer. Assurez-vous de t\u00e9l\u00e9charger une photo valide.");if(u.errorDialogParams){v=u.errorDialogParams.title||v;w=u.errorDialogParams.body||w}this.$MessengerComposerContainer16(v,w)}.bind(this),this.$MessengerComposerContainer11=function(t,u){this.$MessengerComposerContainer15(function(v){return this.$MessengerComposerContainer2.constructAttachmentMessageObject(c("MercuryTriodeSourceUtil").getMercuryTriodeSource(),v)}.bind(this),function(v){this.$MessengerComposerContainer3.addAttachmentPlaceholder(v,u.upload_id,u);this.handleMessageSentToPendingThread()}.bind(this))}.bind(this),this.handleAudioUpload=function(t){var u="upload_"+c("PhotosUploadID").getNewID();this.$MessengerComposerContainer1.sendAttachment(this.props.threadID,n(u),c("MercuryTriodeSourceUtil").getMercuryTriodeSource());var v={};v[u]=t;var w=new(c("AsyncUploadRequest"))(c("MercuryConfig").upload_url).setAllowCrossOrigin(true).setRelativeTo(c("ReactDOM").findDOMNode(this)).setData({voice_clip:true}).setFiles(v);this.$MessengerComposerContainer4.addSubscriptions(w.subscribe("success",function(x,y){return this.$MessengerComposerContainer17(y)}.bind(this)));w.send()}.bind(this),this.$MessengerComposerContainer12=function(t){return this.$MessengerComposerContainer15(function(u){return this.$MessengerComposerContainer2.constructStickerMessageObject(t,c("MercuryTriodeSourceUtil").getMercuryTriodeSource(),u)}.bind(this))}.bind(this),this.$MessengerComposerContainer13=function(t,u,v){var w=this.props.threadID,x=this.$MessengerComposerContainer2.constructUserGeneratedMessageObject(t.emoji,c("MercuryTriodeSourceUtil").getMercuryTriodeSource(),w);x.has_attachment=false;return this.$MessengerComposerContainer15(function(w){c("EmojiLikeUtils").setEmojiSize(x,u);return c("EmojiLikeUtils").setEmojiSource(x,v)})}.bind(this),this.handleMessageSentToPendingThread=function(){if(this.props.thread&&c("MessageRequestUtils").isMessageRequest(this.props.thread))c("MercuryThreadActions").getForFBID(this.props.viewer).movePendingToInbox(this.props.threadID)}.bind(this),p}m.prototype.componentDidMount=function(){this.$MessengerComposerContainer1=c("MercurySendMessageHandler").getForFBID(this.props.viewer);this.$MessengerComposerContainer3=c("MercuryMessageActions").getForFBID(this.props.viewer);this.$MessengerComposerContainer5=c("MercuryThreads").getForFBID(this.props.viewer);this.$MessengerComposerContainer2=c("MercuryMessageObject").getForFBID(this.props.viewer);this.$MessengerComposerContainer6=c("MercuryThreadInformer").getForFBID(this.props.viewer);this.$MessengerComposerContainer4=new(c("SubscriptionsHandler"))();c("EmojiDispatcher").explicitlyRegisterStores([c("EmojiStateStore")]);this.props.onMount&&this.props.onMount(this)};m.prototype.componentWillUnmount=function(){this.$MessengerComposerContainer4.release()};m.prototype.focusInput=function(){this.refsComposer&&this.refsComposer.focusInput&&this.refsComposer.focusInput()};m.prototype.render=function(){return c("React").createElement(c("MessengerComposer.react"),{canReply:this.props.canReply,fileUploader:this.props.fileUploader,mentionsEnabled:true,onMessageSend:this.$MessengerComposerContainer7,onPhotoUploadComplete:this.$MessengerComposerContainer8,onPhotoUploadCancel:this.$MessengerComposerContainer9,onPhotoUploadFail:this.$MessengerComposerContainer10,onPhotoUploadSubmit:this.$MessengerComposerContainer11,onResize:this.props.onResize,onStickerSelect:this.$MessengerComposerContainer12,onCustomLikeSelect:this.$MessengerComposerContainer13,onVoiceClipCreate:this.handleAudioUpload,p2pPaymentConfig:c("P2PPaymentConfig").config,participants:this.props.participants,recipients:this.props.recipients,ref:function(o){return this.refsComposer=o}.bind(this),sharePreview:this.props.sharePreview,threadID:this.props.threadID,threadFBID:this.props.threadFBID,thread:this.props.thread,view:this.props.view,viewer:this.props.viewer})};m.prototype.$MessengerComposerContainer14=function(o,p){if(o)return false;return!(p&&(p.shareable_attachment||p.profile_ranges.length>0))};m.prototype.$MessengerComposerContainer17=function(o){var p=o.getName(),q=o.getResponse().payload.metadata[0].audio_id;this.$MessengerComposerContainer3.confirmAttachmentPlaceholder(p,{upload_id:p,audio_ids:[q]})};m.prototype.handleFileUpload=function(o){__p&&__p();var p=o.reduce(function(p,q){var r=q.type.split("/")[0];if(p[r])p[r].push(q);else p.other.push(q);return p},{audio:[],image:[],other:[]});p.audio.forEach(function(q){return this.handleAudioUpload(q)}.bind(this));if(this.refsComposer)this.refsComposer.handleFileUpload(p.image.concat(p.other))};m.prototype.handleTextDropped=function(o){if(this.refsComposer)this.refsComposer.handleTextDropped(o)};m.prototype.$MessengerComposerContainer15=function(o,p){__p&&__p();var q=this.props.threadID,r=this.props.recipients,s=false;if(!q&&r&&r.size>1){q=c("MercuryLocalIDs").generateThreadID();s=true}if(!q)return false;var t=o(q);if(s){var u=r.map(function(v){return c("MercuryIDs").getParticipantIDFromUserID(v.getUniqueID())}).toArray();this.$MessengerComposerContainer5.createNewLocalThread(q,u);t.offline_threading_id=c("MercuryIDs").tokenize(q).value;t.specific_to_list=u}if(p)p(t);else this.$MessengerComposerContainer3.send(t,this.handleMessageSentToPendingThread);if(this.props.view===c("MessengerView").DETAIL.COMPOSE){if(c("MercuryAttachment").get(t).length>0)c("MessengerComposerActions").moveDraftToNextThread(q);c("MessengerComposerActions").exitComposeState();if(c("MercuryIDs").isLocalThread(q))this.$MessengerComposerContainer6.subscribeOnce("messages-updated",function(v,w){var x=c("MercuryThreadIDMap").get();if(x.canLinkExternally(q))c("MessengerActions").selectThread(q)});else c("MessengerActions").selectThread(q)}this.focusInput();return true};m.prototype.resetDrag=function(){if(this.refsComposer)this.refsComposer.exitCurrentMode()};m.prototype.$MessengerComposerContainer16=function(o,p){c("messengerDialogsRe").showDialog(function(){return c("React").createElement(k,{title:o,body:p})})};m.propTypes={canReply:l.bool,fileUploader:l.object,onMount:l.func,onResize:l.func,participants:l.instanceOf(c("immutable").Map),recipients:l.instanceOf(c("immutable").List),sharePreview:l.object,threadID:l.string,threadFBID:l.string,thread:l.object,view:l.string,viewer:l.string};function n(o){return{upload_id:o,preview_attachments:[{upload_id:o,attach_type:c("MercuryAttachmentType").PHOTO,preview_uploading:true}]}}f.exports=m}),null);
__d("MessengerLeaveGroupAction",["MercuryIDs","MercuryLogMessageType","MercuryMessageActions","MercuryMessageObject","MercuryThreadInfo","MercuryTriodeSourceUtil"],(function a(b,c,d,e,f,g){var h={leaveGroup:function i(j,k){if(c("MercuryThreadInfo").isEmptyLocalThread(j))return;var l=c("MercuryMessageObject").getForFBID(k),m=l.constructLogMessageObject(c("MercuryTriodeSourceUtil").getMercuryTriodeSource(),j.thread_id,c("MercuryLogMessageType").UNSUBSCRIBE,{removed_participants:[c("MercuryIDs").getParticipantIDFromUserID(k)]}),n=c("MercuryMessageActions").getForFBID(k);n.send(m)}};f.exports=h}),null);
__d("messengerBlockedGroupThreadWarningDialogReact",["fbt","bs_curry","ReasonReact","CacheStorage","messengerDialogsRe","messengerDialogReact","messengerDialogBodyReact"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=h._("Des personnes que vous avez bloqu\u00e9es participent \u00e0 cette conversation. Si vous voyez cette conversation, vous recevrez leurs messages et elles recevront les v\u00f4tres."),j=h._("Voir la conversation\u00a0?"),k=h._("Annuler"),l=h._("Quitter le groupe"),m=h._("Voir la conversation"),n=new(c("CacheStorage"))("localstorage");function o(v){return"see_blocked_group:"+v}function p(v,w){n.set("see_blocked_group:"+v,w,true);return 0}function q(v){return n.get("see_blocked_group:"+v,false)}var r=c("ReasonReact").statelessComponent("MessengerBlockedGroupThreadWarningDialogReact");function s(v){if(v)return 0;else return c("messengerDialogsRe").removeDialog(0)}function t(v,w,x,y,z){__p&&__p();var A=function A(E){E.stopPropagation();c("bs_curry")._1(v,0);return c("messengerDialogsRe").removeDialog(0)},B=function B(E){E.stopPropagation();c("bs_curry")._1(w,y);return c("messengerDialogsRe").removeDialog(0)},C=function C(E){E.stopPropagation();c("bs_curry")._1(x,y);return c("messengerDialogsRe").removeDialog(0)},D=r.slice();D[9]=function(){return c("ReasonReact").element(0,0,c("messengerDialogReact").Dialog[0](0,s,0,0,0,0,0,[c("ReasonReact").element(0,0,c("messengerDialogReact").Header[0](0,0,c("ReasonReact").element(0,0,c("messengerDialogReact").Title[0](0,j)))),c("ReasonReact").element(0,0,c("messengerDialogBodyReact").make(0,[i])),c("ReasonReact").element(0,0,c("messengerDialogReact").Footer[0](0,0,[c("ReasonReact").element(0,0,c("messengerDialogReact").Button[0]([1],[k],0,0,[C],[1],0,0,[])),c("ReasonReact").element(0,0,c("messengerDialogReact").Button[0]([1],[l],0,0,[B],[1],0,0,[])),c("ReasonReact").element(0,0,c("messengerDialogReact").Button[0]([1],[m],0,["danger"],[A],[0],0,0,[]))]))]))};return D}var u=c("ReasonReact").wrapReasonForJs(r,function(v){return t(v.onSee,v.onLeave,v.onCancel,v.prevThreadID,[])});g.bodyText=i;g.titleText=j;g.cancelText=k;g.leaveText=l;g.seeConvoText=m;g.storage=n;g.getSeeConversationCacheKey=o;g.setWantsToSee=p;g.getWantsToSee=q;g.component=r;g.handleToggle=s;g.make=t;g.jsComponent=u}),null);
__d("messengerIgnoredGroupThreadWarningDialogReact",["cx","fbt","bs_curry","React","ReasonReact","CacheStorage","messengerDialogsRe","messengerDialogReact","messengerDialogBodyReact","IgnoreMessagesTypedLogger"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=i._("People you've ignored are in this group."),k=i._("If you ignore this group, you can find it in Filtered Messages."),l=i._("Ignore group?"),m=i._("Annuler"),n=i._("Ignore Group"),o=i._("See Group"),p=new(c("CacheStorage"))("localstorage");function q(x){return"see_ignored_group:"+x}function r(x,y){p.set("see_ignored_group:"+x,y,true);return 0}function s(x){return p.get("see_ignored_group:"+x,false)}var t=c("ReasonReact").statelessComponent("MessengerIgnoredGroupThreadWarningDialogReact");function u(x){if(x)return 0;else return c("messengerDialogsRe").removeDialog(0)}function v(x,y,z,A,B,C){__p&&__p();var D=function D(H){H.stopPropagation();c("bs_curry")._1(x,0);return c("messengerDialogsRe").removeDialog(0)},E=function E(H){H.stopPropagation();c("bs_curry")._1(y,A);return c("messengerDialogsRe").removeDialog(0)},F=function F(H){H.stopPropagation();c("bs_curry")._1(z,A);return c("messengerDialogsRe").removeDialog(0)},G=t.slice();G[9]=function(){var H=new(c("IgnoreMessagesTypedLogger"))().setEvent("group_with_ignored_person_warning").setThreadID(B).setPlatform("messengerdotcom");H.log();return c("ReasonReact").element(0,0,c("messengerDialogReact").Dialog[0](0,u,0,0,0,0,0,[c("ReasonReact").element(0,0,c("messengerDialogReact").Header[0](0,0,c("ReasonReact").element(0,0,c("messengerDialogReact").Title[0](0,[l])))),c("ReasonReact").element(0,0,c("messengerDialogBodyReact").make(0,[c("React").createElement("div",undefined,j),c("React").createElement("div",{className:"_3-8x"},k)])),c("ReasonReact").element(0,0,c("messengerDialogReact").Footer[0](0,0,[c("ReasonReact").element(0,0,c("messengerDialogReact").Button[0]([1],[m],0,0,[F],[1],0,0,[])),c("ReasonReact").element(0,0,c("messengerDialogReact").Button[0]([1],[o],0,0,[D],[1],0,0,[])),c("ReasonReact").element(0,0,c("messengerDialogReact").Button[0]([1],[n],0,["danger"],[E],[0],0,0,[]))]))]))};return G}var w=c("ReasonReact").wrapReasonForJs(t,function(x){return v(x.onSee,x.onIgnore,x.onCancel,x.prevThreadID,x.threadID,[])});g.bodyTextPeopleInGroup=j;g.bodyTextEffects=k;g.titleText=l;g.cancelText=m;g.ignoreText=n;g.seeConvoText=o;g.storage=p;g.getSeeConversationCacheKey=q;g.setWantsToSee=r;g.getWantsToSee=s;g.component=t;g.handleToggle=u;g.make=v;g.jsComponent=w}),null);
__d("messengerServerErrorDialogReact",["fbt","bs_curry","ReasonReact","messengerDialogsRe","messengerDialogReact","messengerDialogBodyReact"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("ReasonReact").statelessComponent("MessengerServerErrorDialog");function j(o){if(o)return 0;else return c("messengerDialogsRe").removeDialog(0)}var k=h._("Un probl\u00e8me inattendu s\u2019est produit. Veuillez r\u00e9essayer plus tard."),l=h._("Panne temporaire");function m(o,p){var q=i.slice();q[4]=function(){c("bs_curry")._1(o,0);return 0};q[9]=function(){return c("ReasonReact").element(0,0,c("messengerDialogReact").Dialog[0](0,j,0,0,0,0,0,[c("ReasonReact").element(0,0,c("messengerDialogReact").Header[0](0,0,l)),c("ReasonReact").element(0,0,c("messengerDialogBodyReact").make(0,[k])),c("ReasonReact").element(0,0,c("messengerDialogReact").Footer[0](0,0,[c("ReasonReact").element(0,0,c("messengerDialogReact").Button[0]([0],[h._("OK")],0,0,0,[0],0,0,[]))]))]))};return q}var n=c("ReasonReact").wrapReasonForJs(i,function(o){return m(o.onMount,[])});g.component=i;g.handleToggle=j;g.message=k;g.title=l;g.make=m;g.jsComponent=n}),null);
__d("MessengerConversationContainer.react",["Bootloader","immutable","ImmutableObject","mercuryBlockedParticipantsRe","mercuryIgnoredParticipantsRe","MercuryIDs","MercuryLogMessageType","MercuryMessageStore","MercuryThreadActions","MessagingTagConstants","MessengerActions","messengerBlockedGroupThreadWarningDialogReact","MessengerConfig","MessengerConversation.react","messengerDialogsRe","MessengerHotLikePreviewEvents","messengerIgnoredGroupThreadWarningDialogReact","MessengerLeaveGroupAction","React","SubscriptionsHandler","messengerServerErrorDialogReact","gkx"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("mercuryBlockedParticipantsRe").get(),k=c("mercuryIgnoredParticipantsRe").get(),l=c("MercuryThreadActions").get(),m=c("messengerServerErrorDialogReact").jsComponent,n=c("React").PropTypes,o=c("messengerBlockedGroupThreadWarningDialogReact").jsComponent,p=c("messengerIgnoredGroupThreadWarningDialogReact").jsComponent;h=babelHelpers.inherits(q,c("React").PureComponent);i=h&&h.prototype;function q(){__p&&__p();var r,s;for(var t=arguments.length,u=Array(t),v=0;v<t;v++)u[v]=arguments[v];return s=(r=i.constructor).call.apply(r,[this].concat(u)),this.state={isLoaded:false,isLoading:true,messages:c("immutable").List()},this.$MessengerConversationContainer2=undefined,this.$MessengerConversationContainer3=false,this.$MessengerConversationContainer4=undefined,this.$MessengerConversationContainer5=undefined,this.$MessengerConversationContainer6=undefined,this.$MessengerConversationContainer7=false,this.$MessengerConversationContainer15=function(){var w=this.props.thread;if(w==null)return;c("messengerBlockedGroupThreadWarningDialogReact").setWantsToSee(w.thread_id,true)}.bind(this),this.$MessengerConversationContainer18=function(){var w=this.props.thread;if(w==null)return;c("messengerIgnoredGroupThreadWarningDialogReact").setWantsToSee(w.thread_id,true)}.bind(this),this.$MessengerConversationContainer16=function(w){var x=this.props.thread;if(x==null)return;c("MessengerLeaveGroupAction").leaveGroup(x,this.props.viewer);this.$MessengerConversationContainer20(w)}.bind(this),this.$MessengerConversationContainer19=function(w){var x=this.props.thread;if(x==null)return;var y=x.thread_id;l.changeFolder(y,c("MessagingTagConstants").other);c("Bootloader").loadModules(["IgnoreMessagesTypedLogger","IgnoreMessagesLoggingEvent","IgnoreMessagesPlatforms"],function(z,A,B){new z().setEvent(A.IGNORE_CONFIRMED).setThreadID(c("MercuryIDs").getThreadFBIDFromThreadID(y)).setPlatform(B.MESSENGERDOTCOM).log()},"MessengerConversationContainer.react");this.$MessengerConversationContainer20(w)}.bind(this),this.$MessengerConversationContainer17=function(w){this.$MessengerConversationContainer20(w)}.bind(this),this.$MessengerConversationContainer13=function(){if(this.state.isLoading||this.state.isLoaded)return;this.setState({isLoading:true});if(!this.$MessengerConversationContainer1.fetchMoreMessages())this.setState({isLoading:false,isLoaded:true})}.bind(this),s}q.prototype.componentWillUnmount=function(){this.$MessengerConversationContainer2&&this.$MessengerConversationContainer2.release();clearTimeout(this.$MessengerConversationContainer6)};q.prototype.componentDidMount=function(){this.$MessengerConversationContainer8(this.props.threadID);if(this.$MessengerConversationContainer9())this.$MessengerConversationContainer10();else if(this.$MessengerConversationContainer11())this.$MessengerConversationContainer12()};q.prototype.componentDidUpdate=function(r){var s=this.props.threadID!==r.threadID;if(s)if(this.$MessengerConversationContainer9())this.$MessengerConversationContainer10(r.threadID);else if(this.$MessengerConversationContainer11())this.$MessengerConversationContainer12(r.threadID)};q.prototype.componentWillReceiveProps=function(r){if(this.props.threadID!==r.threadID){this.setState({isLoading:true,messages:c("immutable").List()});this.$MessengerConversationContainer8(r.threadID)}};q.prototype.render=function(){var r=this.state.messages,s=r.some(function(t){return t.log_message_type===c("MercuryLogMessageType").SERVER_ERROR});if(c("MessengerConfig").ErrorDialog&&s&&!this.$MessengerConversationContainer7)c("messengerDialogsRe").showDialog(function(){return c("React").createElement(m,{onMount:function(){return this.$MessengerConversationContainer7=true}.bind(this)})}.bind(this));return c("React").createElement(c("MessengerConversation.react"),{className:this.props.className,contact:this.props.contact,fetchMessages:this.$MessengerConversationContainer13,isCanonical:c("MercuryIDs").isCanonical(this.props.threadID),isLoading:this.state.isLoading,isLoaded:this.state.isLoaded,messages:this.state.messages,onRead:this.props.onMarkRead,onVoiceClipCreate:this.props.onVoiceClipCreate,participants:this.props.participants,ref:"conversation",thread:this.props.thread,threadID:this.props.threadID,viewer:this.props.viewer})};q.prototype.handleResize=function(){this.refs.conversation.handleResize()};q.prototype.isScrolledToBottom=function(){return!!(this.refs.conversation&&this.refs.conversation.isScrolledToBottom())};q.prototype.$MessengerConversationContainer9=function(){__p&&__p();var r=this.props.thread;if(r==null)return false;var s=r.thread_id;if(!this.$MessengerConversationContainer14())return false;if(!j.isPresentInGroupThread(r))return false;var t=c("messengerBlockedGroupThreadWarningDialogReact").getWantsToSee(s);if(t)return false;return true};q.prototype.$MessengerConversationContainer11=function(){__p&&__p();var r=this.props.thread;if(r==null)return false;var s=r.thread_id;if(!this.$MessengerConversationContainer14())return false;if(r.folder!=="inbox")return false;if(!k.isPresentInGroupThread(r))return false;var t=c("messengerIgnoredGroupThreadWarningDialogReact").getWantsToSee(s);if(t)return false;return c("gkx")("AT4mycXtTvfXJMAqrd_BSmI0_EEB-8pOs_AaNI2VArui1ThGLeffrrAudIg_2uctK6Ji6Zom3olu5BpcCU5_nD4U")};q.prototype.$MessengerConversationContainer14=function(){var r=this.props.thread;if(r==null)return false;if(c("MercuryIDs").isCanonical(this.props.threadID))return false;if(!r.is_subscribed)return false;return true};q.prototype.$MessengerConversationContainer10=function(r){c("messengerDialogsRe").showDialog(function(){return c("React").createElement(o,{onSee:this.$MessengerConversationContainer15,onLeave:this.$MessengerConversationContainer16,onCancel:this.$MessengerConversationContainer17,prevThreadID:r})}.bind(this))};q.prototype.$MessengerConversationContainer12=function(r){c("messengerDialogsRe").showDialog(function(){return c("React").createElement(p,{onSee:this.$MessengerConversationContainer18,onIgnore:this.$MessengerConversationContainer19,onCancel:this.$MessengerConversationContainer17,prevThreadID:r,threadID:c("MercuryIDs").getThreadFBIDFromThreadID(this.props.threadID)})}.bind(this))};q.prototype.$MessengerConversationContainer20=function(r){if(r==null)c("MessengerActions").selectThread(null);c("MessengerActions").selectThread(r)};q.prototype.$MessengerConversationContainer8=function(r){__p&&__p();if(!r)return;this.setState({isLoaded:false});this.$MessengerConversationContainer1&&this.$MessengerConversationContainer1.destroy();this.$MessengerConversationContainer7=false;this.$MessengerConversationContainer1=new(c("MercuryMessageStore"))(r,c("MessengerConfig").MessageLoadCount);clearTimeout(this.$MessengerConversationContainer6);this.$MessengerConversationContainer6=setTimeout(function(){if(this.props.thread&&this.props.thread.message_count<1)this.setState({isLoaded:true,isLoading:false})}.bind(this),6e3);this.$MessengerConversationContainer2&&this.$MessengerConversationContainer2.release();this.$MessengerConversationContainer2=new(c("SubscriptionsHandler"))();this.$MessengerConversationContainer2.addSubscriptions(this.$MessengerConversationContainer1.subscribe(function(s){this.setState({messages:this.$MessengerConversationContainer21(c("immutable").List(s.messages)),isLoading:false})}.bind(this)),c("MessengerHotLikePreviewEvents").addListener(c("MessengerHotLikePreviewEvents").START,function(s){this.$MessengerConversationContainer3=true;this.$MessengerConversationContainer4=s;this.setState({messages:this.$MessengerConversationContainer21(this.state.messages)});clearInterval(this.$MessengerConversationContainer5);this.$MessengerConversationContainer5=setInterval(this.refs.conversation.scrollToBottom,50)}.bind(this)),c("MessengerHotLikePreviewEvents").addListener(c("MessengerHotLikePreviewEvents").FINISH_ANIMATION,function(r){clearInterval(this.$MessengerConversationContainer5)}.bind(this)),c("MessengerHotLikePreviewEvents").addListener(c("MessengerHotLikePreviewEvents").FINISH_EMOJI_ANIMATION,function(r){clearInterval(this.$MessengerConversationContainer5)}.bind(this)),c("MessengerHotLikePreviewEvents").addListener(c("MessengerHotLikePreviewEvents").STOP,function(){this.$MessengerConversationContainer3=false;this.$MessengerConversationContainer4=null}.bind(this)),c("MessengerHotLikePreviewEvents").addListener(c("MessengerHotLikePreviewEvents").STOP_EMOJI,function(){this.$MessengerConversationContainer3=false;this.$MessengerConversationContainer4=null}.bind(this)),c("MessengerHotLikePreviewEvents").addListener(c("MessengerHotLikePreviewEvents").REMOVE,function(){clearInterval(this.$MessengerConversationContainer5);this.$MessengerConversationContainer3=false;this.setState({messages:this.$MessengerConversationContainer21(this.state.messages)})}.bind(this)))};q.prototype.$MessengerConversationContainer21=function(r){if(this.$MessengerConversationContainer3)r=r.set(r.size,this.$MessengerConversationContainer4);else{r=r.filterNot(function(s){return s.is_like_preview});this.$MessengerConversationContainer4=null}return r};q.propTypes={contact:n.instanceOf(c("ImmutableObject")),onMarkRead:n.func.isRequired,onVoiceClipCreate:n.func,participants:n.instanceOf(c("immutable").Map),thread:n.object,threadID:n.string.isRequired,viewer:n.string.isRequired};f.exports=q}),null);
__d("MessengerDetailViewHeaderContainer.react",["immutable","ImmutableObject","MercuryIDs","MercuryThreadIDMap","MercuryTypeaheadConstants","MessengerActions","MessengerComposerActions","MessengerComposeViewHeader.react","messengerDetailViewHeaderReact","MessengerView","React","shallowEqual"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("messengerDetailViewHeaderReact").jsComponent,k=c("React").PropTypes;h=babelHelpers.inherits(l,c("React").Component);i=h&&h.prototype;function l(){__p&&__p();var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=i.constructor).call.apply(m,[this].concat(p)),this.$MessengerDetailViewHeaderContainer1=function(r){__p&&__p();var s=r.getUniqueID(),t=r.getType();if(t===c("MercuryTypeaheadConstants").THREAD_TYPE){var u=c("MercuryThreadIDMap").getForFBID(this.props.viewer);u.getClientIDFromServerID(s,function(v){c("MessengerComposerActions").moveDraftToNextThread(v);c("MessengerActions").selectThread(v)});c("MessengerComposerActions").exitComposeState()}else if(s===this.props.viewer||t===c("MercuryTypeaheadConstants").PAGE_TYPE){c("MessengerComposerActions").moveDraftToNextThread(c("MercuryIDs").getThreadIDFromUserID(s));c("MessengerComposerActions").exitComposeState();c("MessengerActions").selectThread(c("MercuryIDs").getThreadIDFromUserID(s))}else c("MessengerComposerActions").addToken(r)}.bind(this),this.$MessengerDetailViewHeaderContainer2=function(r){c("MessengerComposerActions").removeToken(r)},n}l.prototype.shouldComponentUpdate=function(m){var n=m.contactData,o=babelHelpers.objectWithoutProperties(m,["contactData"]),p=this.props,q=p.contactData,r=babelHelpers.objectWithoutProperties(p,["contactData"]);return!c("shallowEqual")(o,r)||!c("shallowEqual")(n,q)};l.prototype.render=function(){return this.props.view===c("MessengerView").DETAIL.COMPOSE?c("React").createElement(c("MessengerComposeViewHeader.react"),{forceHideClearButton:true,onAddRecipient:this.$MessengerDetailViewHeaderContainer1,onRemoveRecipient:this.$MessengerDetailViewHeaderContainer2,onResize:this.props.onResize,recipients:this.props.recipients,viewer:this.props.viewer}):c("React").createElement(j,{contactData:this.props.contactData,infoPanelCollapsed:this.props.infoPanelCollapsed,onInfoPanelToggle:this.props.onInfoPanelToggle,participants:this.props.participants,thread:this.props.thread,viewer:this.props.viewer})};l.propTypes={contactData:k.object,infoPanelCollapsed:k.bool.isRequired,onInfoPanelToggle:k.func.isRequired,onResize:k.func.isRequired,participants:k.instanceOf(c("immutable").Map).isRequired,recipients:k.instanceOf(c("immutable").List).isRequired,thread:k.instanceOf(c("ImmutableObject")),view:k.string,viewer:k.string.isRequired};f.exports=l}),null);
__d("customColorHighlightingReact",["ReasonReact","bs_js_null_undefined","CustomColorHighlighting.react"],(function a(b,c,d,e,f,g){"use strict";function h(i,j){return c("ReasonReact").wrapJsForReason(c("CustomColorHighlighting.react"),{customColor:c("bs_js_null_undefined").from_opt(i)},j)}g.make=h}),null);
__d("messengerInfoPanelSectionReact",["cx","fbt","React","utilsRe","bs_js_boolean","Link.react","ReasonReact","bs_js_primitive","bs_js_null_undefined","messengerMenuReact","MessengerMenu.react","messengerPopoverMenuReact","MessengerWebDriverTestIDs","customColorHighlightingReact"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=c("ReasonReact").statelessComponent("MessengerInfoPanelSectionReact");function k(o,p){var q=c("utilsRe").isSomeTrue(o),r=q!==0?i._("Afficher la section"):i._("Masquer la section");return c("ReasonReact").element(0,0,c("messengerMenuReact").Menu[0]([c("React").createElement(c("MessengerMenu.react").Item,{"data-testid":c("MessengerWebDriverTestIDs").INFO_PANEL_TOGGLER_OPTION,label:r,onclick:c("bs_js_null_undefined").from_opt(p)},r)]))}function l(o,p,q,r){var s=c("utilsRe").isSomeTrue(o);if(s!==0)return c("ReasonReact").element(0,0,c("messengerPopoverMenuReact").make(0,0,k(p,q),0,0,[c("React").createElement(c("Link.react"),{"aria-haspopup":1,"aria-label":i._("Options du panneau d\u2019informations pour {sectionName}",[i.param("sectionName",r)]),className:"_1lj1",role:"button"})]));else return null}function m(o,p,q,r,s,t){__p&&__p();var u=j.slice();u[9]=function(){var v;if(s){var w=s[0];v=c("React").createElement("h4",{className:"_1lj0"},w,l(p,q,r,w))}else v=null;return c("React").createElement("div",{className:"_1lix"+(c("bs_js_boolean").to_js_boolean(c("utilsRe").isSomeTrue(p))?" _1liy":"")+(c("bs_js_boolean").to_js_boolean(c("utilsRe").isSomeTrue(p)&&c("utilsRe").isSomeTrue(q))?" _1liz":"")},c("React").createElement("div",{className:"_1li-"}),v,c("React").createElement("div",{className:"_1li_"},c("ReasonReact").element(0,0,c("customColorHighlightingReact").make(o,t))))};return u}var n=c("ReasonReact").wrapReasonForJs(j,function(o){return m(c("bs_js_primitive").null_undefined_to_opt(o.customColor),c("utilsRe").nullUndefinedBooleanToOptionBool(o.isCollapsible),c("utilsRe").nullUndefinedBooleanToOptionBool(o.isCollapsed),c("bs_js_primitive").null_undefined_to_opt(o.onToggle),c("bs_js_primitive").null_undefined_to_opt(o.title),o.children)});g.component=j;g.renderMenu=k;g.renderToggle=l;g.make=m;g.jsComponent=n}),null);
__d("MessengerInfoPanelAssociatedObjectSection.react",["cx","fbt","CurrentUser","Image.react","Link.react","MessageThreadAssociatedObjectKey","messengerInfoPanelSectionReact","React","TimeSpentRoomTypeEnum","TimeSpentRoomTypeEnum$FbtEnum"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("messengerInfoPanelSectionReact").jsComponent,m=c("React").PropTypes;j=babelHelpers.inherits(n,c("React").PureComponent);k=j&&j.prototype;n.prototype.render=function(){var o=this.props,p=o.isCollapsed,q=o.onToggle,r=o.associatedObject,s=o.customColor,t=r[c("MessageThreadAssociatedObjectKey").ACTION_LINK];return c("React").createElement(l,{customColor:s,isCollapsible:true,isCollapsed:p,onToggle:q,title:i._("Partie de")},c("React").createElement(c("Link.react"),{href:t,target:"_blank",style:{textDecoration:"none"},className:"_35-k"},this.$MessengerInfoPanelAssociatedObjectSection1(),this.$MessengerInfoPanelAssociatedObjectSection2()))};n.prototype.$MessengerInfoPanelAssociatedObjectSection1=function(){var o=this.props.associatedObject,p=o[c("MessageThreadAssociatedObjectKey").PROFILE_PICTURE];return c("React").createElement("div",null,c("React").createElement(c("Image.react"),{className:"_35-n",src:p}))};n.prototype.$MessengerInfoPanelAssociatedObjectSection2=function(){var o=this.props.associatedObject,p=o[c("MessageThreadAssociatedObjectKey").NAME],q=c("TimeSpentRoomTypeEnum")[o[c("MessageThreadAssociatedObjectKey").ROOM_TYPE]],r=c("CurrentUser").isWorkUser()?"Workplace":"Facebook";return c("React").createElement("div",{className:"_35-o"},c("React").createElement("div",{className:"_35-p"},p),c("React").createElement("div",{className:"_35-q"},i._({"EVENT":"Acc\u00e9der \u00e0 l\u2019\u00e9v\u00e8nement {productName}","GROUP":"Acc\u00e9der au groupe {productName}"},[i.param("productName",r),i["enum"](q,c("TimeSpentRoomTypeEnum$FbtEnum"))])))};function n(){j.apply(this,arguments)}n.propTypes={isCollapsed:m.bool.isRequired,onToggle:m.func.isRequired,customColor:m.string,associatedObject:m.instanceOf(Object).isRequired};f.exports=n}),null);
__d("MessengerApprovalRequester.react",["cx","fbt","Link.react","MercuryThreadActions","messengerContactImageReact","MessengerTextWithEmoticons.react","React"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("MercuryThreadActions").get(),m=c("messengerContactImageReact").jsComponent,n=32;j=babelHelpers.inherits(o,c("React").Component);k=j&&j.prototype;o.prototype.render=function(){var p=this.props,q=p.isMessengerUser,r=p.imageSRC,s=p.name,t=c("React").createElement(c("MessengerTextWithEmoticons.react"),{renderEmoticons:true,renderEmoji:true,text:s});return c("React").createElement("div",{className:"_3szn _3szo"},c("React").createElement("div",{className:"_3szq _4fq"},c("React").createElement(m,{className:"_5l39 _5rmm",isMessengerUser:q,size:n,src:r}),c("React").createElement("span",{className:"_3tkx"},t)),c("React").createElement("div",{className:"_3ihq _4fs"},c("React").createElement(c("Link.react"),{className:"_5a73",href:"#",onClick:this.$MessengerApprovalRequester1.bind(this)},i._("Accepter")),c("React").createElement(c("Link.react"),{className:"_5a73",href:"#",onClick:this.$MessengerApprovalRequester2.bind(this)},i._("Ignorer"))))};o.prototype.$MessengerApprovalRequester1=function(event){var p=this.props,q=p.threadFBID,r=p.userID;l.acceptToJoinableGroup(q,r)};o.prototype.$MessengerApprovalRequester2=function(event){var p=this.props,q=p.threadFBID,r=p.userID;l.rejectToJoinableGroup(q,r)};function o(){j.apply(this,arguments)}f.exports=o}),null);
__d("MessengerInfoPanelGroupSection.react",["cx","fbt","FBToggleSwitch.react","immutable","MercuryIDs","MercuryParticipants","MercuryThreadActions","MessengerAdminGroupUtils","MessengerApprovalModeTypes","MessengerApprovalRequester.react","messengerInfoPanelSectionReact","React"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("MercuryThreadActions").get(),m=c("messengerInfoPanelSectionReact").jsComponent;j=babelHelpers.inherits(n,c("React").Component);k=j&&j.prototype;function n(o){k.constructor.call(this,o);this.state={approvalQueue:c("immutable").Map()}}n.prototype.componentDidMount=function(){this.$MessengerInfoPanelGroupSection1(this.props.thread)};n.prototype.render=function(){return c("React").createElement("div",null,c("React").createElement(m,{customColor:this.props.thread.custom_color,isCollapsible:true,isCollapsed:this.props.isOptionsCollapsed,onToggle:this.props.onOptionsToggle,title:i._("Options du groupe")},c("React").createElement("div",{className:"_3iho"},this.$MessengerInfoPanelGroupSection2(),this.$MessengerInfoPanelGroupSection3())),this.$MessengerInfoPanelGroupSection4())};n.prototype.componentWillReceiveProps=function(o){this.$MessengerInfoPanelGroupSection1(o.thread)};n.prototype.$MessengerInfoPanelGroupSection1=function(o){var p=o&&o.approval_queue_ids;if(p)c("MercuryParticipants").getMulti(p,function(q){this.setState({approvalQueue:c("immutable").Map(q)})}.bind(this))};n.prototype.$MessengerInfoPanelGroupSection2=function(){var o=this.props.thread,p=o.joinable_mode.link;if(!c("MessengerAdminGroupUtils").showJoinableLink(o))return null;return c("React").createElement("div",{className:"_3szn _3szo"},c("React").createElement("div",{className:"_3szq"},i._("Partager le lien"),c("React").createElement("div",{className:"_3ihp _3oh-"},p)))};n.prototype.$MessengerInfoPanelGroupSection3=function(){var o=this.props,p=o.viewer,q=o.thread,r=c("MessengerAdminGroupUtils").isApprovalOpenThread(q);if(!c("MessengerAdminGroupUtils").showJoinableApprovalToggle(q,p))return null;return c("React").createElement("div",{className:"_3szn _3szo"},c("React").createElement("div",{className:"_3szq"},i._("Approbation des nouveaux membres"),c("React").createElement("div",{className:"_3ihp"},i._("Approuvez qui peut rejoindre le groupe"))),c("React").createElement("div",{className:"_3ihq"},c("React").createElement(c("FBToggleSwitch.react"),{animate:true,checked:!r,onToggle:function s(t){return l.setApprovalMode(t?c("MessengerApprovalModeTypes").APPROVALS:c("MessengerApprovalModeTypes").OPEN,q)}})))};n.prototype.$MessengerInfoPanelGroupSection4=function(){var o=this.props,p=o.viewer,q=o.thread,r=0;if(q&&q.approval_queue_ids&&q.approval_queue_ids.length)r=q.approval_queue_ids.length;if(!c("MessengerAdminGroupUtils").showApprovalQueue(q,p))return null;return c("React").createElement(m,{customColor:this.props.thread.custom_color,isCollapsible:true,isCollapsed:this.props.isApprovalsCollapsed,onToggle:this.props.onApprovalToggle,title:i._("Demandes en attente ({pendingRequestCount})",[i.param("pendingRequestCount",r)])},c("React").createElement("div",{className:"_3iho _3oh-"},this.state.approvalQueue.map(function(s){return c("React").createElement(c("MessengerApprovalRequester.react"),{key:s.id,imageSRC:s.image_src,isMessengerUser:s.is_messenger_user,name:s.name,threadFBID:this.props.thread.thread_fbid,userID:c("MercuryIDs").getUserIDFromParticipantID(s.id)})}.bind(this)).toArray()))};f.exports=n}),null);
__d("messengerMakeAsOwnerDialogReact",["bs_curry","bs_js_boolean","ReasonReact","bs_js_primitive","messengerDialogReact","MessengerAdminGroupUtils","messengerDialogBodyReact"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("ReasonReact").statelessComponent("MessengerMakeAsOwnerDialogReact");function i(k,l,m,n,o){var p=function p(r){c("bs_curry")._1(l,false);if(k)return c("bs_curry")._1(k[0],r);else return 0},q=h.slice();q[9]=function(){var r=c("bs_js_boolean").to_js_boolean(n),s=c("MessengerAdminGroupUtils").getMakeOwnerTitleText(r,m),t=c("MessengerAdminGroupUtils").getMakeOwnerBodyText(r,m),u=c("MessengerAdminGroupUtils").getMakeOwnerButtonText(r,m);return c("ReasonReact").element(0,0,c("messengerDialogReact").Dialog[0](0,l,0,0,0,0,0,[c("ReasonReact").element(0,0,c("messengerDialogReact").Header[0](0,0,s)),c("ReasonReact").element(0,0,c("messengerDialogBodyReact").make(0,[t])),c("ReasonReact").element(0,0,c("messengerDialogReact").Footer[0](0,0,[c("ReasonReact").element(0,0,c("messengerDialogReact").CancelButton[0](0,[])),c("ReasonReact").element(0,0,c("messengerDialogReact").Button[0](0,[u],0,["danger"],[p],[0],0,0,[]))]))]))};return q}var j=c("ReasonReact").wrapReasonForJs(h,function(k){return i(c("bs_js_primitive").null_undefined_to_opt(k.onMakeOwner),k.onToggle,k.name,+k.isUserViewer,[])});g.component=h;g.make=i;g.jsComponent=j}),null);
__d("messengerRemoveAsOwnerDialogReact",["fbt","bs_curry","bs_js_boolean","ReasonReact","bs_js_primitive","messengerDialogReact","MessengerAdminGroupUtils","messengerDialogBodyReact"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("ReasonReact").statelessComponent("MessengerRemoveAsOwnerDialogReact");function j(l,m,n,o,p,q){var r=function r(t){c("bs_curry")._1(m,false);if(l)return c("bs_curry")._1(l[0],t);else return 0},s=i.slice();s[9]=function(){var t=c("MessengerAdminGroupUtils").getRemoveOwnerBodyText(c("bs_js_boolean").to_js_boolean(o),c("bs_js_boolean").to_js_boolean(p),n);return c("ReasonReact").element(0,0,c("messengerDialogReact").Dialog[0](0,m,0,0,0,0,0,[c("ReasonReact").element(0,0,c("messengerDialogReact").Header[0](0,0,h._("Supprimer des propri\u00e9taires du groupe\u00a0?"))),c("ReasonReact").element(0,0,c("messengerDialogBodyReact").make(0,[t])),c("ReasonReact").element(0,0,c("messengerDialogReact").Footer[0](0,0,[c("ReasonReact").element(0,0,c("messengerDialogReact").CancelButton[0](0,[])),c("ReasonReact").element(0,0,c("messengerDialogReact").Button[0](0,[h._("Supprimer le propri\u00e9taire")],0,["danger"],[r],[0],0,0,[]))]))]))};return s}var k=c("ReasonReact").wrapReasonForJs(i,function(l){return j(c("bs_js_primitive").null_undefined_to_opt(l.onRemove),l.onToggle,l.name,+l.isUserViewer,+l.isLastAdminInThread,[])});g.component=i;g.make=j;g.jsComponent=k}),null);
__d("messengerRemoveFromGroupDialogReact",["fbt","bs_curry","ReasonReact","bs_js_primitive","messengerDialogReact","messengerDialogBodyReact"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("ReasonReact").statelessComponent("MessengerRemoveFromGroupDialogReact");function j(l,m,n){var o=function o(q){c("bs_curry")._1(m,false);if(l)return c("bs_curry")._1(l[0],q);else return 0},p=i.slice();p[9]=function(){return c("ReasonReact").element(0,0,c("messengerDialogReact").Dialog[0](0,m,0,0,0,0,0,[c("ReasonReact").element(0,0,c("messengerDialogReact").Header[0](0,0,h._("Supprimer du groupe"))),c("ReasonReact").element(0,0,c("messengerDialogBodyReact").make(0,[h._("Voulez-vous vraiment retirer cette personne du groupe\u00a0? Celle-ci ne pourra plus envoyer ou recevoir de nouveaux messages.")])),c("ReasonReact").element(0,0,c("messengerDialogReact").Footer[0](0,0,[c("ReasonReact").element(0,0,c("messengerDialogReact").CancelButton[0](0,[])),c("ReasonReact").element(0,0,c("messengerDialogReact").Button[0](0,[h._("Retirer")],0,["danger"],[o],[0],0,0,[]))]))]))};return p}var k=c("ReasonReact").wrapReasonForJs(i,function(l){return j(c("bs_js_primitive").null_undefined_to_opt(l.onRemove),l.onToggle,[])});g.component=i;g.make=j;g.jsComponent=k}),null);
__d("MessengerInfoPanelContactActions.react",["cx","fbt","ImmutableObject","MercuryIDs","MercuryParticipants","MercuryThreads","MessengerAdminGroupUtils","messengerContactActionsRe","messengerDialogsRe","messengerMakeAsOwnerDialogReact","MessengerMenu.react","MessengerPopoverMenu.react","messengerRemoveAsOwnerDialogReact","messengerRemoveFromGroupDialogReact","MessengerStateStore","ReactComponentWithPureRenderMixin","React","ShimButton.react","StoreAndPropBasedStateMixin","joinClasses"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=c("messengerContactActionsRe").actions,k=c("messengerMakeAsOwnerDialogReact").jsComponent,l=c("messengerRemoveAsOwnerDialogReact").jsComponent,m=c("messengerRemoveFromGroupDialogReact").jsComponent,n=c("MessengerMenu.react").Item,o=c("MessengerMenu.react").Separator,p=c("React").PropTypes,q=c("React").createClass({displayName:"MessengerInfoPanelContactActions",mixins:[c("ReactComponentWithPureRenderMixin"),c("StoreAndPropBasedStateMixin")(c("MessengerStateStore"))],propTypes:{adminIds:p.arrayOf(p.string),extrasEnabled:p.bool.isRequired,contact:p.instanceOf(c("ImmutableObject")).isRequired,isOpen:p.bool,onAction:p.func.isRequired,onToggle:p.func.isRequired,viewer:p.string.isRequired},statics:{calculateState:function r(s){var t=c("MercuryThreads").getForFBID(s.viewer),u=c("MessengerStateStore").getState().activeThreadID,v=u?t.getOrFetch(u):null;return{thread:v}}},render:function r(){__p&&__p();var s=this._isViewerAdmin(),t=c("MessengerAdminGroupUtils").isAdmin(this.props.adminIds,this.props.contact.uid),u=this._isUserViewer(),v=c("MessengerAdminGroupUtils").canRemoveAdmin(s,t,this.state.thread)?c("React").createElement(n,{label:i._("Supprimer des administrateurs"),onclick:this._handleRemoveAsOwnerClick}):null,w=null,x=c("MessengerAdminGroupUtils").canMakeOthersAdmins(s,t,this.state.thread),y=c("MessengerAdminGroupUtils").canMakeSelfAdmin(u,this.state.thread);if(x||y)w=c("React").createElement(n,{label:i._("Nommer administrateur"),onclick:this._hanleMakeOwnerClick});var z=void 0;if(u)if(w||v)z=c("React").createElement(c("MessengerMenu.react"),null,w,v);else return null;else z=c("React").createElement(c("MessengerMenu.react"),null,c("React").createElement(n,{label:i._("Contacter"),onclick:this._makeActionHandler(j.MESSAGE)}),this.props.contact.href?c("React").createElement(n,{label:i._("Voir le profil"),onclick:this._makeActionHandler(j.PROFILE)}):null,w,v,this._renderExtras());return c("React").createElement(c("MessengerPopoverMenu.react"),{menu:z,onHide:function(){return this.props.onToggle(false)}.bind(this),onShow:function(){return this.props.onToggle(true)}.bind(this)},c("React").createElement(c("ShimButton.react"),{className:c("joinClasses")(this.props.className,"_57gs"+(this.props.isOpen?" _57gt":"")),onClick:this._handleClick}))},_renderExtras:function r(){if(!this.props.extrasEnabled)return null;var s=[c("React").createElement(o,{key:"separator"})],t=this._isViewerAdmin();if(c("MessengerAdminGroupUtils").canRemoveFromGroup(t,this.state.thread))s.push(c("React").createElement(n,{key:"remove-from-group",label:i._("Supprimer du groupe"),onclick:this._handleRemoveClick}));return s.length>=2?s:null},_handleClick:function r(s){s.stopPropagation();s.preventDefault()},_makeActionHandler:function r(s){return function(t){this._handleClick(t);this.props.onAction(s,t)}.bind(this)},_handleRemoveClick:function r(s){this._handleClick(s);c("messengerDialogsRe").showDialog(function(){return c("React").createElement(m,{onToggle:this._handleDialogToggle,onRemove:this._handleDialogRemoveClick})}.bind(this))},_handleRemoveAsOwnerClick:function r(s){this._handleClick(s);var t=c("MercuryParticipants").getNow(this.props.contact.uid);c("messengerDialogsRe").showDialog(function(){return c("React").createElement(l,{onToggle:this._handleDialogToggle,onRemove:this._handleOwnerRemoveClick,name:t&&t.name,isUserViewer:this._isUserViewer(),isLastAdminInThread:this.props.adminIds&&this.props.adminIds.length===1})}.bind(this))},_handleDialogRemoveClick:function r(s){this.props.onAction(j.REMOVE,s)},_handleOwnerRemoveClick:function r(s){this.props.onAction(j.REMOVE_OWNER,s)},_hanleMakeOwnerClick:function r(s){this._handleClick(s);var t=c("MercuryParticipants").getNow(this.props.contact.uid);c("messengerDialogsRe").showDialog(function(){return c("React").createElement(k,{onToggle:this._handleDialogToggle,onMakeOwner:this._handleOwnerAddClick,name:t&&t.name,isUserViewer:this._isUserViewer()})}.bind(this))},_handleOwnerAddClick:function r(s){this.props.onAction(j.ADD_OWNER,s)},_handleDialogToggle:function r(s){if(!s)c("messengerDialogsRe").removeDialog()},_isUserViewer:function r(){return c("MercuryIDs").getParticipantIDFromUserID(this.props.viewer)===this.props.contact.uid},_isViewerAdmin:function r(){return c("MessengerAdminGroupUtils").isViewerAdmin(this.props.adminIds,this.props.viewer)}});f.exports=q}),null);
__d("MessengerSortParticipants",[],(function a(b,c,d,e,f,g){var h={sortAlphabeticalWithAdmins:function i(j,k){var l=k.filter(function(n){return!!n&&j&&j.indexOf(n.id)!==-1}).toArray().sort(function(n,o){return n.name.localeCompare(o.name)}),m=k.filter(function(n){return!!n&&(!j||j.indexOf(n.id)===-1)}).toArray().sort(function(n,o){return n.name.localeCompare(o.name)});return l.concat(m)}};f.exports=h}),null);
__d("MessengerInfoPanelPeopleSection.react",["cssVar","cx","fbt","immutable","ImmutableObject","Link.react","MessengerAddIconSVG.react","MessengerAdminGroupUtils","MessengerContactList.react","MessengerInfoPanelContactActions.react","messengerInfoPanelSectionReact","MessengerSortParticipants","React"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l,m=c("messengerInfoPanelSectionReact").jsComponent,n=c("React").PropTypes;k=babelHelpers.inherits(o,c("React").PureComponent);l=k&&k.prototype;o.prototype.render=function(){var p=this.props,q=p.adminIds,r=p.contactAdapter,s=p.isCollapsed,t=p.isViewerSubscribed,u=p.onContactAction,v=p.onContactSelect,w=p.onToggle,x=p.participants,y=p.thread,z=p.viewer;return c("React").createElement(m,{customColor:this.props.thread.custom_color,isCollapsible:true,isCollapsed:s,onToggle:w,title:j._("Personnes")},this.$MessengerInfoPanelPeopleSection1(),c("React").createElement(c("MessengerContactList.react"),{actionsClass:c("MessengerInfoPanelContactActions.react"),className:"_4wc-",contactAdapter:r,disableRole:true,extraActionsEnabled:t,listSections:c("immutable").OrderedMap([[null,c("MessengerSortParticipants").sortAlphabeticalWithAdmins(q,x)]]),onSelect:v,onAction:u,viewer:z,adminIds:q,thread:y}))};o.prototype.$MessengerInfoPanelPeopleSection1=function(){if(!this.props.canViewerReply)return null;var p=c("MessengerAdminGroupUtils").shouldInvite(this.props.thread)?j._("Inviter"):j._("Ajouter des personnes"),q=this.props.thread.custom_color||"#0084ff";return c("React").createElement(c("Link.react"),{className:"_4rph",onClick:this.props.onAddPeopleClick},c("React").createElement(c("MessengerAddIconSVG.react"),{className:"_4rpi",customColor:q}),c("React").createElement("div",{className:"_4rpj"},p))};function o(){k.apply(this,arguments)}o.propTypes={adminIds:n.arrayOf(n.string),canViewerReply:n.bool.isRequired,contactAdapter:n.func.isRequired,isCollapsed:n.bool.isRequired,isViewerSubscribed:n.bool.isRequired,onAddPeopleClick:n.func.isRequired,onContactAction:n.func.isRequired,onContactSelect:n.func.isRequired,onToggle:n.func.isRequired,participants:n.instanceOf(c("immutable").Map).isRequired,thread:n.instanceOf(c("ImmutableObject")).isRequired,viewer:n.string.isRequired};f.exports=o}),null);
__d("MessengerSharedFile.react",["cx","Link.react","MercuryAttachment","React","joinClasses"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").PureComponent);j=i&&i.prototype;l.prototype.render=function(){var m=this.props,n=m.filename,o=m.url,p=m.mimetype,q=c("MercuryAttachment").getAttachIconClassByMime(p);return c("React").createElement("li",{className:"_2a42"},c("React").createElement(c("Link.react"),{className:c("joinClasses")("_2a43",q),target:"_blank",href:o},c("React").createElement("div",{className:"_2a44"},c("React").createElement("i",{className:"img"}),c("React").createElement("span",{className:"_2a45 _fy2"},n))))};function l(){i.apply(this,arguments)}l.propTypes={filename:k.string.isRequired,url:k.string.isRequired,mimetype:k.string.isRequired};f.exports=l}),null);
__d("MessengerSharedFiles.react",["cx","fbt","Link.react","MessengerSharedFile.react","MessengerSpinner.react","React","RelayClassic","react-relay/classic/query/RelayQL"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("React").PropTypes;j=babelHelpers.inherits(m,c("React").Component);k=j&&j.prototype;m.prototype.$MessengerSharedFiles1=function(){return c("React").createElement("div",{className:"_omn"},c("React").createElement(c("MessengerSpinner.react"),null))};m.prototype.$MessengerSharedFiles2=function(){return i._("Afficher tout")};m.prototype.$MessengerSharedFiles3=function(){return i._("Afficher moins")};m.prototype.$MessengerSharedFiles4=function(){var n=this.props.isLoadingFiles?this.$MessengerSharedFiles1():null,o=this.props.isExpanded?this.$MessengerSharedFiles3():this.$MessengerSharedFiles2();return c("React").createElement("li",{className:"_2a42 _omo"},c("React").createElement(c("Link.react"),{className:"_2a43",target:"_blank",onClick:this.props.toggleExpand},c("React").createElement("div",{className:"_2a44"},n,o)))};m.prototype.render=function(){var n=this.props.sharedFiles,o=n.edges,p=this.props.hasOverflow?this.$MessengerSharedFiles4():null;return c("React").createElement("ul",{className:"_2o39"},o.map(function(q){var r=q.node;return c("React").createElement(c("MessengerSharedFile.react"),{key:r.legacy_attachment_id,filename:r.filename,url:r.url,mimetype:r.mimetype})}),p)};function m(){j.apply(this,arguments)}m.propTypes={sharedFiles:l.object.isRequired,threadFBID:l.string.isRequired,toggleExpand:l.func.isRequired};f.exports=c("RelayClassic").createContainer(m,{fragments:{sharedFiles:function n(){return function(){return{children:[{children:[{children:[{fieldName:"__typename",kind:"Field",metadata:{isGenerated:true,isRequisite:true},type:"String"},{children:[{fieldName:"legacy_attachment_id",kind:"Field",metadata:{},type:"ID"},{calls:[{kind:"Call",metadata:{type:"SiteEnum"},name:"site",value:{kind:"CallValue",callValue:"www"}}],fieldName:"url",kind:"Field",metadata:{},type:"Url"},{fieldName:"filename",kind:"Field",metadata:{},type:"String"},{fieldName:"mimetype",kind:"Field",metadata:{},type:"String"},{fieldName:"id",kind:"Field",metadata:{isGenerated:true,isRequisite:true},type:"ID"}],id:c("react-relay/classic/query/RelayQL").__id(),kind:"Fragment",metadata:{},name:"MessageFile",type:"MessageFile"},{children:[{fieldName:"id",kind:"Field",metadata:{isGenerated:true,isRequisite:true},type:"ID"},{fieldName:"__typename",kind:"Field",metadata:{isGenerated:true,isRequisite:true},type:"String"}],id:c("react-relay/classic/query/RelayQL").__id(),kind:"Fragment",metadata:{isAbstract:true},name:"IdFragment",type:"Node"}],fieldName:"node",kind:"Field",metadata:{canHaveSubselections:true,inferredRootCallName:"node",inferredPrimaryKey:"id",isAbstract:true,isRequisite:true},type:"MessageSharedMedia"},{fieldName:"cursor",kind:"Field",metadata:{isGenerated:true,isRequisite:true},type:"ID"}],fieldName:"edges",kind:"Field",metadata:{canHaveSubselections:true,isPlural:true},type:"MessageSharedMediaEdge"},{children:[{fieldName:"has_next_page",kind:"Field",metadata:{isGenerated:true,isRequisite:true},type:"Boolean"},{fieldName:"has_previous_page",kind:"Field",metadata:{isGenerated:true,isRequisite:true},type:"Boolean"}],fieldName:"page_info",kind:"Field",metadata:{canHaveSubselections:true,isGenerated:true,isRequisite:true},type:"PageInfo"}],id:c("react-relay/classic/query/RelayQL").__id(),kind:"Fragment",metadata:{},name:"MessengerSharedFiles_react_SharedFilesRelayQL",type:"MessageSharedMediaConnection"}}()}}})}),null);
__d("MessengerSharedFilesContainer.react",["fbt","messengerInfoPanelSectionReact","MessengerSharedFiles.react","React","RelayClassic","react-relay/classic/query/RelayQL"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("messengerInfoPanelSectionReact").jsComponent,j=c("React").PropTypes,k=10,l=c("React").createClass({displayName:"MessengerSharedFilesContainer",propTypes:{sharedFiles:j.object,threadFBID:j.string,isCollapsed:j.bool,onToggle:j.func,relay:j.object},getInitialState:function m(){var n=true;if(this.props.sharedFiles)n=this.props.sharedFiles.message_shared_media.count<=k;return{isAllFilesShown:n,isLoadingFiles:false}},_toggleExpand:function m(){if(this.state.isLoadingFiles||!this.props.sharedFiles)return;var n=this.props.sharedFiles.message_shared_media,o=n.count,p=this.state.isAllFilesShown;this.setState({isLoadingFiles:true},function(){if(this.props.relay)this.props.relay.setVariables({count:p?k:o},function(q){if(q.done||q.aborted)this.setState({isAllFilesShown:!p,isLoadingFiles:false})}.bind(this))}.bind(this))},render:function m(){var n=this.props,o=n.sharedFiles,p=n.threadFBID,q=n.isCollapsed,r=n.onToggle;if(!p||!o)return null;var s=o.message_shared_media;if(!s||s.count===0)return null;return c("React").createElement(i,{isCollapsible:true,isCollapsed:q,onToggle:r,title:h._("Fichiers partag\u00e9s")},c("React").createElement(c("MessengerSharedFiles.react"),{isExpanded:this.state.isAllFilesShown,hasOverflow:s.count>k,isLoadingFiles:this.state.isLoadingFiles,toggleExpand:this._toggleExpand,sharedFiles:s,threadFBID:p}))}});f.exports=c("RelayClassic").createContainer(l,{initialVariables:{count:k},fragments:{sharedFiles:function m(){return function(n){return{children:[{calls:[{kind:"Call",metadata:{type:"MessageMediaType"},name:"message_shared_media_type",value:{kind:"CallValue",callValue:"FILE"}},{kind:"Call",metadata:{type:"Int"},name:"first",value:{kind:"CallVariable",callVariableName:"count"}}],children:[].concat.apply([],[{fieldName:"count",kind:"Field",metadata:{},type:"Int"},c("react-relay/classic/query/RelayQL").__frag(n)]),fieldName:"message_shared_media",kind:"Field",metadata:{canHaveSubselections:true,isConnection:true,isFindable:true},type:"MessageSharedMediaConnection"},{fieldName:"id",kind:"Field",metadata:{isGenerated:true,isRequisite:true},type:"ID"}],id:c("react-relay/classic/query/RelayQL").__id(),kind:"Fragment",metadata:{},name:"MessengerSharedFilesContainer_react_SharedFilesRelayQL",type:"MessageThread"}}(c("MessengerSharedFiles.react").getFragment("sharedFiles"))}}})}),null);
__d("MessengerSharedFilesContainerRoute",["react-relay/classic/route/RelayRoute","react-relay/classic/query/RelayQL"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("react-relay/classic/route/RelayRoute"));i=h&&h.prototype;function j(){h.apply(this,arguments)}j.routeName="MessengerSharedFilesContainerRoute";j.paramDefinitions={threadFBID:{type:"String",required:true}};j.queries={sharedFiles:function k(l){return function(m){return{calls:[{kind:"Call",metadata:{type:"ID!"},name:"id",value:{kind:"CallVariable",callVariableName:"threadFBID"}}],children:[].concat.apply([],[{fieldName:"id",kind:"Field",metadata:{isGenerated:true,isRequisite:true},type:"ID"},c("react-relay/classic/query/RelayQL").__frag(m)]),fieldName:"message_thread",kind:"Query",metadata:{identifyingArgName:"id",identifyingArgType:"ID!"},name:"MessengerSharedFilesContainerRoute",type:"MessageThread"}}(l.getFragment("sharedFiles"))}};f.exports=j}),null);
__d("MessengerSharedLinks.react",["cx","fbt","Link.react","MessengerSpinner.react","Image.react","Tooltip.react","React","RelayClassic","isLinkshimURI","URI"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("React").PropTypes;j=babelHelpers.inherits(m,c("React").PureComponent);k=j&&j.prototype;m.prototype.render=function(){return c("React").createElement("div",{className:"_2wjt"},this.props.sharedLinks.map(function(n,o){return this.$MessengerSharedLinks1(n,o)}.bind(this)),this.$MessengerSharedLinks2())};m.prototype.$MessengerSharedLinks1=function(n,o){return c("React").createElement(c("Tooltip.react"),{tooltip:c("React").createElement("div",{className:"_2wjx"},c("React").createElement(c("Image.react"),{className:"_2wjy",src:n.media.image.uri,style:{height:80,width:80}}),c("React").createElement("div",{className:"_2wjz"},c("React").createElement("div",{className:"_2wj-"},n.title),c("React").createElement("div",{className:"_2wj_"},n.description?n.description.text:"")))},c("React").createElement(c("Link.react"),{className:"_3oh- _2wju",href:n.url,key:o,style:{color:this.props.customColor},target:"_blank"},this.$MessengerSharedLinks3(n.url)))};m.prototype.$MessengerSharedLinks3=function(n){var o=new(c("URI"))(n);if(!c("isLinkshimURI")(o))return n;var p=o.getQueryData().u;if(!p)return n;return p};m.prototype.$MessengerSharedLinks2=function(){if(!this.props.canShowMore)return null;if(this.props.isFetchingMore)return c("React").createElement("div",{className:"_2n20",style:{flex:0}},c("React").createElement(c("MessengerSpinner.react"),null));return c("React").createElement(c("Link.react"),{className:"_3oh- _2wjv",style:{color:this.props.customColor},onClick:this.props.onClickShowMore},i._("Afficher plus..."))};m.getShareLinkFragment=function(){return function(){return{children:[{fieldName:"title",kind:"Field",metadata:{},type:"String"},{children:[{fieldName:"text",kind:"Field",metadata:{},type:"String"}],fieldName:"description",kind:"Field",metadata:{canHaveSubselections:true},type:"TextWithEntities"},{fieldName:"url",kind:"Field",metadata:{},type:"Url"},{children:[{calls:[{kind:"Call",metadata:{type:"Int"},name:"width",value:{kind:"CallValue",callValue:80}},{kind:"Call",metadata:{type:"Int"},name:"height",value:{kind:"CallValue",callValue:80}}],children:[{fieldName:"uri",kind:"Field",metadata:{},type:"Url"}],fieldName:"image",kind:"Field",metadata:{canHaveSubselections:true},type:"Image"},{fieldName:"__typename",kind:"Field",metadata:{isGenerated:true,isRequisite:true},type:"String"},{children:[{fieldName:"id",kind:"Field",metadata:{isGenerated:true,isRequisite:true},type:"ID"},{fieldName:"__typename",kind:"Field",metadata:{isGenerated:true,isRequisite:true},type:"String"}],id:c("RelayClassic").QL.__id(),kind:"Fragment",metadata:{isAbstract:true},name:"IdFragment",type:"Node"}],fieldName:"media",kind:"Field",metadata:{canHaveSubselections:true,isAbstract:true},type:"Media"}],id:c("RelayClassic").QL.__id(),kind:"Fragment",metadata:{},name:"MessengerSharedLinks_reactRelayQL",type:"StoryAttachment"}}()};function m(){j.apply(this,arguments)}m.propTypes={customColor:l.string,isFetchingMore:l.bool.isRequired,sharedLinks:l.array.isRequired,threadFBID:l.string.isRequired,onClickShowMore:l.func.isRequired};f.exports=m}),null);
__d("MessengerSharedLinksContainer.react",["fbt","messengerInfoPanelSectionReact","MessengerSharedLinks.react","React","RelayClassic"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("messengerInfoPanelSectionReact").jsComponent,l=c("React").PropTypes,m=10;i=babelHelpers.inherits(n,c("React").PureComponent);j=i&&i.prototype;function n(o){j.constructor.call(this,o);this.state={canShowMore:false,isFetchingMore:false,numLinks:0,intervalID:null};this.$MessengerSharedLinksContainer2=function(){this.props.relay.setVariables({count:this.props.relay.variables.count+m});this.setState({isFetchingMore:true})}.bind(this)}n.prototype.componentWillUpdate=function(o){if(this.state.numLinks!==o.sharedLinks.shared_links.length){var p=o.sharedLinks.shared_links.length;this.setState({canShowMore:p>=o.relay.variables.count,isFetchingMore:false,numLinks:p})}};n.prototype.componentWillMount=function(){this.setState({intervalID:setInterval(this.$MessengerSharedLinksContainer1.bind(this),3e3)})};n.prototype.componentWillUnmount=function(){if(this.state.intervalID)clearInterval(this.state.intervalID)};n.prototype.render=function(){if(!this.props.threadFBID||!this.props.sharedLinks||!this.props.sharedLinks.shared_links||this.props.sharedLinks.shared_links.length===0)return null;return c("React").createElement(k,{isCollapsible:true,isCollapsed:this.props.isCollapsed,customColor:this.props.customColor,onToggle:this.props.onToggle,title:h._("Liens partag\u00e9s")},c("React").createElement(c("MessengerSharedLinks.react"),{canShowMore:this.state.canShowMore,customColor:this.props.customColor,isFetchingMore:this.state.isFetchingMore,sharedLinks:this.props.sharedLinks.shared_links,threadFBID:this.props.threadFBID,onClickShowMore:this.$MessengerSharedLinksContainer2}))};n.prototype.$MessengerSharedLinksContainer1=function(){this.props.relay.forceFetch()};n.propTypes={customColor:l.string,isCollapsed:l.bool.isRequired,sharedLinks:l.object,threadFBID:l.string,onToggle:l.func.isRequired};f.exports=c("RelayClassic").createContainer(n,{initialVariables:{count:m},fragments:{sharedLinks:function o(){return function(p){return{children:[{calls:[{kind:"Call",metadata:{type:"Int"},name:"first",value:{kind:"CallVariable",callVariableName:"count"}}],children:[].concat.apply([],[c("RelayClassic").QL.__frag(p)]),fieldName:"shared_links",kind:"Field",metadata:{canHaveSubselections:true,isPlural:true},type:"StoryAttachment"},{fieldName:"id",kind:"Field",metadata:{isGenerated:true,isRequisite:true},type:"ID"}],id:c("RelayClassic").QL.__id(),kind:"Fragment",metadata:{},name:"MessengerSharedLinksContainer_react_SharedLinksRelayQL",type:"MessageThread"}}(c("MessengerSharedLinks.react").getShareLinkFragment())}}})}),null);
__d("MessengerSharedLinksContainerRoute",["RelayClassic"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("RelayClassic").Route);i=h&&h.prototype;function j(){h.apply(this,arguments)}j.routeName="MessengerSharedLinksContainerRoute";j.paramDefinitions={threadFBID:{type:"String",required:true}};j.queries={sharedLinks:function k(l){return function(m){return{calls:[{kind:"Call",metadata:{type:"ID!"},name:"id",value:{kind:"CallVariable",callVariableName:"threadFBID"}}],children:[].concat.apply([],[{fieldName:"id",kind:"Field",metadata:{isGenerated:true,isRequisite:true},type:"ID"},c("RelayClassic").QL.__frag(m)]),fieldName:"message_thread",kind:"Query",metadata:{identifyingArgName:"id",identifyingArgType:"ID!"},name:"MessengerSharedLinksContainerRoute",type:"MessageThread"}}(l.getFragment("sharedLinks"))}};f.exports=j}),null);
__d("MessengerSharedPhotos.react",["cx","MessengerSharedPhoto.react","MessengerSpinner.react","MessengerSharedPhotosAlbumViewContainer.react","React","RelayClassic","react-relay/classic/query/RelayQL","SpotlightViewer","SpotlightMessengerSharedMediaViewerContainer.react","Vector","cancelAnimationFrame","requestAnimationFrame"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes,l=10,m=80;i=babelHelpers.inherits(n,c("React").Component);j=i&&i.prototype;function n(){__p&&__p();var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=j.constructor).call.apply(o,[this].concat(r)),this.state={albumView:null,imagesLoaded:l,shownID:null},this.$MessengerSharedPhotos1=null,this.$MessengerSharedPhotos5=function(t){this.setState({shownID:t})}.bind(this),this.$MessengerSharedPhotos6=function(t){this.setState({shownID:t},function(){this.$MessengerSharedPhotos3(this.state.shownID);this.$MessengerSharedPhotos7()}.bind(this))}.bind(this),this.$MessengerSharedPhotos8=function(t){this.setState({shownID:t})}.bind(this),this.$MessengerSharedPhotos7=function(){this.setState({albumView:null})}.bind(this),this.$MessengerSharedPhotos9=function(t){this.setState({albumView:t,shownID:null})}.bind(this),this.$MessengerSharedPhotos10=function(t){this.setState({albumView:null,shownID:t})}.bind(this),this.$MessengerSharedPhotos11=function(){this.setState({shownID:null})}.bind(this),p}n.prototype.componentDidMount=function(){this.$MessengerSharedPhotos2()};n.prototype.componentWillReceiveProps=function(o){if(o.threadFBID!==this.props.threadFBID)this.setState({imagesLoaded:l})};n.prototype.componentDidUpdate=function(){this.$MessengerSharedPhotos2()};n.prototype.componentWillUnmount=function(){c("cancelAnimationFrame")(this.$MessengerSharedPhotos1)};n.prototype.shouldComponentUpdate=function(o,p){var q=o.sharedPhotoAndVideos,r=q.edges,s=q.pageInfo&&q.pageInfo.has_next_page,t=r.find(function(u){var t=u.node;return t.id===p.shownID});if(!t&&s&&r.length<p.imagesLoaded){setTimeout(function(){return this.props.fetchMore(p.imagesLoaded)}.bind(this),1e3);return false}return true};n.prototype.$MessengerSharedPhotos2=function(){c("cancelAnimationFrame")(this.$MessengerSharedPhotos1);var o=this.props.sharedPhotoAndVideos;if(this.state.imagesLoaded<o.edges.length)this.$MessengerSharedPhotos1=c("requestAnimationFrame")(function(){this.setState({imagesLoaded:Math.min(o.edges.length,this.state.imagesLoaded+l)})}.bind(this));else if(!this.props.allPhotosDisplayed)this.props.onAllPhotosDisplayed()};n.prototype.$MessengerSharedPhotos3=function(o){var p=c("Vector").getViewportDimensions().x,q=this.props.sharedPhotoAndVideos.edges.length,r=this.props.sharedPhotoAndVideos.edges.find(function(v){return v.node.id===o});if(!r)return;var s=this.props.sharedPhotoAndVideos.edges.indexOf(r),t=(q-s)*m;if(t>p/2)return;var u=Math.ceil((p/2-t)/m);this.props.fetchMore(u)};n.prototype.$MessengerSharedPhotos4=function(o){var p=this.props.sharedPhotoAndVideos,q=p.edges.find(function(r){var s=r.node;return s.id===o});return q.node};n.prototype.$MessengerSharedPhotos12=function(){return c("React").createElement(c("SpotlightMessengerSharedMediaViewerContainer.react"),{onClosePhotoView:this.$MessengerSharedPhotos11,openAlbum:this.$MessengerSharedPhotos9,photoID:this.state.shownID,rootClassName:"",threadID:this.props.threadFBID,disableForward:false})};n.prototype.$MessengerSharedPhotos13=function(){return c("React").createElement(c("SpotlightViewer"),{className:"_3ode",onHide:this.$MessengerSharedPhotos7,open:true,ref:"spotlightViewer"},c("React").createElement(c("MessengerSharedPhotosAlbumViewContainer.react"),{onClick:this.$MessengerSharedPhotos10,onCloseSharedPhotos:this.$MessengerSharedPhotos7,threadID:this.props.threadFBID,viewedPhoto:this.state.albumView}))};n.prototype.$MessengerSharedPhotos14=function(){return c("React").createElement("div",{className:"_2n20"},c("React").createElement(c("MessengerSpinner.react"),null))};n.prototype.render=function(){var o=this.props,p=o.isLoadingImages,q=o.sharedPhotoAndVideos,r=q,s=r.edges,t=this.state.imagesLoaded,u="_3m31",v=this.$MessengerSharedPhotos5,w=p?this.$MessengerSharedPhotos14():null,x=this.state.shownID?this.$MessengerSharedPhotos12():null,y=this.state.albumView?this.$MessengerSharedPhotos13():null;return c("React").createElement("div",null,x,y,c("React").createElement("div",{className:"_40jj _5l-3"},s.slice(0,t).filter(function(z){var A=z.node;return!!A.image}).map(function(z){var A=z.node,B=A.photo_encodings?A.photo_encodings.length!==0:false;return c("React").createElement(c("MessengerSharedPhoto.react"),{className:u,fbid:A.legacy_attachment_id,key:A.legacy_attachment_id,onClick:v,photoID:A.id,uri:A.image.uri,isSpherical:B})})),w)};n.propTypes={allPhotosDisplayed:k.bool.isRequired,isLoadingImages:k.bool.isRequired,fetchMore:k.func.isRequired,onAllPhotosDisplayed:k.func.isRequired,sharedPhotoAndVideos:k.object.isRequired,threadFBID:k.string.isRequired};f.exports=c("RelayClassic").createContainer(n,{fragments:{sharedPhotoAndVideos:function o(){return function(){return{children:[{children:[{children:[{fieldName:"__typename",kind:"Field",metadata:{isGenerated:true,isRequisite:true},type:"String"},{children:[{fieldName:"id",kind:"Field",metadata:{isRequisite:true},type:"ID"},{fieldName:"__typename",kind:"Field",metadata:{isGenerated:true,isRequisite:true},type:"String"}],id:c("react-relay/classic/query/RelayQL").__id(),kind:"Fragment",metadata:{isAbstract:true},name:"Node",type:"Node"},{children:[{fieldName:"legacy_attachment_id",kind:"Field",metadata:{},type:"ID"},{calls:[{kind:"Call",metadata:{type:"Int"},name:"width",value:{kind:"CallValue",callValue:250}},{kind:"Call",metadata:{type:"Int"},name:"height",value:{kind:"CallValue",callValue:250}}],children:[{fieldName:"uri",kind:"Field",metadata:{},type:"Url"}],fieldName:"image",kind:"Field",metadata:{canHaveSubselections:true},type:"Image"},{children:[{fieldName:"x",kind:"Field",metadata:{},type:"Float"},{fieldName:"y",kind:"Field",metadata:{},type:"Float"}],fieldName:"original_dimensions",kind:"Field",metadata:{canHaveSubselections:true},type:"Vect2"},{children:[{fieldName:"id",kind:"Field",metadata:{isRequisite:true},type:"ID"}],fieldName:"photo_encodings",kind:"Field",metadata:{canHaveSubselections:true,inferredRootCallName:"node",inferredPrimaryKey:"id",isPlural:true},type:"PhotoEncoding"},{fieldName:"id",kind:"Field",metadata:{isGenerated:true,isRequisite:true},type:"ID"}],id:c("react-relay/classic/query/RelayQL").__id(),kind:"Fragment",metadata:{},name:"MessageImage",type:"MessageImage"},{children:[{fieldName:"legacy_attachment_id",kind:"Field",metadata:{},type:"ID"},{calls:[{kind:"Call",metadata:{type:"Int"},name:"width",value:{kind:"CallValue",callValue:250}},{kind:"Call",metadata:{type:"Int"},name:"height",value:{kind:"CallValue",callValue:250}}],children:[{fieldName:"uri",kind:"Field",metadata:{},type:"Url"}],fieldName:"image",kind:"Field",metadata:{canHaveSubselections:true},type:"Image"},{children:[{fieldName:"x",kind:"Field",metadata:{},type:"Float"},{fieldName:"y",kind:"Field",metadata:{},type:"Float"}],fieldName:"original_dimensions",kind:"Field",metadata:{canHaveSubselections:true},type:"Vect2"},{fieldName:"id",kind:"Field",metadata:{isGenerated:true,isRequisite:true},type:"ID"}],id:c("react-relay/classic/query/RelayQL").__id(),kind:"Fragment",metadata:{},name:"MessageVideo",type:"MessageVideo"}],fieldName:"node",kind:"Field",metadata:{canHaveSubselections:true,inferredRootCallName:"node",inferredPrimaryKey:"id",isAbstract:true,isRequisite:true},type:"MessageSharedPhotoAndVideo"},{fieldName:"cursor",kind:"Field",metadata:{isGenerated:true,isRequisite:true},type:"ID"}],fieldName:"edges",kind:"Field",metadata:{canHaveSubselections:true,isPlural:true},type:"MessageSharedPhotoAndVideoEdge"},{fieldName:"count",kind:"Field",metadata:{},type:"Int"},{children:[{fieldName:"has_next_page",kind:"Field",metadata:{isRequisite:true},type:"Boolean"},{fieldName:"has_previous_page",kind:"Field",metadata:{isGenerated:true,isRequisite:true},type:"Boolean"}],fieldName:"page_info",kind:"Field",metadata:{canHaveSubselections:true,isRequisite:true},type:"PageInfo"}],id:c("react-relay/classic/query/RelayQL").__id(),kind:"Fragment",metadata:{},name:"MessengerSharedPhotos_react_SharedPhotoAndVideosRelayQL",type:"MessageSharedPhotoAndVideoConnection"}}()}}})}),null);
__d("MessengerSharedPhotosContainer.react",["fbt","messengerInfoPanelSectionReact","MessengerSharedPhotos.react","React","RelayClassic","react-relay/classic/query/RelayQL"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("messengerInfoPanelSectionReact").jsComponent,j=c("React").PropTypes,k=10,l=c("React").createClass({displayName:"MessengerSharedPhotosContainer",propTypes:{customColor:j.string,clearForceFetch:j.func.isRequired,getIsScrolledToBottom:j.func.isRequired,getScrollableHeight:j.func.isRequired,isCollapsed:j.bool.isRequired,onToggle:j.func.isRequired,sharedPhotos:j.object,threadFBID:j.string},getInitialState:function m(){return{allPhotosDisplayed:false,isLoadingImages:false}},componentWillReceiveProps:function m(n){if(n.threadFBID!==this.props.threadFBID)this.setState({allPhotosDisplayed:false})},componentDidMount:function m(){this._maybeLoadMore()},componentDidUpdate:function m(){this._maybeLoadMore()},_maybeLoadMore:function m(){__p&&__p();var n=this.props,o=n.getIsScrolledToBottom,p=n.getScrollableHeight,q=n.isCollapsed,r=n.sharedPhotos,s=this.state.isLoadingImages;if(s||q||!r||!this.state.allPhotosDisplayed||!o()||!p())return;var t=r.message_shared_photo_and_video.page_info.has_next_page;if(!t)return;this.setState({isLoadingImages:true},function(){this.props.relay.setVariables({count:this.props.relay.variables.count+k},function(u){if(u.done||u.aborted)if(this.isMounted()){this.props.clearForceFetch();this.setState({allPhotosDisplayed:false,isLoadingImages:false})}}.bind(this))}.bind(this))},_loadMore:function m(n){if(n<=0)return;this.setState({isLoadingImages:true},function(){this.props.relay.setVariables({count:this.props.relay.variables.count+n},function(o){if(o.done||o.aborted)this.setState({isLoadingImages:false})}.bind(this))}.bind(this))},_handleAllPhotosDisplayed:function m(){this.setState({allPhotosDisplayed:true})},render:function m(){var n=this.props,o=n.isCollapsed,p=n.onToggle,q=n.sharedPhotos,r=n.threadFBID,s=this.state.isLoadingImages;if(!r||!q)return null;var t=q.message_shared_photo_and_video;if(!t.page_info.has_next_page&&t.count===0)return null;return c("React").createElement(i,{customColor:this.props.customColor,isCollapsible:true,isCollapsed:o,onToggle:p,title:h._("Photos partag\u00e9es")},c("React").createElement(c("MessengerSharedPhotos.react"),{allPhotosDisplayed:this.state.allPhotosDisplayed,fetchMore:this._loadMore,isLoadingImages:s,sharedPhotoAndVideos:t,onAllPhotosDisplayed:this._handleAllPhotosDisplayed,threadFBID:r}))}});f.exports=c("RelayClassic").createContainer(l,{initialVariables:{count:k},fragments:{sharedPhotos:function m(){return function(n){return{children:[{calls:[{kind:"Call",metadata:{type:"Int"},name:"first",value:{kind:"CallVariable",callVariableName:"count"}}],children:[].concat.apply([],[{children:[{fieldName:"has_next_page",kind:"Field",metadata:{isRequisite:true},type:"Boolean"},{fieldName:"has_previous_page",kind:"Field",metadata:{isGenerated:true,isRequisite:true},type:"Boolean"}],fieldName:"page_info",kind:"Field",metadata:{canHaveSubselections:true},type:"PageInfo"},{fieldName:"count",kind:"Field",metadata:{},type:"Int"},c("react-relay/classic/query/RelayQL").__frag(n)]),fieldName:"message_shared_photo_and_video",kind:"Field",metadata:{canHaveSubselections:true,isConnection:true,isFindable:true},type:"MessageSharedPhotoAndVideoConnection"},{fieldName:"id",kind:"Field",metadata:{isGenerated:true,isRequisite:true},type:"ID"}],id:c("react-relay/classic/query/RelayQL").__id(),kind:"Fragment",metadata:{},name:"MessengerSharedPhotosContainer_react_SharedPhotosRelayQL",type:"MessageThread"}}(c("MessengerSharedPhotos.react").getFragment("sharedPhotoAndVideos"))}}})}),null);
__d("MessengerSharedPhotosContainerRoute",["react-relay/classic/route/RelayRoute","react-relay/classic/query/RelayQL"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("react-relay/classic/route/RelayRoute"));i=h&&h.prototype;function j(){h.apply(this,arguments)}j.routeName="MessengerSharedPhotosContainerRoute";j.paramDefinitions={threadFBID:{type:"String",required:true}};j.queries={sharedPhotos:function k(l){return function(m){return{calls:[{kind:"Call",metadata:{type:"ID!"},name:"id",value:{kind:"CallVariable",callVariableName:"threadFBID"}}],children:[].concat.apply([],[{fieldName:"id",kind:"Field",metadata:{isGenerated:true,isRequisite:true},type:"ID"},c("react-relay/classic/query/RelayQL").__frag(m)]),fieldName:"message_thread",kind:"Query",metadata:{identifyingArgName:"id",identifyingArgType:"ID!"},name:"MessengerSharedPhotosContainerRoute",type:"MessageThread"}}(l.getFragment("sharedPhotos"))}};f.exports=j}),null);
__d("messengerGraphQLTokenizerReact",["utilsRe","bs_js_boolean","ReasonReact","bs_js_null_undefined","MessengerGraphQLTokenizer.react"],(function a(b,c,d,e,f,g){"use strict";function h(i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H){return c("ReasonReact").wrapJsForReason(c("MessengerGraphQLTokenizer.react"),{autoFocus:c("bs_js_boolean").to_js_boolean(i),className:c("bs_js_null_undefined").from_opt(j),context:c("bs_js_null_undefined").from_opt(k),defaultEntries:c("bs_js_null_undefined").from_opt(l),enableMessageSearch:c("bs_js_boolean").to_js_boolean(m),includeExistingParticipantIDs:c("bs_js_boolean").to_js_boolean(n),entries:o,excludeGroups:c("bs_js_boolean").to_js_boolean(p),excludePages:c("bs_js_boolean").to_js_boolean(q),forceHideClearButton:c("utilsRe").optionBoolToNullUndefinedBoolean(r),hasHoverState:c("bs_js_boolean").to_js_boolean(s),onAddEntryAttempt:t,onClear:c("bs_js_null_undefined").from_opt(u),onRemoveEntryAttempt:v,originalEntryIDs:w,placeholder:x,roomAssociatedObject:c("bs_js_null_undefined").from_opt(y),scrollableViewClassName:c("bs_js_null_undefined").from_opt(z),shouldQueryInternalBot:c("bs_js_boolean").to_js_boolean(A),shouldQueryVCEndpoint:c("bs_js_boolean").to_js_boolean(B),tabIndex:c("bs_js_null_undefined").from_opt(C),threadFBID:c("bs_js_null_undefined").from_opt(D),useLayer:c("bs_js_boolean").to_js_boolean(E),viewer:F,width:G},H)}g.make=h}),null);
__d("messengerAddToConversationDialogReact",["cx","fbt","bs_array","bs_block","bs_curry","React","utilsRe","immutable","bs_js_boolean","MercuryIDs","bs_pervasives","ReasonReact","bs_js_primitive","messengerDialogsRe","MercuryMessageObject","messengerDialogReact","MercuryLogMessageType","MercuryMessageActions","MercuryTriodeSourceUtil","MessengerAdminGroupUtils","messengerGraphQLTokenizerReact"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();function j(s,t){if(typeof s==="number")return c("bs_block").__(0,[[c("immutable").List([])]]);else if(s.tag){var u=s[0];return c("bs_block").__(0,[[t[0].filter(function(v){return c("bs_js_boolean").to_js_boolean(+(v.getUniqueID()!==u))})]])}else return c("bs_block").__(0,[[t[0].push(s[0])]])}function k(s){return c("bs_block").__(0,[s])}function l(s){return c("bs_block").__(1,[s.getUniqueID()])}function m(){return 0}var n=c("ReasonReact").reducerComponent("MessengerAddToConversationDialogReact");function o(s){if(s)return 0;else return c("messengerDialogsRe").removeDialog(0)}function p(s,t,u){__p&&__p();var v=function v(x,y){__p&&__p();var z=y[2],A=z[0].count(),B=+c("MessengerAdminGroupUtils").isJoinableThread(s),C=+c("MessengerAdminGroupUtils").shouldInvite(s),D=0;if(A!==0)if(B!==0)if(C!==0)z[0].forEach(function(E,u,F){var G=c("MercuryIDs").getThreadIDFromUserID(E.getUniqueID());c("MercuryMessageActions").getForFBID(t).send(c("MercuryMessageObject").getForFBID(t).constructUserGeneratedMessageObject(s.joinable_mode.link,c("MercuryTriodeSourceUtil").getMercuryTriodeSource(),G,[]),undefined,undefined);return true});else D=1;else if(C!==0)throw c("bs_pervasives").invalid_arg("Only joinable threads can invite");else D=1;if(D===1)c("MercuryMessageActions").getForFBID(t).send(c("MercuryMessageObject").getForFBID(t).constructLogMessageObject(c("MercuryTriodeSourceUtil").getMercuryTriodeSource(),s.thread_id,c("MercuryLogMessageType").SUBSCRIBE,{added_participants:z[0].map(function(E,u,F){return c("MercuryIDs").getParticipantIDFromUserID(E.getUniqueID())}).toArray()}),undefined,undefined);x.preventDefault();return c("messengerDialogsRe").removeDialog(0)},w=n.slice();w[9]=function(x){var y=+c("MessengerAdminGroupUtils").shouldInvite(s),z=c("immutable").Set(c("utilsRe").arrayCompact(c("bs_array").map(function(A){return c("bs_js_primitive").null_undefined_to_opt(c("MercuryIDs").getUserIDFromParticipantID(A))},s.participants)));return c("ReasonReact").element(0,0,c("messengerDialogReact").Dialog[0](0,o,0,[1],0,["default"],[460],[c("React").createElement("div",{className:"_4jgp"},c("ReasonReact").element(0,0,c("messengerDialogReact").Header[0](0,0,[c("ReasonReact").element(0,0,c("messengerDialogReact").CancelButton[0](0,[])),c("ReasonReact").element(0,0,c("messengerDialogReact").Title[0](0,[y!==0?i._("Inviter plus de personnes"):i._("Ajouter d\u2019autres personnes")])),c("ReasonReact").element(0,0,c("messengerDialogReact").Button[0](0,[i._("Termin\u00e9")],0,0,[c("bs_curry")._1(x[0],v)],[0],0,0,[]))])),c("ReasonReact").element(0,0,c("messengerGraphQLTokenizerReact").make(1,["_4jgt"],0,0,0,+c("MessengerAdminGroupUtils").useNewGroupMemberSuggestionRanking(),x[2][0],1,1-+c("MessengerAdminGroupUtils").canSeeBotsInGroupTypeahead(),[1],0,c("bs_curry")._1(x[1],k),[c("bs_curry")._1(x[1],m)],c("bs_curry")._1(x[1],l),z,y!==0?i._("Inviter au groupe\u00a0:"):i._("Ajouter au groupe\u00a0:"),c("bs_js_primitive").null_undefined_to_opt(s.associated_object),["_4jgu"],0,0,0,c("bs_js_primitive").null_undefined_to_opt(s.thread_fbid),0,t,460,[])))]))};w[10]=function(){return[c("immutable").List([])]};w[12]=j;return w}var q=c("ReasonReact").wrapReasonForJs(n,function(s){return p(s.thread,s.viewer,[])}),r=460;g.reducer=j;g.handleAddEntryAttempt=k;g.handleRemoveEntryAttempt=l;g.handleClear=m;g.component=n;g.dialogWidth=r;g.handleToggle=o;g.make=p;g.jsComponent=q}),null);
__d("messengerInfoPanelContactNameSectionReact",["cx","React","ReasonReact","bs_js_primitive","messengerLocalTimeReact","messengerPresenceStatusReact"],(function a(b,c,d,e,f,g,h){"use strict";var i=c("ReasonReact").statelessComponent("MessengerInfoPanelContactNameSectionReact");function j(k,l,m,n,o,p){var q=i.slice();q[9]=function(){return c("React").createElement("div",{className:"_2jnq"},o,c("React").createElement("div",{className:"_2jnt"},c("React").createElement("div",{className:"_3eur"},c("React").createElement("span",{className:"_3oh-"},k.name)),c("React").createElement("div",{className:"_3eus"},c("ReasonReact").element(0,0,c("messengerPresenceStatusReact").make(0,l,m,n,[]))),c("React").createElement("div",undefined,c("ReasonReact").element(0,0,c("messengerLocalTimeReact").make("_5uh",c("bs_js_primitive").null_undefined_to_opt(k.timezone),[])))))};return q}g.component=i;g.make=j}),null);
__d("MercuryGenericConstants",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({MAX_THREAD_NAME_LENGTH:250})}),null);
__d("createContentStateForTextWithMessengerEmoji",["ContentState","DraftModifier","MessengerSupportedEmojiUtils","insertMessengerEmojiIntoContentState"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(i){__p&&__p();var j=c("ContentState").createFromText("");while(i){var k=c("MessengerSupportedEmojiUtils").getEmojiMatchObj(i);if(k){var l=k.offset+k.length,m=i.substr(0,k.is_supported?k.offset:l),n=i.substr(l);j=c("DraftModifier").insertText(j,j.getSelectionAfter(),m);if(k.is_supported)j=c("insertMessengerEmojiIntoContentState")(k.emoji_key,j,j.getSelectionAfter(),j.getFirstBlock().getInlineStyleAt(0));i=n}else break}if(i)j=c("DraftModifier").insertText(j,j.getSelectionAfter(),i);return j}f.exports=h}),null);
__d("getVisibleValueForContentState",["DraftEntity","emptyFunction"],(function a(b,c,d,e,f,g){__p&&__p();function h(i){__p&&__p();var j=i.getBlockMap().map(function(k){__p&&__p();var l=k.getText(),m="";k.findEntityRanges(c("emptyFunction").thatReturnsTrue,function(n,o){__p&&__p();var p=k.getEntityAt(n);if(p===null)m+=l.slice(n,o);else{var q=c("DraftEntity").get(p);if(q.getType()==="EMOTICON")m+=q.getData().originalEmoticon;else if(q.getType()==="EMOJI")m+=q.getData().emoji.join("");else m+=l.slice(n,o)}});return m});return j.join("\n")}f.exports=h}),null);
__d("MessengerTextWithEmojiInput.react",["cx","CompositeDraftDecorator","ContentState","DraftEditor.react","EditorState","MessengerEmojiSpan.react","React","XUICloseButton.react","createContentStateForTextWithMessengerEmoji","getEntityMatcher","getVisibleValueForContentState","getVisibleValueForContentStateWithMessengerEmoji","handleBeforeInputForMessengerEmoji","joinClasses"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").PureComponent);j=i&&i.prototype;function l(){__p&&__p();var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.$MessengerTextWithEmojiInput5=function(r){if(r!==this.state.editorState){var s=!r.getCurrentContent().hasText();this.setState({editorState:r,isEmpty:s});this.props.onChange&&this.props.onChange(r)}}.bind(this),this.$MessengerTextWithEmojiInput2=function(){return new(c("CompositeDraftDecorator"))([{strategy:c("getEntityMatcher")(function(r){return r.getType()==="EMOJI"}),component:c("MessengerEmojiSpan.react")}])},this.focusInput=function(){this.refs.input.focus();this.$MessengerTextWithEmojiInput5(c("EditorState").moveFocusToEnd(this.state.editorState))}.bind(this),this.$MessengerTextWithEmojiInput3=function(r,s){if(this.props.maxLength&&this.props.maxLength<=this.getValue().length)return"handled";var t=c("handleBeforeInputForMessengerEmoji")(s,r);if(t===s)return"not-handled";this.setState({editorState:t});return"handled"}.bind(this),this.$MessengerTextWithEmojiInput4=function(r,s){this.props.onReturn&&this.props.onReturn(r,s);return"handled"}.bind(this),this.$MessengerTextWithEmojiInput6=function(){this.setState({editorState:this.$MessengerTextWithEmojiInput1("")})}.bind(this),this.state={editorState:this.$MessengerTextWithEmojiInput1(this.props.initialValue),isEmpty:!this.props.initialValue||this.props.initialValue.length===0},n}l.prototype.$MessengerTextWithEmojiInput1=function(m){return c("EditorState").createWithContent(c("createContentStateForTextWithMessengerEmoji")(m||""),this.$MessengerTextWithEmojiInput2())};l.prototype.componentDidMount=function(){this.focusInput()};l.prototype.render=function(){var m=this.props.placeholder&&this.props.placeholder.toString();return c("React").createElement("div",{className:c("joinClasses")(this.props.className,"_30e7")},c("React").createElement("div",{className:"_5j5f _3oh-"},c("React").createElement(c("DraftEditor.react"),{editorState:this.state.editorState,handleBeforeInput:this.$MessengerTextWithEmojiInput3,handleReturn:this.$MessengerTextWithEmojiInput4,onChange:this.$MessengerTextWithEmojiInput5,placeholder:m,ref:"input",spellCheck:false,stripPastedStyles:true,textAlignment:"left"})),c("React").createElement(c("XUICloseButton.react"),{size:"small",onMouseDown:this.$MessengerTextWithEmojiInput6,className:(this.state.isEmpty?"hidden_elem":"")+" _5j5l"}))};l.prototype.getValue=function(){var m=this.state.editorState.getCurrentContent();return c("getVisibleValueForContentStateWithMessengerEmoji")(m)};l.propTypes={onReturn:k.func,maxLength:k.number,onChange:k.func,placeholder:k.node,initialValue:k.string};f.exports=l}),null);
__d("messengerTextWithEmojiInputReact",["ReasonReact","bs_js_null_undefined","MessengerTextWithEmojiInput.react"],(function a(b,c,d,e,f,g){"use strict";function h(i,j,k,l,m,n,o){return c("ReasonReact").wrapJsForReason(c("MessengerTextWithEmojiInput.react"),{className:c("bs_js_null_undefined").from_opt(i),onReturn:c("bs_js_null_undefined").from_opt(j),maxLength:c("bs_js_null_undefined").from_opt(k),onChange:c("bs_js_null_undefined").from_opt(l),placeholder:c("bs_js_null_undefined").from_opt(m),initialValue:c("bs_js_null_undefined").from_opt(n)},o)}g.make=h}),null);
__d("MessengerThreadPhotoUploader.react",["cx","fbt","FileInput","FileInputUploader","Link.react","MercuryConfig","React","ReactDOM","SubscriptionsHandler"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=c("React").PropTypes,k=c("React").createClass({displayName:"MessengerThreadPhotoUploader",_fileInput:null,_subscriptions:null,_uploader:null,_uploadIsInProgress:false,propTypes:{onComplete:j.func.isRequired,onFail:j.func,onStart:j.func,uri:j.string},getDefaultProps:function l(){return{uri:c("MercuryConfig").upload_url}},componentDidMount:function l(){var m=c("ReactDOM").findDOMNode(this.refs.input),n=new(c("FileInput"))(c("ReactDOM").findDOMNode(this.refs.form),c("ReactDOM").findDOMNode(this.refs.uploadButton),m),o=new(c("FileInputUploader"))(m).setURI(this.props.uri).setAllowCrossOrigin(true).setAllowCrossPageTransition(true).setData({images_only:true}),p=new(c("SubscriptionsHandler"))();p.addSubscriptions(o.subscribe("success",this._handleAllUploadsCompleted),o.subscribe("failure",this._handleLastUploadFailed));this._subscriptions=p;this._uploader=o;this._fileInput=n},componentWillUnmount:function l(){if(!this._uploadIsInProgress)this._doUnmountComponents()},render:function l(){var m=i._("Click to change the image");return c("React").createElement("form",{action:this.props.uri,method:"post",ref:"form"},c("React").createElement("input",{type:"hidden",name:"attach_id",ref:"attachID"}),c("React").createElement("input",{type:"hidden",name:"images_only",value:"true"}),c("React").createElement("div",{className:"_m _4q60 _2lyy"},c("React").createElement(c("Link.react"),{className:"_4q61 _2lyz",ref:"uploadButton"},i._("modifier")),c("React").createElement("input",{type:"file",className:"_n",name:"attachment[]",accept:".jpg,.png,.jpeg,.bmp,.tif,.tiff",ref:"input",onChange:this._handleFileInputChange,title:m})))},_handleAllUploadsCompleted:function l(m,n){this._uploadIsInProgress=false;this.props.onComplete&&this.props.onComplete(n.response.payload);if(!this.isMounted())this._doUnmountComponents()},_handleLastUploadFailed:function l(m,n){this._uploadIsInProgress=false;this.props.onFail&&this.props.onFail(n);if(!this.isMounted())this._doUnmountComponents()},_handleFileInputChange:function l(m){if(m.target.value&&this._uploader){this._uploader.send();this._uploadIsInProgress=true;this.props.onStart&&this.props.onStart()}},_doUnmountComponents:function l(){this._subscriptions&&this._subscriptions.release();this._fileInput&&this._fileInput.destroy();delete this._subscriptions;delete this._uploader}});f.exports=k}),null);
__d("messengerThreadPhotoUploaderReact",["ReasonReact","bs_js_null_undefined","MessengerThreadPhotoUploader.react"],(function a(b,c,d,e,f,g){"use strict";function h(i,j,k,l,m){return c("ReasonReact").wrapJsForReason(c("MessengerThreadPhotoUploader.react"),{onComplete:i,onFail:c("bs_js_null_undefined").from_opt(j),onStart:c("bs_js_null_undefined").from_opt(k),uri:c("bs_js_null_undefined").from_opt(l)},m)}g.make=h}),null);
__d("messengerInfoPanelThreadNameSectionReact",["cx","fbt","bs_block","bs_curry","React","keysRe","bs_string","bs_js_boolean","ReasonReact","setImmediate","messengerButtonReact","messengerSpinnerReact","MercuryGenericConstants","mercuryThreadTitleReact","messengerTextWithEmojiInputReact","messengerThreadPhotoUploaderReact"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();function j(q,r){var s=r[2][1][0];if(s)return s[0].focusInput();else return 0}function k(){return c("React").createElement("div",{className:"_2jnw"},c("ReasonReact").element(0,0,c("messengerSpinnerReact").make(0,0,0,[])))}function l(q,r){var s=r[2][2][0];if(s)return s[0].focus();else return 0}function m(q,r){r[2][1][0]=q==null?0:[q];return 0}function n(q,r){r[2][2][0]=q==null?0:[q];return 0}var o=c("ReasonReact").reducerComponentWithRetainedProps("MessengerInfoPanelThreadNameSectionReact");function p(q,r,s,t,u,v,w,x,y){__p&&__p();var z=function z(E,F){E.stopPropagation();var G=F[2][1][0];if(G)c("bs_curry")._1(r,c("bs_string").trim(G[0].getValue()));return c("bs_curry")._1(c("setImmediate"),c("bs_curry")._1(F[0],l))},A=function A(E,y){if(E.currentTarget.contains(E.relatedTarget)){E.stopPropagation();return 0}else if(w>=2)return c("bs_curry")._1(v,0);else return c("bs_curry")._1(v,1)},B=function B(E){return c("React").createElement("div",{className:"_2jnx",onBlur:c("bs_curry")._1(E[0],A)},c("React").createElement("div",{className:"_2jny"},c("ReasonReact").element(0,[c("bs_curry")._1(E[0],m)],c("messengerTextWithEmojiInputReact").make(["_2jnz"],[c("bs_curry")._1(E[0],z)],[c("MercuryGenericConstants").MAX_THREAD_NAME_LENGTH],0,[i._("Nommez cette conversation")],[u.name],[]))),c("React").createElement("div",{className:"_2jn-"},c("ReasonReact").element(0,0,c("messengerButtonReact").make(0,["button"],0,0,[c("bs_curry")._1(E[0],z)],0,0,0,0,i._("Termin\u00e9"),0,0,0,0,[]))))},C=function C(E,y){E.stopPropagation();if(q!==0&&w===1)return c("bs_curry")._1(v,0);else return 0},D=function D(E,y){var F=E.charCode;if(w!==1||!(F===c("keysRe").$$return||F===c("keysRe").space))return 0;else{E.preventDefault();E.stopPropagation();if(q)return c("bs_curry")._1(v,0);else return 0}};return[o[0],o[1],o[2],function(E){var F=E[2],G=+(E[3][1]!==u);return[G!==0?0:F[0],F[1],F[2]]},o[4],function(E){var F=E[0],G=F[3][0];if(G!==1||w===1)return 0;else{setTimeout(c("bs_curry")._1(F[0],j),1);return 0}},o[6],o[7],o[8],function(E){var F=E[2],G=E[1],H=E[0],I=w!==1?1:0,J=F[0];return c("React").createElement("div",{className:"_2jnq"},c("React").createElement("div",{className:"_2jnr"+(c("bs_js_boolean").to_js_boolean(F[0])?" _2jns":"")},t,J!==0?k(0):null,q!==0?c("ReasonReact").element(0,0,c("messengerThreadPhotoUploaderReact").make(c("bs_curry")._1(G,function(K){return[K]}),[c("bs_curry")._1(G,function(){return 0})],[c("bs_curry")._1(G,function(){return 1})],0,[])):null),c("React").createElement("div",{ref:c("bs_curry")._1(H,n),className:"_2jnt"+(c("bs_js_boolean").to_js_boolean(1-I)?" _1sw_":"")+(c("bs_js_boolean").to_js_boolean(1-q)?" disabled":""),role:I!==0?"":"button",tabIndex:0,onKeyPress:c("bs_curry")._1(H,D),onClick:c("bs_curry")._1(H,C)},c("React").createElement("div",{className:"_2jnu"},I!==0?B(E):c("ReasonReact").element(0,0,c("mercuryThreadTitleReact").make(["_2jnv"],u,x,0,[0],[0],0,[])))))},function(){return[0,[0],[0]]},[w,u],function(E,F){if(typeof E==="number")if(E!==0)return c("bs_block").__(0,[[1,F[1],F[2]]]);else return c("bs_block").__(0,[[0,F[1],F[2]]]);else{var G=E[0];return c("bs_block").__(3,[[0,F[1],F[2]],function(){return c("bs_curry")._1(s,[u.thread_id,G])}])}},o[13]]}g.focusThreadNameInput=j;g.renderSpinner=k;g.focusEditThreadNameButton=l;g.setRefThreadNameInput=m;g.setRefEditThreadNameButton=n;g.component=o;g.make=p}),null);
__d("messengerInfoPanelNameSectionReact",["cx","bs_block","bs_curry","React","ReasonReact","bs_js_primitive","MercuryThreadInfo","MessengerAdminGroupUtils","messengerThreadImageReact","messengerThreadlistRowActionsReact","messengerInfoPanelThreadNameSectionReact","messengerInfoPanelContactNameSectionReact"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("ReasonReact").reducerComponentWithRetainedProps("MessengerInfoPanelNameSectionReact");function j(r,s){s[2][2][0]=r==null?0:[r];return 0}function k(r,s,t){return c("React").createElement("div",{className:"_1jt8"},c("ReasonReact").element(0,0,c("messengerThreadImageReact").make(0,0,[50],r,s,t,[])))}function l(r){return c("bs_block").__(0,[r])}function m(r){return c("bs_block").__(1,[+r])}function n(){return 0}function o(r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P){__p&&__p();var Q=function Q(U){if(U!==N.name)c("bs_curry")._1(C,U);return 1},R=function R(U){var V=U[1],W=+N.is_subscribed&&1-+N.is_canonical&&+c("MessengerAdminGroupUtils").canUpdateThreadCustomization(N,O);return c("React").createElement("div",{className:"_3-ne"},c("ReasonReact").element(0,0,c("messengerThreadlistRowActionsReact").make(0,r,+c("MessengerAdminGroupUtils").isGroupChat(N),+c("MessengerAdminGroupUtils").isJoinableThread(N),+c("MercuryThreadInfo").isMuted(N),U[2][0],+(N.unread_count>0),t,B,v,w,x,y,z,A,[c("bs_curry")._1(V,n)],c("bs_curry")._1(V,m),E,F,G,H,L,0,I,[W],[M],0,N,[])))},S=function S(U){return c("bs_curry")._2(D,U[0],U[1])},T=i.slice();T[3]=function(U){var V=U[2],W=+(U[3]===N);return[V[0],W!==0?V[1]:1,V[2]]};T[9]=function(U){var V=+(N.is_subscribed||N.is_canonical),W;if(r)W=c("ReasonReact").element(0,0,c("messengerInfoPanelContactNameSectionReact").make(r[0],s,u,K,k(J,N,O),[]));else{var X=+c("MessengerAdminGroupUtils").canUpdateThreadCustomization(N,O);W=c("ReasonReact").element(0,[c("bs_curry")._1(U[0],j)],c("messengerInfoPanelThreadNameSectionReact").make(X,c("bs_curry")._1(U[1],Q),S,k(J,N,O),N,c("bs_curry")._1(U[1],l),U[2][1],O,[]))}return c("React").createElement("div",{className:"_1jt6"},W,V!==0?R(U):null)};T[10]=function(){return[0,1,[0]]};T[11]=N;T[12]=function(U,V){__p&&__p();if(typeof U==="number")if(U)return c("bs_block").__(0,[[V[0],1,V[2]]]);else{var W=V[2][0];if(W)return c("bs_block").__(0,[[V[0],0,V[2]]]);else return 0}else if(U.tag)return c("bs_block").__(0,[[U[0],V[1],V[2]]]);else return c("bs_block").__(0,[[V[0],U[0],V[2]]])};return T}var p=c("ReasonReact").wrapReasonForJs(i,function(r){return o(c("bs_js_primitive").null_undefined_to_opt(r.contact),+r.isUserActive,+r.isBlocked,c("bs_js_primitive").null_undefined_to_opt(r.lastActive),r.onDelete,c("bs_js_primitive").null_undefined_to_opt(r.onLeaveGroup),r.onMarkRead,r.onMarkSpam,r.onMarkUnread,r.onMute,r.onArchive,r.onThreadNameChange,r.onThreadPhotoChange,r.onUnmute,r.onIgnore,r.onBlock,r.onUnblock,+r.showBlock,r.participants,c("bs_js_primitive").null_undefined_to_opt(r.platform),+r.showLeaveGroup,+r.showReport,r.thread,r.viewer,[])}),q=50;g.component=i;g.imageSize=q;g.setThreadSectionRef=j;g.renderImage=k;g.handleToggleIsEditingName=l;g.handleActionsToggle=m;g.handleRename=n;g.make=o;g.jsComponent=p}),null);
__d("MessagingThreadCustomizationSource",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({ADMIN_MSG_CHANGE_LINK:"admin_msg",THREAD_INLINE:"thread_inline",JOURNEY_PROMPT:"journey_prompt",JOURNEY_PROMPT_WRITE_IN:"journey_prompt_write_in",PROMO_LINK:"promo_link",SETTINGS:"thread_settings",USER_INFO_ACTION_SHEET:"user_info_action_sheet",ROOM_CREATION:"room_creation",DELETE_ALL_SETTING:"delete_all_setting"})}),null);
__d("gridReact",["utilsRe","Grid.react","ReasonReact","bs_js_null_undefined"],(function a(b,c,d,e,f,g){"use strict";function h(l,m,n,o,p,q,r){return c("ReasonReact").wrapJsForReason(c("Grid.react"),{className:c("bs_js_null_undefined").from_opt(l),cols:m,fixed:c("utilsRe").optionBoolToNullUndefinedBoolean(n),alignv:c("bs_js_null_undefined").from_opt(o),alignh:c("bs_js_null_undefined").from_opt(p),spacing:c("bs_js_null_undefined").from_opt(q)},r)}var i=[h];function j(l,m,n,o){return c("ReasonReact").wrapJsForReason(c("Grid.react").GridItem,{className:c("bs_js_null_undefined").from_opt(l),alignv:c("bs_js_null_undefined").from_opt(m),alignh:c("bs_js_null_undefined").from_opt(n)},o)}var k=[j];g.Grid=i;g.Item=k}),null);
__d("messengerCustomThreadColorButtonReact",["cx","bs_curry","React","keysRe","ReasonReact"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("ReasonReact").statelessComponent("MessengerCustomThreadColorButton");function j(l,m,n,o,p){__p&&__p();var q=function q(t,p){t.preventDefault();return c("bs_curry")._1(o,l)},r=function r(t,p){if(t.keyCode===c("keysRe").$$return){t.preventDefault();return c("bs_curry")._1(o,l)}else return 0},s=i.slice();s[9]=function(t){return c("React").cloneElement(c("React").createElement("div",{className:"_5dr3",role:"button",tabIndex:0,onKeyDown:c("bs_curry")._1(t[0],r),onClick:c("bs_curry")._1(t[0],q)},c("React").createElement("div",{className:"_5dr4",style:{backgroundColor:l}})),{"aria-label":m,"aria-pressed":n})};return s}var k=c("ReasonReact").wrapReasonForJs(i,function(l){return j(l.colorChoice,l.colorName,l.isSelected,l.onChoose,[])});g.component=i;g.make=j;g.jsComponent=k}),null);
__d("messengerChangeColorDialogReact",["ix","cx","fbt","cssVar","bs_array","bs_curry","React","bs_string","gridReact","imageReact","fbglyph","ReasonReact","messengerDialogsRe","messengerDialogReact","messengerDialogBodyReact","MessagingThreadCustomizationConfig","messengerCustomThreadColorButtonReact"],(function a(b,c,d,e,f,g,h,i,j,k){"use strict";__p&&__p();var l=c("ReasonReact").statelessComponent("MessengerChangeColorDialogReact"),m="Unknown Color";function n(o,p,q,r){__p&&__p();var s=function s(v){if(v)return 0;else{if(q)c("bs_curry")._1(q[0],0);return c("messengerDialogsRe").removeDialog(0)}},t=function t(v){var w=+(v===o);if(!w)if(p)c("bs_curry")._1(p[0],v);return s(false)},u=l.slice();u[9]=function(){var v=c("bs_array").concat([["#0084ff"],[c("MessagingThreadCustomizationConfig").colorChoices,0]]),w=c("bs_array").map(function(x){var y=c("MessagingThreadCustomizationConfig").colorNames[x],z=y!==undefined?y:m,A=+(c("bs_string").lowercase(x)===c("bs_string").lowercase(o));return c("ReasonReact").element([x],0,c("gridReact").Item[0](["_gs0"],0,0,[c("React").createElement("div",undefined,A!==0?c("ReasonReact").element(0,0,c("imageReact").make(["_gs2"],0,[h("140201")],0,0,0,0,[])):null,c("ReasonReact").element(0,0,c("messengerCustomThreadColorButtonReact").make(x,z,+(x===o),t,[])))]))},v);return c("ReasonReact").element(0,0,c("messengerDialogReact").Dialog[0](["_gs3"],s,0,0,0,0,[335],[c("ReasonReact").element(0,0,c("messengerDialogReact").Header[0](0,0,j._("Choisissez une couleur pour cette conversation"))),c("ReasonReact").element(0,0,c("messengerDialogBodyReact").make(0,[c("React").createElement("div",{className:"_28he"},j._("Tous les participants de cette conversation le verront.")),c("ReasonReact").element(0,0,c("gridReact").Grid[0](["_gs4"],5,0,0,0,0,w))])),c("ReasonReact").element(0,0,c("messengerDialogReact").Footer[0](0,0,[c("ReasonReact").element(0,0,c("messengerDialogReact").CancelButton[0](0,[]))]))]))};return u}g.component=l;g.unknownColor=m;g.make=n}),null);
__d("messengerChangeColorIconSVGReact",["React"],(function a(b,c,d,e,f,g){"use strict";function h(i,j){return c("React").createElement("div",{className:i},c("React").createElement("svg",{viewBox:"-1 -1 47 47"},c("React").createElement("title",undefined,"colors@2x"),c("React").createElement("path",{d:"M912,1569a3,3,0,1,1-3,3A3,3,0,0,1,912,1569Z",fill:j,transform:"translate(-895.5 -1561.5)"}),c("React").createElement("path",{d:"M924,1569a3,3,0,1,1-3,3A3,3,0,0,1,924,1569Z",fill:j,transform:"translate(-895.5 -1561.5)"}),c("React").createElement("path",{d:"M931,1579a3,3,0,1,1-3,3A3,3,0,0,1,931,1579Z",fill:j,transform:"translate(-895.5 -1561.5)"}),c("React").createElement("path",{d:"M905,1579a3,3,0,1,1-3,3A3,3,0,0,1,905,1579Z",fill:j,transform:"translate(-895.5 -1561.5)"}),c("React").createElement("path",{d:"M918,1562a22,22,0,0,0,0,44,3.67,3.67,0,0,0,2.71-6.14,3.65,3.65,0,0,1,2.74-6.09h4.33A12.23,12.23,0,0,0,940,1581.56C940,1570.75,930.15,1562,918,1562Z",fill:"transparent",stroke:j,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"4%",transform:"translate(-895.5 -1561.5)"})))}g.make=h}),null);
__d("messengerInfoPanelCustomColorReact",["cx","fbt","bs_curry","React","keysRe","ReasonReact","messengerDialogsRe","messengerCustomColorUtilsRe","messengerChangeColorDialogReact","messengerChangeColorIconSVGReact"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=c("ReasonReact").reducerComponent("MessengerInfoPanelCustomColorReact");function k(n,o){var p=o[2][0][0];if(p)return p[0].focus();else return 0}function l(n,o){o[2][0][0]=n==null?0:[n];return 0}function m(n,o,p){__p&&__p();var q=function q(u){return c("messengerDialogsRe").showDialog(function(){return c("ReasonReact").element(0,0,c("messengerChangeColorDialogReact").make(c("messengerCustomColorUtilsRe").customColorOrBlue(n),[o],[c("bs_curry")._1(u,k)],[]))})},r=function r(u,v){u.preventDefault();return q(v[0])},s=function s(u,v){if(u.keyCode===c("keysRe").$$return){u.preventDefault();return q(v[0])}else return 0},t=j.slice();t[9]=function(u){if(n.customization_enabled){var v=c("messengerCustomColorUtilsRe").customColorOrBlue(n);return c("React").createElement("div",{ref:c("bs_curry")._1(u[0],l),className:"_3szn _3szo",tabIndex:0,onKeyDown:c("bs_curry")._1(u[0],s),onClick:c("bs_curry")._1(u[0],r)},c("React").createElement("div",{className:"_3szp"},c("messengerChangeColorIconSVGReact").make("_17vc",v)),c("React").createElement("div",{className:"_3szq"},i._("Changer la couleur")))}else return null};t[10]=function(){return[[0]]};t[12]=function(p,u){return 0};return t}g.component=j;g.handleDialogClose=k;g.setTheRef=l;g.make=m}),null);
__d("MessengerInfoPanelEmoji.react",["cx","fbt","Bootloader","EmojiLikeConstants","Image.react","ImmutableObject","Keys","MercuryShareAttachmentRenderLocations","MessengerHotLikeOutlineSVG.react","MessengerSupportedEmojiUtils","React","messengerDialogsRe"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("React").PropTypes;j=babelHelpers.inherits(m,c("React").PureComponent);k=j&&j.prototype;function m(){__p&&__p();var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.$MessengerInfoPanelEmoji2=function(event){event.preventDefault();this.$MessengerInfoPanelEmoji5()}.bind(this),this.$MessengerInfoPanelEmoji3=function(event){if(event.keyCode===c("Keys").RETURN){event.preventDefault();this.$MessengerInfoPanelEmoji5()}}.bind(this),this.$MessengerInfoPanelEmoji6=function(){if(this.$MessengerInfoPanelEmoji1)this.$MessengerInfoPanelEmoji1.focus()}.bind(this),this.$MessengerInfoPanelEmoji4=function(s){this.$MessengerInfoPanelEmoji1=s}.bind(this),o}m.prototype.render=function(){if(!this.props.thread.customization_enabled)return null;var n=this.props.thread.custom_like_icon&&this.props.thread.custom_like_icon.emoji?c("MessengerSupportedEmojiUtils").getNewEmojiData(this.props.thread.custom_like_icon.emoji,c("EmojiLikeConstants").size.SMALL):null,o=n&&n.url?c("React").createElement(c("Image.react"),{src:n.url,className:"_12cp"}):c("React").createElement(c("MessengerHotLikeOutlineSVG.react"),{className:"_12cq",color:this.props.thread.custom_color?this.props.thread.custom_color:"",height:"60%",location:c("MercuryShareAttachmentRenderLocations").MESSENGER});return c("React").createElement("div",{className:"_3szn _3szo",onClick:this.$MessengerInfoPanelEmoji2,onKeyDown:this.$MessengerInfoPanelEmoji3,ref:this.$MessengerInfoPanelEmoji4,role:"button",tabIndex:"0"},c("React").createElement("div",{className:"_3szp"},o),c("React").createElement("div",{className:"_3szq"},i._("Changer d\u2019emoji")))};m.prototype.$MessengerInfoPanelEmoji5=function(){c("Bootloader").loadModules(["messengerChangeEmojiDialogReact"],function(n){var o=n.jsComponent;c("messengerDialogsRe").showDialog(function(){return c("React").createElement(o,{currentEmoji:this.props.thread.custom_like_icon?this.props.thread.custom_like_icon.emoji:String.fromCodePoint.apply(String,c("EmojiLikeConstants").FB_THUMBS_UP_EMOJI),onClose:this.$MessengerInfoPanelEmoji6,onSave:this.props.onChange})}.bind(this))}.bind(this),"MessengerInfoPanelEmoji.react")};m.propTypes={thread:l.instanceOf(c("ImmutableObject")).isRequired,viewer:l.string.isRequired,onChange:l.func.isRequired};f.exports=m}),null);
__d("messengerInfoPanelEmojiReact",["ReasonReact","MessengerInfoPanelEmoji.react"],(function a(b,c,d,e,f,g){"use strict";function h(i,j,k,l){return c("ReasonReact").wrapJsForReason(c("MessengerInfoPanelEmoji.react"),{thread:i,viewer:j,onChange:k},l)}g.make=h}),null);
__d("MNCommercePromotionManageBlockDialogBootloader.react",["BootloadOnRender.react","JSResource","LazyComponent.react","React"],(function a(b,c,d,e,f,g){"use strict";var h,i;h=babelHelpers.inherits(j,c("React").PureComponent);i=h&&h.prototype;j.prototype.render=function(){return c("React").createElement(c("BootloadOnRender.react"),{component:c("React").createElement(c("LazyComponent.react"),this.props),loader:c("JSResource")("MNCommercePromotionManageBlockDialogContainer.react").__setRef("MNCommercePromotionManageBlockDialogBootloader.react"),placeholder:c("React").createElement("div",null)})};function j(){h.apply(this,arguments)}f.exports=j}),null);
__d("shimButtonReact",["utilsRe","ReasonReact","ShimButton.react","bs_js_null_undefined"],(function a(b,c,d,e,f,g){"use strict";function h(i,j,k,l){return c("ReasonReact").wrapJsForReason(c("ShimButton.react"),{className:c("bs_js_null_undefined").from_opt(i),inline:c("utilsRe").optionBoolToNullUndefinedBoolean(j),onClick:c("bs_js_null_undefined").from_opt(k)},l)}g.make=h}),null);
__d("messengerInfoPanelManageMessagesReact",["cx","fbt","React","utilsRe","MercuryIDs","ReasonReact","shimButtonReact","MercuryParticipants","MNCommerceDialogStateActions","MNCommercePromotionManageBlockDialogBootloader.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=c("ReasonReact").statelessComponent("MessengerInfoPanelManageMessagesReact");function k(m){var n=c("MercuryIDs").getParticipantIDFromFromThreadID(m.thread_id);if(n==null)return 0;else{var o=c("MercuryParticipants").getNow(n);if(o==null)return 0;else return c("utilsRe").isTruthy(o.is_business_enabled)}}function l(m,n,o){__p&&__p();var p=function p(r){r.preventDefault();r.stopPropagation();c("MNCommerceDialogStateActions").showDialog(c("MNCommercePromotionManageBlockDialogBootloader.react"),{pageID:m.other_user_fbid});return 0},q=j.slice();q[9]=function(){if(k(m))return c("React").createElement("div",{className:"_3szn _3szo"},c("React").createElement("div",{className:"_3szp"}),c("ReasonReact").element(0,0,c("shimButtonReact").make(["_3szq"],[1],[p],[i._("G\u00e9rer les messages")])));else return null};return q}g.component=j;g.isBusinessEnabled=k;g.make=l}),null);
__d("MessengerInfoPanelManageReview.react",["cx","fbt","Bootloader","ImmutableObject","MercuryIDs","MercuryParticipants","MNCommerceDialogStateActions","React","ShimButton.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("React").PropTypes;j=babelHelpers.inherits(m,c("React").PureComponent);k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.$MessengerInfoPanelManageReview2=function(event){event.preventDefault();c("Bootloader").loadModules(["MNCommerceReviewDialogContainer.react"],function(s){c("MNCommerceDialogStateActions").showDialog(s,{pageID:this.props.thread.other_user_fbid,onConfirmButtonClick:this.$MessengerInfoPanelManageReview3})}.bind(this),"MessengerInfoPanelManageReview.react")}.bind(this),o}m.prototype.render=function(){if(!this.$MessengerInfoPanelManageReview1())return null;return c("React").createElement("div",{className:"_3szn _3szo"},c("React").createElement("div",{className:"_3szp"}),c("React").createElement(c("ShimButton.react"),{className:"_3szq",inline:true,onClick:this.$MessengerInfoPanelManageReview2},i._("Ajouter un commentaire")))};m.prototype.$MessengerInfoPanelManageReview1=function(){var n=c("MercuryIDs").getParticipantIDFromFromThreadID(this.props.thread.thread_id);if(!n)return false;var o=c("MercuryParticipants").getNow(n);return!!(o&&o.accepts_messenger_user_feedback)};m.prototype.$MessengerInfoPanelManageReview3=function(n,o,p){if(o===0)return;c("Bootloader").loadModules(["MessengerPlatformBotReviewWriteDataManager"],function(q){q.review(n,o,p.trim())},"MessengerInfoPanelManageReview.react")};m.propTypes={thread:l.instanceOf(c("ImmutableObject")).isRequired,viewer:l.string.isRequired};f.exports=m}),null);
__d("messengerInfoPanelManageReviewReact",["ReasonReact","MessengerInfoPanelManageReview.react"],(function a(b,c,d,e,f,g){"use strict";function h(i,j,k){return c("ReasonReact").wrapJsForReason(c("MessengerInfoPanelManageReview.react"),{thread:i,viewer:j},k)}g.make=h}),null);
__d("messengerContactListReact",["utilsRe","ReasonReact","bs_js_null_undefined","MessengerContactList.react"],(function a(b,c,d,e,f,g){"use strict";function h(i,j,k,l,m,n,o,p){return c("ReasonReact").wrapJsForReason(c("MessengerContactList.react"),{contactAdapter:c("bs_js_null_undefined").from_opt(i),disableRole:c("utilsRe").optionBoolToNullUndefinedBoolean(j),listSections:k,onSelect:l,rowClassName:c("bs_js_null_undefined").from_opt(m),viewer:n,thread:c("bs_js_null_undefined").from_opt(o)},p)}g.make=h}),null);
__d("messengerEditNicknameDialogReact",["cx","fbt","bs_curry","React","MercuryIDs","ReasonReact","messengerDialogReact","messengerDialogBodyReact","messengerTextWithEmojiInputReact","MessagingThreadCustomizationConfig"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=c("ReasonReact").reducerComponent("MessengerEditNicknameDialogReact");function k(m,n){n[2][0][0]=m==null?0:[m];return 0}function l(m,n,o,p,q,r){__p&&__p();var s=function s(r,u){__p&&__p();var v=u[2][0][0],w=v?[v[0].getValue()]:0,x=0;if(w)if(w[0]===""){if(n)x=1}else x=1;if(x===1)if(w!==n){var y=c("MercuryIDs").getUserIDFromParticipantID(m.id);if(!(y==null))c("bs_curry")._1(o,[y,w[0]])}return c("bs_curry")._1(p,false)},t=j.slice();t[9]=function(u){var v=m.name,w=c("MercuryIDs").getUserIDFromParticipantID(m.id),x,y=0;if(!(w==null)&&w===q)x=i._("Modifier votre pseudo");else y=1;if(y===1)x=i._("Modifier le pseudo de {personName}",[i.param("personName",v)]);return c("ReasonReact").element(0,0,c("messengerDialogReact").Dialog[0](["_2c1u"],p,0,0,0,0,[400],[c("ReasonReact").element(0,0,c("messengerDialogReact").Header[0](0,0,x)),c("ReasonReact").element(0,0,c("messengerDialogBodyReact").make(0,[c("React").createElement("div",{className:"_-bo"},i._("Tous les participants de cette conversation le verront.")),c("ReasonReact").element(0,[c("bs_curry")._1(u[0],k)],c("messengerTextWithEmojiInputReact").make(["_2c1v"],[c("bs_curry")._1(u[0],s)],[c("MessagingThreadCustomizationConfig").maxNicknameLength],0,[v],n,[]))])),c("ReasonReact").element(0,0,c("messengerDialogReact").Footer[0](0,0,[c("ReasonReact").element(0,0,c("messengerDialogReact").CancelButton[0](0,[])),c("ReasonReact").element(0,0,c("messengerDialogReact").Button[0](0,[i._("Enregistrer")],0,0,[c("bs_curry")._1(u[0],s)],[0],0,0,[]))]))]))};t[10]=function(){return[[0]]};t[12]=function(r,u){return 0};return t}g.component=j;g.setInput=k;g.make=l}),null);
__d("messengerScrollableAreaReact",["ReasonReact","bs_js_null_undefined","MessengerScrollableArea.react"],(function a(b,c,d,e,f,g){"use strict";function h(i,j){return c("ReasonReact").wrapJsForReason(c("MessengerScrollableArea.react"),{height:c("bs_js_null_undefined").from_opt(i)},j)}g.make=h}),null);
__d("messengerEditNicknamesDialogReact",["cx","fbt","bs_curry","immutable","MercuryIDs","ReasonReact","bs_js_primitive","ImmutableObject","messengerDialogsRe","messengerDialogReact","MessengerAdminGroupUtils","messengerDialogBodyReact","messengerContactListReact","messengerScrollableAreaReact","messengerEditNicknameDialogReact"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();function j(m,n){var o=c("MercuryIDs").getUserIDFromParticipantID(n.id),p;if(o==null)p=[n.name,""];else if(m==null)p=[n.name,""];else{var q=m[o];p=q!==undefined?[q,n.name]:[n.name,""]}return new(c("ImmutableObject"))({alias:n.alias,uid:n.id,photo:n.image_src,title:p[0],subtitle:p[1],type:n.type,isMessengerUser:n.is_messenger_user,href:n.href,isWorkUser:undefined,timezone:undefined,participants:undefined,thread:undefined})}var k=c("ReasonReact").statelessComponent("MessengerEditNicknamesDialogReact");function l(m,n,o,p,q,r){__p&&__p();var s=function s(v){if(v)return 0;else{c("bs_curry")._1(p,0);return c("messengerDialogsRe").removeAllDialogs(0)}},t=function t(v,r){var w=c("MercuryIDs").getUserIDFromParticipantID(v.id),x=n.custom_nickname,y=!(w==null)&&!(x==null)?c("bs_js_primitive").undefined_to_opt(x[w]):0;return c("messengerDialogsRe").showDialog(function(){return c("ReasonReact").element(0,0,c("messengerEditNicknameDialogReact").make(v,y,o,s,q,[]))})},u=k.slice();u[9]=function(){__p&&__p();var v=m.filter(function(x,r,y){if(x==null)return false;else{var z=+c("MessengerAdminGroupUtils").isJoinableThread(n),A=c("MercuryIDs").getUserIDFromParticipantID(x.id);if(z!==0&&!(!(A==null)&&A===q))return false;else return true}}).toArray(),w=n.custom_nickname;return c("ReasonReact").element(0,0,c("messengerDialogReact").Dialog[0](["_4h9n"],s,0,0,0,["default"],[350],[c("ReasonReact").element(0,0,c("messengerDialogReact").Header[0](0,0,[c("ReasonReact").element(0,0,c("messengerDialogReact").CancelButton[0](0,[])),c("ReasonReact").element(0,0,c("messengerDialogReact").Title[0](0,[i._("Modifier les surnoms")]))])),c("ReasonReact").element(0,0,c("messengerDialogBodyReact").make(["_4h9o"],[c("ReasonReact").element(0,0,c("messengerScrollableAreaReact").make(["100%"],[c("ReasonReact").element(0,0,c("messengerContactListReact").make([function(x){return j(w,x)}],[1],c("immutable").OrderedMap([[null,v]]),t,["_44kr"],q,[n],[]))]))]))]))};return u}g.fromMercuryParticipant=j;g.component=k;g.make=l}),null);
__d("messengerEditNicknamesIconSVGReact",["React"],(function a(b,c,d,e,f,g){"use strict";function h(i,j){return c("React").createElement("div",{className:i},c("React").createElement("svg",{viewBox:"0 0 38 37.01"},c("React").createElement("title",undefined,"nicknames"),c("React").createElement("path",{d:"M899,1204h38v2H899v-2Z",fill:j,fillRule:"evenodd",transform:"translate(-898.99 -1168.99)"}),c("React").createElement("path",{d:"M927.57,1172.17l-22.32,22.36-0.72,5,5-.72,22.32-22.36ZM908.8,1196.6l-1.41-1.41L929,1173.61l1.41,1.41Z",fill:j,fillRule:"evenodd",transform:"translate(-898.99 -1168.99)"}),c("React").createElement("path",{d:"M932.93,1175.36l2.07-2.13a6,6,0,0,0-1.33-3,5.72,5.72,0,0,0-2.91-1.28l-2.07,2.13Z",fill:j,fillRule:"evenodd",transform:"translate(-898.99 -1168.99)"})))}g.make=h}),null);
__d("messengerInfoPanelNicknamesReact",["cx","fbt","bs_curry","React","keysRe","ReasonReact","messengerDialogsRe","messengerCustomColorUtilsRe","messengerEditNicknamesDialogReact","messengerEditNicknamesIconSVGReact"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();function j(n,o){var p=o[2][0][0];if(p)return p[0].focus();else return 0}function k(n,o){o[2][0][0]=n==null?0:[n];return 0}var l=c("ReasonReact").reducerComponent("MessengerInfoPanelNicknamesReact");function m(n,o,p,q,r){__p&&__p();var s=function s(w){return c("messengerDialogsRe").showDialog(function(){return c("ReasonReact").element(0,0,c("messengerEditNicknamesDialogReact").make(n,o,q,c("bs_curry")._1(w[0],j),p,[]))})},t=function t(w,x){w.preventDefault();return s(x)},u=function u(w,x){if(w.keyCode===c("keysRe").$$return){w.preventDefault();return s(x)}else return 0},v=l.slice();v[9]=function(w){if(o.customization_enabled){var x=c("messengerCustomColorUtilsRe").customColorOrBlue(o);return c("React").createElement("div",{ref:c("bs_curry")._1(w[0],k),className:"_3szn _3szo",role:"button",tabIndex:0,onKeyDown:c("bs_curry")._1(w[0],u),onClick:c("bs_curry")._1(w[0],t)},c("React").createElement("div",{className:"_3szp"},c("messengerEditNicknamesIconSVGReact").make("_5odt",x)),c("React").createElement("div",{className:"_3szq"},i._("Modifier les surnoms")))}else return null};v[10]=function(){return[[0]]};v[12]=function(r,w){return 0};return v}g.handleDialogClose=j;g.setHandleRef=k;g.component=l;g.make=m}),null);
__d("BootloaderRe",["bs_curry"],(function a(b,c,d,e,f,g){"use strict";function h(i){var j=function j(k){return c("bs_curry")._1(i[0],function(l){return c("bs_curry")._1(k,l.bootloadable)})};return[j]}g.Create=h}),null);
__d("MessengerContentSearchFunnelLogger",["FunnelLogger","MessengerContentSearchFunnelLoggerConstants"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("MessengerContentSearchFunnelLoggerConstants").FUNNEL_NAME,i=c("MessengerContentSearchFunnelLoggerConstants").FUNNEL_LOGGER_EVENTS,j=null,k=0,l=0;function m(s,t){if(j!==null)c("FunnelLogger").appendActionWithPayload(h,i.NUM_BROWSE_ACTIONS_WITHIN_THREAD,{threadID:j,numBrowseActions:k});j=null;k=0;l=0;c("FunnelLogger").startFunnel(h);if(t)c("FunnelLogger").addFunnelTag(h,t);c("FunnelLogger").appendActionWithPayloadIfNew(h,i.INITIATE_CONTENT_SEARCH,{query:s})}function n(s){c("FunnelLogger").appendActionWithPayload(h,i.THREAD_IMPRESSIONS,{impressionList:s})}function o(s){c("FunnelLogger").appendActionWithPayload(h,i.LOAD_MORE_THREADS,{impressionList:s})}function p(s){if(j!==null)c("FunnelLogger").appendActionWithPayload(h,i.NUM_BROWSE_ACTIONS_WITHIN_THREAD,{threadID:j,numBrowseActions:k});j=s;k=0;c("FunnelLogger").appendActionWithPayload(h,i.SELECT_THREAD,s)}function q(s,t){j=t;k+=1;l+=1;c("FunnelLogger").appendActionWithPayload(h,i.BROWSE_MESSAGE_IN_THREAD,{threadID:t,messageID:s})}function r(s){if(j!==null)c("FunnelLogger").appendActionWithPayload(h,i.NUM_BROWSE_ACTIONS_WITHIN_THREAD,{threadID:j,numBrowseActions:k});if(s)c("FunnelLogger").appendActionWithTagAndPayloadIfNew(h,i.END_CONTENT_SEARCH,s,{threadID:j,totalBrowseActions:l});else c("FunnelLogger").appendActionWithPayloadIfNew(h,i.END_CONTENT_SEARCH,{threadID:j,totalBrowseActions:l});c("FunnelLogger").endFunnel(h)}f.exports={browseMessageInThread:q,endFunnel:r,logLoadMoreThreads:o,logThreadImpressions:n,logThreadSelect:p,startFunnel:m}}),null);
__d("messengerThreadSearchIconSVGReact",["React"],(function a(b,c,d,e,f,g){"use strict";function h(i,j){return c("React").createElement("div",{className:i},c("React").createElement("svg",{viewBox:"8 8 48 48"},c("React").createElement("title",undefined,"search conversation"),c("React").createElement("circle",{cx:"28",cy:"28",fill:"none",r:"14",stroke:j,strokeMiterlimit:"10",strokeWidth:"2"}),c("React").createElement("path",{clipRule:"evenodd",d:"M50,50L37.9,37.9",fill:"none",fillRule:"evenodd",stroke:j,strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"2"})))}g.make=h}),null);
__d("messengerInfoPanelSearchReact",["cx","fbt","bs_curry","React","keysRe","Bootloader","ReasonReact","BootloaderRe","MessengerActions","MessengerStateStore","messengerCustomColorUtilsRe","messengerThreadSearchIconSVGReact","MessengerContentSearchFunnelLogger","MessengerContentSearchFunnelLoggerConstants"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=c("ReasonReact").statelessComponent("MessengerInfoPanelSearchReact");function k(s){c("Bootloader").loadModules(["BootloadableMessengerContentSearchFunnelLoggerRe"],s,"messengerInfoPanelSearchReact");return 0}var l=[k],m=c("BootloaderRe").Create(l);function n(s,t){c("MessengerContentSearchFunnelLogger").startFunnel(s,c("MessengerContentSearchFunnelLoggerConstants").SEARCH_WITHIN_THREAD);return 0}function o(){var s=c("MessengerStateStore").getState().query,t=+(s==null);c("MessengerActions").changeQuery(t!==0?"":undefined);return 0}function p(s){var t=c("MessengerStateStore").getState().query,u=t==null?"":t;s.preventDefault();c("bs_curry")._1(m[0],function(v){return n(u,v)});return o(0)}function q(s){if(s.keyCode===c("keysRe").$$return){s.preventDefault();return o(0)}else return 0}function r(s,t){var u=j.slice();u[9]=function(){var v=c("messengerCustomColorUtilsRe").customColorOrBlue(s);return c("React").createElement("div",{className:"_3szn _3szo",tabIndex:0,onKeyDown:q,onClick:p},c("React").createElement("div",{className:"_3szp"},c("messengerThreadSearchIconSVGReact").make("_5odt",v)),c("React").createElement("div",{className:"_3szq"},i._("Rechercher dans la conversation")))};return u}g.component=j;g.BootloadableMessengerContentSearchFunnelLoggerRe=l;g.LoadableMessengerContentSearchFunnelLoggerRe=m;g.handleLoggerLoad=n;g.showQuery=o;g.handleSearchThreadClick=p;g.handleSearchThreadKeyDown=q;g.make=r}),null);
__d("leftRightReact",["ReasonReact","LeftRight.react","bs_js_null_undefined"],(function a(b,c,d,e,f,g){"use strict";function h(i,j){return c("ReasonReact").wrapJsForReason(c("LeftRight.react"),{className:c("bs_js_null_undefined").from_opt(i)},j)}g.make=h}),null);
__d("MessengerCompositeMuteSettingsDialogBootloader.react",["BootloadOnRender.react","JSResource","LazyComponent.react","React"],(function a(b,c,d,e,f,g){"use strict";var h,i;h=babelHelpers.inherits(j,c("React").PureComponent);i=h&&h.prototype;j.prototype.render=function(){return c("React").createElement(c("BootloadOnRender.react"),{component:c("React").createElement(c("LazyComponent.react"),this.props),loader:c("JSResource")("messengerCompositeMuteSettingsDialogReactComponent").__setRef("MessengerCompositeMuteSettingsDialogBootloader.react"),placeholder:c("React").createElement("div",null)})};function j(){h.apply(this,arguments)}f.exports=j}),null);
__d("messengerCompositeMuteSettingsDialogBootloaderReact",["ReasonReact","MessengerCompositeMuteSettingsDialogBootloader.react"],(function a(b,c,d,e,f,g){"use strict";function h(i,j,k,l,m,n,o,p,q){return c("ReasonReact").wrapJsForReason(c("MessengerCompositeMuteSettingsDialogBootloader.react"),{isMuted:i,mentionsMuted:j,reactionsMuted:k,showMentions:l,onMentionsMute:m,onReactionsMute:n,onMute:o,onToggle:p},q)}g.make=h}),null);
__d("messengerNotificationsIconSVGReact",["React"],(function a(b,c,d,e,f,g){"use strict";function h(i,j){return c("React").createElement("div",{className:i},c("React").createElement("svg",{height:"24",width:"24",viewBox:"0 0 18 18"},c("React").createElement("defs",undefined,c("React").createElement("circle",{id:"path-1",cx:"1",cy:"1",r:"1"})),c("React").createElement("g",{fill:"none",fillRule:"evenodd"},c("React").createElement("rect",{id:"Bounds",height:"18",width:"18",x:"0",y:"0"}),c("React").createElement("path",{d:"M9,16.5 C9.828,16.5 10.5,15.828 10.5,15 L7.5,15\nC7.5,15.828 8.172,16.5 9,16.5",fill:j}),c("React").createElement("path",{d:"M13,10 L13,7.5 C13,5.562 11.622,3.948 9.793,3.58\nC9.914,3.414 10,3.221 10,3 C10,2.448 9.552,2 9,2 C8.448,2\n8,2.448 8,3 C8,3.221 8.086,3.414 8.207,3.58 C6.378,3.948\n5,5.562 5,7.5 L5,10 C5,11.105 4,12 4,12 L3.70537567,12.2946243\nC3.31580745,12.6841926 3.31640625,13.3164062\n3.70537567,13.7053757 L4,14 L14,14 L14.2946243,13.7053757\nC14.6841926,13.3158074 14.6835937,12.6835938\n14.2946243,12.2946243 L14,12 C14,12 13,11.105 13,10 Z",stroke:j}))))}g.make=h}),null);
__d("messengerNotificationsButtonReact",["cx","fbt","bs_curry","React","keysRe","formatDate","ReasonReact","leftRightReact","messengerDialogsRe","messengerCustomColorUtilsRe","messengerNotificationsIconSVGReact","messengerCompositeMuteSettingsDialogBootloaderReact"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();function j(n,o){if(n)return 0;else{c("messengerDialogsRe").removeDialog(0);var p=o[2][0][0];if(p)return p[0].focus();else return 0}}function k(n,o){o[2][0][0]=n==null?0:[n];return 0}var l=c("ReasonReact").reducerComponent("MessengerNotificationsButtonReact");function m(n,o,p,q,r,s,t,u,v){__p&&__p();var w=function w(B){return c("messengerDialogsRe").showDialog(function(){return c("ReasonReact").element(0,0,c("messengerCompositeMuteSettingsDialogBootloaderReact").make(n,o,q,1-+u.is_canonical,r,t,s,c("bs_curry")._1(B[0],j),[]))})},x=function x(B,C){B.preventDefault();B.stopPropagation();return w(C)},y=function y(B,C){if(B.keyCode===c("keysRe").$$return){B.preventDefault();B.stopPropagation();return w(C)}else return 0},z=function z(){__p&&__p();if(p){var B=p[0];if(B!==0){var C;if(B>0)if(B<86401)C=0;else{var D=+(new Date(B*1e3).getDay()===new Date().getDay());C=D?[i._("D\u00e9sactiv\u00e9es jusqu\u2019\u00e0 {time}",[i.param("time",c("formatDate")(B,"g:ia"))])]:[i._("D\u00e9sactiver jusqu\u2019\u00e0 {time} demain",[i.param("time",c("formatDate")(B,"g:ia"))])]}else C=B===-1?[i._("D\u00e9sactiv\u00e9es ind\u00e9finiment")]:0;if(C)return c("React").createElement("span",{className:"_3x6v"},C[0]);else return null}else return null}else return null},A=l.slice();A[9]=function(B){var C=i._("Notifications"),D=c("messengerCustomColorUtilsRe").customColorOrBlue(u);return c("React").createElement("div",{ref:c("bs_curry")._1(B[0],k),className:"_3szn _3szo",role:"button",tabIndex:0,onKeyDown:c("bs_curry")._1(B[0],y),onClick:c("bs_curry")._1(B[0],x)},c("React").createElement("div",{className:"_3szp"},c("messengerNotificationsIconSVGReact").make("_3wh2",D)),c("ReasonReact").element(0,0,c("leftRightReact").make(["_3szq"],[C,z(0)])))};A[10]=function(){return[[0]]};A[12]=function(v,B){return 0};return A}g.handleDialogToggle=j;g.setRef=k;g.component=l;g.make=m}),null);
__d("messengerMuteButtonContainerReact",["bs_curry","bs_js_boolean","ReasonReact","MercuryThreadInfo","MercuryThreadActions","messengerNotificationsButtonReact"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("ReasonReact").statelessComponent("MessengerMuteButtonContainerReact");function i(j,k,l){__p&&__p();var m=function m(q,l){c("MercuryThreadActions").getForFBID(k).updateMuteSetting(j.thread_id,q);return 0},n=function n(q,l){c("MercuryThreadActions").getForFBID(k).updateMentionsMuteSetting(j.thread_id,c("bs_js_boolean").to_js_boolean(q));return 0},o=function o(q,l){c("MercuryThreadActions").getForFBID(k).updateReactionsMuteSetting(j.thread_id,c("bs_js_boolean").to_js_boolean(q));return 0},p=h.slice();p[9]=function(q){var r=+c("MercuryThreadInfo").isMuted(j),s=c("MercuryThreadInfo").getMuteSetting(j);return c("ReasonReact").element(0,0,c("messengerNotificationsButtonReact").make(r,+c("MercuryThreadInfo").areMentionsMuted(j),s==null?0:[s],+c("MercuryThreadInfo").areReactionsMuted(j),c("bs_curry")._1(q[0],n),c("bs_curry")._1(q[0],m),c("bs_curry")._1(q[0],o),j,[]))};return p}g.component=h;g.make=i}),null);
__d("messengerInfoPanelThreadOptionsContainerReact",["fbt","bs_curry","WorkGKs","CurrentUser","ReasonReact","bs_js_primitive","MercuryThreadActions","MessengerAdminGroupUtils","messengerInfoPanelEmojiReact","messengerInfoPanelSearchReact","messengerInfoPanelSectionReact","messengerInfoPanelNicknamesReact","messengerMuteButtonContainerReact","MessagingThreadCustomizationSource","messengerInfoPanelCustomColorReact","messengerInfoPanelManageReviewReact","messengerInfoPanelManageMessagesReact"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("ReasonReact").statelessComponent("MessengerInfoPanelThreadOptionsContainerReact");function j(l,m,n,o,p,q){__p&&__p();var r=function r(v,q){c("MercuryThreadActions").getForFBID(o).changeThreadColor(n.thread_id,v,c("MessagingThreadCustomizationSource").SETTINGS);return 0},s=function s(v,q){c("MercuryThreadActions").getForFBID(o).changeThreadEmoji(n.thread_id,v,c("MessagingThreadCustomizationSource").SETTINGS);return 0},t=function t(v,q){c("MercuryThreadActions").getForFBID(o).changeThreadNicknames(n.thread_id,v[0],v[1],c("MessagingThreadCustomizationSource").SETTINGS);return 0},u=i.slice();u[9]=function(v){if(n.is_subscribed){var w=+c("CurrentUser").isWorkUser(),x=+c("MessengerAdminGroupUtils").canUpdateThreadCustomization(n,o),y=x&&(1-w||+c("WorkGKs").workchat_thread_color_customization),z=y!==0?c("ReasonReact").element(0,0,c("messengerInfoPanelCustomColorReact").make(n,c("bs_curry")._1(v[0],r),[])):null,A=x&&(1-w||+c("WorkGKs").workchat_thread_emoji_customization),B=A!==0?c("ReasonReact").element(0,0,c("messengerInfoPanelEmojiReact").make(n,o,c("bs_curry")._1(v[0],s),[])):null,C=c("ReasonReact").element(0,0,c("messengerInfoPanelSearchReact").make(n,[])),D=1-w||+c("WorkGKs").workchat_thread_nickname_customization,E=D!==0?c("ReasonReact").element(0,0,c("messengerInfoPanelNicknamesReact").make(m,n,o,c("bs_curry")._1(v[0],t),[])):null,F=c("ReasonReact").element(0,0,c("messengerInfoPanelManageMessagesReact").make(n,o,[])),G=c("ReasonReact").element(0,0,c("messengerInfoPanelManageReviewReact").make(n,o,[])),H=c("ReasonReact").element(0,0,c("messengerMuteButtonContainerReact").make(n,o,[]));return c("ReasonReact").element(0,0,c("messengerInfoPanelSectionReact").make(c("bs_js_primitive").null_undefined_to_opt(n.custom_color),[1],[l],[p],[h._("Options")],[C,E,z,B,F,G,H]))}else return null};return u}var k=c("ReasonReact").wrapReasonForJs(i,function(l){return j(+l.isCollapsed,l.participants,l.thread,l.viewer,l.onToggle,[])});g.component=i;g.make=j;g.jsComponent=k}),null);
__d("messengerDaysInStreakReact",["cx","fbt","React","bs_pervasives","ReasonReact"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=c("ReasonReact").statelessComponent("MessengerDaysInStreakReact");function k(m,n){__p&&__p();var o=j.slice();o[9]=function(){var p=m.days_in_streak;if(p==null)return null;else if(p<1)return null;else{var q=c("bs_pervasives").string_of_int(p);return c("React").createElement("div",{className:"_60oa"},i._("S\u00e9rie de messages\u00a0: {daysInStreak}",[i.param("daysInStreak",q)]))}};return o}var l=c("ReasonReact").wrapReasonForJs(j,function(m){return k(m.thread,[])});g.component=j;g.make=k;g.jsComponent=l}),null);
__d("numberRe",["ReasonReact","Number.react"],(function a(b,c,d,e,f,g){"use strict";function h(i,j){return c("ReasonReact").wrapJsForReason(c("Number.react"),{value:i},j)}g.make=h}),null);
__d("messengerMessageCountReact",["cx","fbt","bs_block","bs_curry","React","numberRe","ReasonReact","bs_js_primitive","MercuryThreadInformer"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();function j(p){return c("bs_block").__(0,[p])}function k(p){return c("bs_block").__(1,[p])}var l=c("ReasonReact").reducerComponentWithRetainedProps("MessengerMessageCountReact");function m(p,q){if(p==null)return 0;else return c("bs_js_primitive").undefined_to_opt(p[q])}function n(p,q,r){__p&&__p();return[l[0],l[1],l[2],function(s){var t=s[2],u=+(s[3][0]===p.thread_id);return[u!==0?t[0]:p.message_count,t[1],t[2]]},function(s){var t=s[2],u=s[1],v=c("bs_curry")._1(u,j),w=c("bs_curry")._1(u,k),x=c("MercuryThreadInformer").getForFBID(q),y=[x.subscribe("messages-received",function(r,A){return c("bs_curry")._1(v,A)})],z=[x.subscribe("messages-reordered",function(r,A){return c("bs_curry")._1(w,A)})];t[1][0]=y;t[2][0]=z;return 0},l[5],function(s){var t=s[2],u=t[1][0];if(u)u[0].unsubscribe();var v=t[2][0];if(v){v[0].unsubscribe();return 0}else return 0},l[7],l[8],function(s){return c("React").createElement("div",{className:"_60oa"},i._("Messages envoy\u00e9s\u00a0:"),c("React").createElement("div",{className:"_397l"},c("ReasonReact").element(0,0,c("numberRe").make(s[2][0],[]))))},function(){return[p.message_count,[0],[0]]},[p.thread_id],function(s,t){__p&&__p();if(s.tag){var u=m(s[0],p.thread_id);if(u&&u[0].source==="client_delete_messages")return c("bs_block").__(0,[[t[0]-1|0,t[1],t[2]]]);else return 0}else{var v=m(s[0],p.thread_id);if(v)return c("bs_block").__(0,[[t[0]+v[0].length|0,t[1],t[2]]]);else return 0}},l[13]]}var o=c("ReasonReact").wrapReasonForJs(l,function(p){return n(p.thread,p.viewer,[])});g.received=j;g.deleted=k;g.component=l;g.getThreadPayloadFromInform=m;g.make=n;g.jsComponent=o}),null);
__d("messengerInfoPanelThreadStatsContainerReact",["fbt","gkx","ReasonReact","bs_js_primitive","MessengerConfig","messengerDaysInStreakReact","messengerMessageCountReact","messengerInfoPanelSectionReact"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("ReasonReact").statelessComponent("MessengerInfoPanelThreadStatsContainerReact");function j(m){return+(m.message_count<10)}function k(m,n,o,p,q){var r=i.slice();r[9]=function(){if(!n.is_subscribed||n.message_count<10||!c("MessengerConfig").ThreadStatsMessageCount)return null;else{var s=+c("MessengerConfig").ThreadStatsMessageCount,t=s!==0?c("ReasonReact").element(0,0,c("messengerMessageCountReact").make(n,o,[])):null,u=+c("gkx")("AT5P9nw9kIvU0pGUAWQauISN-gKSsB2ZLU8GO7kKi3CIkd5_UHYoeBCxVl_IPQmJhHOm3QU7FkX9YJHSEuv0U2wQ"),v=u!==0?c("ReasonReact").element(0,0,c("messengerDaysInStreakReact").make(n,[])):null;return c("ReasonReact").element(0,0,c("messengerInfoPanelSectionReact").make(c("bs_js_primitive").null_undefined_to_opt(n.custom_color),[1],[m],[p],[h._("D\u00e9tails de la conversation")],[t,v]))}};return r}var l=c("ReasonReact").wrapReasonForJs(i,function(m){return k(+m.isCollapsed,m.thread,m.viewer,m.onToggle,[])});g.component=i;g.isNewThread=j;g.make=k;g.jsComponent=l}),null);
__d("MessengerThreadInfoPanel.react",["cx","fbt","CurrentUser","immutable","ImmutableObject","Link.react","MercuryAttachment","MercuryIDs","MercuryThreadInfo","MercuryMessageStore","MessageThreadAssociatedObjectUtils","messengerAddToConversationDialogReact","MessengerAdminGroupUtils","MessengerConfig","MessengerContactAdapters","messengerDialogsRe","messengerDomIDsRe","MessengerInfoPanelAssociatedObjectSection.react","MessengerInfoPanelGroupSection.react","messengerInfoPanelNameSectionReact","MessengerInfoPanelPeopleSection.react","messengerInfoPanelSectionReact","messengerInfoPanelThreadOptionsContainerReact","messengerInfoPanelThreadStatsContainerReact","MessengerSharedLinksContainer.react","MessengerSharedLinksContainerRoute","MessengerSharedPhotosContainer.react","MessengerSharedPhotosContainerRoute","MessengerSharedFilesContainer.react","MessengerSharedFilesContainerRoute","mercuryBlockedParticipantsRe","React","react-relay/classic/container/RelayRootContainer","SubscriptionsHandler","gkx"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("messengerAddToConversationDialogReact").jsComponent,m=c("messengerDomIDsRe").ids,n=c("messengerInfoPanelNameSectionReact").jsComponent,o=c("messengerInfoPanelSectionReact").jsComponent,p=c("messengerInfoPanelThreadOptionsContainerReact").jsComponent,q=c("messengerInfoPanelThreadStatsContainerReact").jsComponent,r=c("mercuryBlockedParticipantsRe").get(),s=c("React").PropTypes;j=babelHelpers.inherits(t,c("React").PureComponent);k=j&&j.prototype;function t(){__p&&__p();var u,v;for(var w=arguments.length,x=Array(w),y=0;y<w;y++)x[y]=arguments[y];return v=(u=k.constructor).call.apply(u,[this].concat(x)),this.$MessengerThreadInfoPanel2=undefined,this.$MessengerThreadInfoPanel3=false,this.state={sharedPhotoSection:null,sharedFilesSection:null},this.$MessengerThreadInfoPanel12=function(){this.$MessengerThreadInfoPanel3=false}.bind(this),this.$MessengerThreadInfoPanel15=function(z,event){this.props.onContactSelect(c("MessengerContactAdapters").fromMercuryParticipant(z))}.bind(this),this.$MessengerThreadInfoPanel14=function(z,A){this.props.onContactAction(z,c("MessengerContactAdapters").fromMercuryParticipant(A))}.bind(this),this.$MessengerThreadInfoPanel13=function(event){event.preventDefault();c("messengerDialogsRe").showDialog(function(){return c("React").createElement(l,{thread:this.props.thread,viewer:this.props.viewer})}.bind(this))}.bind(this),v}t.prototype.componentWillMount=function(){this.subscribeStoreUpdate(this.props.thread.thread_id)};t.prototype.componentWillReceiveProps=function(u){if(u.thread.thread_id!==this.props.thread.thread_id||u.photosSectionCollapsed!==this.props.photosSectionCollapsed||u.filesSectionCollapsed!==this.props.filesSectionCollapsed){this.$MessengerThreadInfoPanel2&&this.$MessengerThreadInfoPanel2.release();this.subscribeStoreUpdate(u.thread.thread_id);this.$MessengerThreadInfoPanel3=true;setTimeout(function(){return this.setState({sharedPhotoSection:this.$MessengerThreadInfoPanel4(true),sharedFilesSection:this.$MessengerThreadInfoPanel5(true)})}.bind(this),1e3)}};t.prototype.subscribeStoreUpdate=function(u){__p&&__p();this.$MessengerThreadInfoPanel1=new(c("MercuryMessageStore"))(u);this.$MessengerThreadInfoPanel2=new(c("SubscriptionsHandler"))();this.$MessengerThreadInfoPanel2.addSubscriptions(this.$MessengerThreadInfoPanel1.subscribe(function(v){__p&&__p();if(v.messages.length<1)return;var w=v.eventType==c("MercuryMessageStore").MESSAGES_RECEIVED,x=v.eventType==c("MercuryMessageStore").MESSAGES_CHANGED,y=v.messages[v.messages.length-1];if(!w&&!x)return;if(y.has_attachment&&y.attachments.length>0){var z=y.attachments.find(function(A){return c("MercuryAttachment").isPhotoAttachment(A)||c("MercuryAttachment").isVideoAttachment(A)});if(z){this.$MessengerThreadInfoPanel3=true;setTimeout(function(){return this.setState({sharedPhotoSection:this.$MessengerThreadInfoPanel4(true),sharedFilesSection:this.$MessengerThreadInfoPanel5(true)})}.bind(this),1e3)}}}.bind(this)))};t.prototype.componentWillUnmount=function(){this.$MessengerThreadInfoPanel2&&this.$MessengerThreadInfoPanel2.release()};t.prototype.componentDidUpdate=function(){if(!this.$MessengerThreadInfoPanel3)this.setState({sharedPhotoSection:null,sharedFilesSection:null})};t.prototype.render=function(){var u=this.props,v=u.viewer,w=u.thread,x=c("MercuryIDs").getParticipantIDFromUserID(v),y=w.participants&&w.participants.indexOf(x)!==-1,z=this.$MessengerThreadInfoPanel3?this.state.sharedFilesSection:this.$MessengerThreadInfoPanel5(false),A=this.$MessengerThreadInfoPanel3?this.state.sharedPhotoSection:this.$MessengerThreadInfoPanel4(false),B=r.isMessageBlocked(w);return c("React").createElement("div",{className:"_3tkv",id:m.THREAD_INFO_PANEL},c("React").createElement("h3",{className:"accessible_elem"},i._("Informations sur la conversation")),c("React").createElement(n,{contact:this.props.contact,isUnread:this.props.isUnread,isUserActive:this.props.isUserActive,isBlocked:B,lastActive:this.props.lastActive,onArchive:this.props.onArchive,onDelete:this.props.onDelete,onLeaveGroup:this.props.onLeaveGroup,onMarkRead:this.props.onMarkRead,onMarkSpam:this.props.onMarkSpam,onMarkUnread:this.props.onMarkUnread,onMute:this.props.onMute,onThreadNameChange:this.props.onThreadNameChange,onThreadPhotoChange:this.props.onThreadPhotoChange,onUnmute:this.props.onUnmute,onIgnore:this.props.onIgnore,onBlock:this.props.onBlock,onUnblock:this.props.onUnblock,showIgnoreGroup:c("gkx")("AT4mycXtTvfXJMAqrd_BSmI0_EEB-8pOs_AaNI2VArui1ThGLeffrrAudIg_2uctK6Ji6Zom3olu5BpcCU5_nD4U"),showBlock:this.props.showBlock,participants:this.props.participants,platform:this.props.platform,showLeaveGroup:this.props.showLeaveGroup,showReport:this.props.showReport,thread:this.props.thread,viewer:this.props.viewer}),this.$MessengerThreadInfoPanel6(),c("React").createElement(p,{isCollapsed:this.props.threadOptionsSectionCollapsed,participants:this.props.participants,thread:this.props.thread,viewer:this.props.viewer,onToggle:this.props.onThreadOptionsSectionToggle}),this.$MessengerThreadInfoPanel7(),c("MessengerAdminGroupUtils").canSeeGroupOptions(y,w,v)?this.$MessengerThreadInfoPanel8():null,this.props.thread.is_canonical?this.$MessengerThreadInfoPanel9():this.$MessengerThreadInfoPanel10(),this.$MessengerThreadInfoPanel11(),z,A)};t.prototype.$MessengerThreadInfoPanel11=function(){if(!c("gkx")("AT67ptDj-ZaeW3Tyo9vbms2vYK1iy8t_jMuVqoEuGQXOqT3WIH9DEYXNBElJniUDVETCVboaIbfUes068dlrYLZO"))return null;var u=new(c("MessengerSharedLinksContainerRoute"))({threadFBID:this.props.thread.thread_fbid});return c("React").createElement(c("react-relay/classic/container/RelayRootContainer"),{Component:c("MessengerSharedLinksContainer.react"),renderLoading:function v(){return null},route:u,renderFetched:function(v){return c("React").createElement(c("MessengerSharedLinksContainer.react"),babelHelpers["extends"]({},v,{customColor:this.props.thread.custom_color,clearForceFetch:this.$MessengerThreadInfoPanel12,getIsScrolledToBottom:this.props.getIsScrolledToBottom,getScrollableHeight:this.props.getScrollableHeight,isCollapsed:this.props.linksSectionCollapsed,threadFBID:this.props.thread.thread_fbid,onToggle:this.props.onLinksSectionToggle}))}.bind(this)})};t.prototype.$MessengerThreadInfoPanel6=function(){var u=c("MessageThreadAssociatedObjectUtils").shouldRender(this.props.thread.associated_object);if(!u)return null;return c("React").createElement(c("MessengerInfoPanelAssociatedObjectSection.react"),{isCollapsed:this.props.associatedObjectSectionCollapsed,onToggle:this.props.onAssociatedObjectSectionToggle,customColor:this.props.thread.custom_color,associatedObject:this.props.thread.associated_object})};t.prototype.$MessengerThreadInfoPanel8=function(){return c("React").createElement(c("MessengerInfoPanelGroupSection.react"),{isOptionsCollapsed:this.props.groupOptionsSectionCollapsed,onOptionsToggle:this.props.onGroupOptionsSectionToggle,isApprovalsCollapsed:this.props.groupOptionsApprovalsSectionCollapsed,onApprovalToggle:this.props.onGroupApprovalOptionsSectionToggle,onToggle:this.props.onThreadOptionsSectionToggle,participants:this.props.participants,viewer:this.props.viewer,thread:this.props.thread})};t.prototype.$MessengerThreadInfoPanel7=function(){if(c("gkx")("AT5MgEQ2BX9EoYtDecXLd_H4PLe0dbm4AiKTfhaDnASNmsTXiM4GP6YZuoppqRP_9-lprti-5sdwbLUtVdnK9mMY"))return c("React").createElement(q,{isCollapsed:this.props.threadStatsSectionCollapsed,thread:this.props.thread,viewer:this.props.viewer,onToggle:this.props.onThreadStatsSectionToggle});return null};t.prototype.$MessengerThreadInfoPanel4=function(u){var v=this.props,w=v.getIsScrolledToBottom,x=v.getScrollableHeight,y=v.onPhotosSectionToggle,z=v.photosSectionCollapsed,A=v.thread,B=new(c("MessengerSharedPhotosContainerRoute"))({threadFBID:A.thread_fbid});return c("React").createElement(c("react-relay/classic/container/RelayRootContainer"),{Component:c("MessengerSharedPhotosContainer.react"),renderLoading:function C(){return null},route:B,forceFetch:u,renderFetched:function(C){return c("React").createElement(c("MessengerSharedPhotosContainer.react"),babelHelpers["extends"]({},C,{customColor:this.props.thread.custom_color,clearForceFetch:this.$MessengerThreadInfoPanel12,getIsScrolledToBottom:w,getScrollableHeight:x,isCollapsed:z,onToggle:y,threadFBID:A.thread_fbid}))}.bind(this)})};t.prototype.$MessengerThreadInfoPanel5=function(u){var v=this.props,w=v.filesSectionCollapsed,x=v.thread,y=new(c("MessengerSharedFilesContainerRoute"))({threadFBID:x.thread_fbid});return c("React").createElement(c("react-relay/classic/container/RelayRootContainer"),{Component:c("MessengerSharedFilesContainer.react"),renderLoading:function z(){return null},route:y,forceFetch:u,renderFetched:function(z){return c("React").createElement(c("MessengerSharedFilesContainer.react"),babelHelpers["extends"]({},z,{isCollapsed:w,onToggle:this.props.onFilesSectionToggle}))}.bind(this)})};t.prototype.$MessengerThreadInfoPanel10=function(){return c("React").createElement(c("MessengerInfoPanelPeopleSection.react"),{canViewerReply:c("MercuryThreadInfo").canReply(this.props.thread),contactAdapter:c("MessengerContactAdapters").fromMercuryParticipant,isCollapsed:this.props.peopleSectionCollapsed,isViewerSubscribed:this.props.thread.is_subscribed,onAddPeopleClick:this.$MessengerThreadInfoPanel13,onContactAction:this.$MessengerThreadInfoPanel14,onContactSelect:this.$MessengerThreadInfoPanel15,onToggle:this.props.onPeopleSectionToggle,participants:this.props.participants,viewer:this.props.viewer,adminIds:this.props.thread.admin_ids,thread:this.props.thread})};t.prototype.$MessengerThreadInfoPanel9=function(){var u=this.props.contact;if(!u||!u.href||u.fbid.toString()===c("MessengerConfig").MoneyPennyFBID)return null;var v=u.href,w=c("CurrentUser").isWorkUser()?"Workplace":"Facebook",x=u.type==="page"?i._("Page {productName}",[i.param("productName",w)]):i._("Profil {productName}",[i.param("productName",w)]);return c("React").createElement(o,{customColor:this.props.thread.custom_color,title:x},c("React").createElement("div",{className:"_4v0l"},c("React").createElement(c("Link.react"),{className:"_3oh-",style:{color:this.props.thread.custom_color},href:v,target:"_blank"},v.replace("www.",""))))};t.propTypes={contact:s.instanceOf(c("ImmutableObject")),getIsScrolledToBottom:s.func.isRequired,getScrollableHeight:s.func.isRequired,isUserActive:s.bool.isRequired,isBusinessEnabled:s.bool,lastActive:s.string,linksSectionCollapsed:s.bool.isRequired,onArchive:s.func.isRequired,onContactAction:s.func.isRequired,onContactSelect:s.func.isRequired,onDelete:s.func.isRequired,onLeaveGroup:s.func,onLinksSectionToggle:s.func.isRequired,onMarkRead:s.func.isRequired,onMarkSpam:s.func.isRequired,onMarkUnread:s.func.isRequired,onMute:s.func.isRequired,onAssociatedObjectSectionToggle:s.func.isRequired,onPeopleSectionToggle:s.func.isRequired,onPhotosSectionToggle:s.func.isRequired,onFilesSectionToggle:s.func.isRequired,onThreadOptionsSectionToggle:s.func.isRequired,onThreadStatsSectionToggle:s.func.isRequired,onGroupOptionsSectionToggle:s.func.isRequired,onGroupApprovalOptionsSectionToggle:s.func.isRequired,onThreadNameChange:s.func.isRequired,onThreadPhotoChange:s.func.isRequired,onUnmute:s.func.isRequired,onIgnore:s.func.isRequired,onBlock:s.func.isRequired,onUnblock:s.func.isRequired,showBlock:s.bool.isRequired,participants:s.instanceOf(c("immutable").Map).isRequired,associatedObjectSectionCollapsed:s.bool.isRequired,peopleSectionCollapsed:s.bool.isRequired,photosSectionCollapsed:s.bool.isRequired,filesSectionCollapsed:s.bool.isRequired,platform:s.string,prevIsScrolledToBottom:s.bool.isRequired,prevScrollableHeight:s.number.isRequired,showLeaveGroup:s.bool.isRequired,thread:s.instanceOf(c("ImmutableObject")).isRequired,threadOptionsSectionCollapsed:s.bool.isRequired,threadStatsSectionCollapsed:s.bool.isRequired,groupOptionsSectionCollapsed:s.bool.isRequired,groupOptionsApprovalsSectionCollapsed:s.bool.isRequired,viewer:s.string.isRequired};f.exports=t}),null);
__d("MessengerThreadInfoPanelScrollableArea.react",["MessengerFlexArea.react","MessengerScrollableArea.react","React","ReactDOM"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("React").PropTypes;h=babelHelpers.inherits(k,c("React").Component);i=h&&h.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.state={prevHeight:-1,prevIsScrolledToBottom:false},this.$MessengerThreadInfoPanelScrollableArea1=null,this.isScrolledToBottom=function(){return this.refs.scrollable.isScrolledToBottom()}.bind(this),this.getHeight=function(){return c("ReactDOM").findDOMNode(this.refs.scrollable).offsetHeight}.bind(this),this.$MessengerThreadInfoPanelScrollableArea2=function(){var q=this.isScrolledToBottom(),r=this.getHeight();if(this.state.prevIsScrolledToBottom!==q||this.state.prevHeight!==r)this.setState({prevHeight:r,prevIsScrolledToBottom:q})}.bind(this),m}k.prototype.render=function(){return c("React").createElement(c("MessengerFlexArea.react"),{className:this.props.className,onResize:this.$MessengerThreadInfoPanelScrollableArea2},c("React").createElement(c("MessengerScrollableArea.react"),{height:"100%",onScroll:this.$MessengerThreadInfoPanelScrollableArea2,ref:"scrollable"},this.props.children(this.state.prevHeight,this.state.prevIsScrolledToBottom,this.isScrolledToBottom,this.getHeight)))};k.propTypes={children:j.func.isRequired};f.exports=k}),null);
__d("XMessagingSetThreadStateController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/messaging/set_thread_state/",{})}),null);
__d("MessengerThreadInfoPanelContainer.react",["fbt","AsyncRequest","IgnoreMessagesTypedLogger","MercuryConfig","MessengerMessageRequestsTypedLogger","immutable","ImmutableObject","MercuryAPIArgsSource","MercuryIDs","MercuryLogMessageType","MercuryMessageActions","MercuryMessageObject","MercuryThreadActions","MercuryThreadInfo","MercuryTriodeSourceUtil","MessagingTag","MessengerActions","messengerDialogsRe","messengerConfirmBlockThreadDialogReact","messengerConfirmLeaveGroupDialogReact","messengerContactActionsRe","MessengerAdminGroupUtils","MessengerLeaveGroupAction","MessengerThreadInfoPanelScrollableArea.react","MessengerSettingsActions","MessengerSettingsStore","MessengerThreadInfoPanel.react","ReactComponentWithPureRenderMixin","React","StoreAndPropBasedStateMixin","URI","XMessagingSetThreadStateController","getPageIDFromThreadID"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("messengerConfirmBlockThreadDialogReact").jsComponent,j=c("messengerConfirmLeaveGroupDialogReact").jsComponent,k=c("messengerContactActionsRe").actions,l=c("React").PropTypes,m=c("React").createClass({displayName:"MessengerThreadInfoPanelContainer",mixins:[c("ReactComponentWithPureRenderMixin"),c("StoreAndPropBasedStateMixin")(c("MessengerSettingsStore"))],propTypes:{contactData:l.object,participants:l.instanceOf(c("immutable").Map).isRequired,thread:l.instanceOf(c("ImmutableObject")).isRequired,viewer:l.string.isRequired},statics:{calculateState:function n(){var o=c("MessengerSettingsStore").getSettings(),p=o.links_section_collapsed,q=o.associated_object_section_collapsed,r=o.people_section_collapsed,s=o.photos_section_collapsed,t=o.files_section_collapsed,u=o.thread_section_collapsed,v=o.thread_stats_section_collapsed,w=o.group_section_collapsed,x=o.group_approval_section_collapsed;return{links_section_collapsed:p,associated_object_section_collapsed:q,people_section_collapsed:r,photos_section_collapsed:s,files_section_collapsed:t,thread_section_collapsed:u,thread_stats_section_collapsed:v,group_section_collapsed:w,group_approval_section_collapsed:x}}},render:function n(){var o=this.props.contactData||{},p=this.state,q=p.links_section_collapsed,r=p.associated_object_section_collapsed,s=p.people_section_collapsed,t=p.photos_section_collapsed,u=p.files_section_collapsed,v=p.thread_section_collapsed,w=p.thread_stats_section_collapsed,x=p.group_section_collapsed,y=p.group_approval_section_collapsed;return c("React").createElement(c("MessengerThreadInfoPanelScrollableArea.react"),{className:this.props.className},function(z,A,B,C){return c("React").createElement(c("MessengerThreadInfoPanel.react"),{contact:o.contact,getIsScrolledToBottom:B,getScrollableHeight:C,isUserActive:o.isUserActive||false,lastActive:o.lastActive,linksSectionCollapsed:q,onArchive:this._handleArchive,onContactAction:this._handleContactAction,onContactSelect:this._handleContactSelect,onDelete:this._handleDelete,onLeaveGroup:this._handleLeaveGroup,onLinksSectionToggle:this._handleLinksSectionToggle,onMarkRead:this._handleMarkRead,onMarkSpam:this._handleMarkSpam,onMarkUnread:this._handleMarkUnread,onMute:this._handleMute,onMuteChange:this._handleMuteChange,onAssociatedObjectSectionToggle:this._handleAssociatedObjectSectionToggle,onPeopleSectionToggle:this._handlePeopleSectionToggle,onPhotosSectionToggle:this._handlePhotosSectionToggle,onFilesSectionToggle:this._handleFilesSectionToggle,onThreadOptionsSectionToggle:this._handleThreadSectionToggle,onThreadStatsSectionToggle:this._handleThreadStatsSectionToggle,onGroupOptionsSectionToggle:this._handleGroupOptionsSectionToggle,onGroupApprovalOptionsSectionToggle:this._handleGroupOptionsApprovalSectionToggle,onThreadNameChange:this._handleThreadNameChange,onThreadPhotoChange:this._handleThreadPhotoChange,onUnmute:this._handleUnmute,onIgnore:this._handleIgnore,onBlock:this._handleBlock,onUnblock:this._handleUnblock,showBlock:this.props.thread.is_canonical_user&&this.props.thread.other_user_fbid&&this.props.viewer!==this.props.thread.other_user_fbid,participants:this.props.participants,associatedObjectSectionCollapsed:r,peopleSectionCollapsed:s,photosSectionCollapsed:t,filesSectionCollapsed:u,platform:o.platform,prevIsScrolledToBottom:A,prevScrollableHeight:z,showLeaveGroup:this.props.thread.is_subscribed&&!this.props.thread.is_canonical,showReport:this._isPageChat(),thread:this.props.thread,threadOptionsSectionCollapsed:v,threadStatsSectionCollapsed:w,groupOptionsSectionCollapsed:x,groupOptionsApprovalsSectionCollapsed:y,viewer:this.props.viewer})}.bind(this))},_handleArchive:function n(){this._getThreadActions().archive(this.props.thread.thread_id);c("MessengerActions").selectThread(null)},_handleDelete:function n(){this._getThreadActions()["delete"](this.props.thread.thread_id);c("MessengerActions").selectThread(null)},_handleMarkRead:function n(){this._getThreadActions().markRead(this.props.thread.thread_id)},_handleMarkSpam:function n(){this._getThreadActions().markSpam(this.props.thread.thread_id);c("MessengerActions").selectThread(null)},_handleMarkUnread:function n(){this._getThreadActions().markUnread(this.props.thread.thread_id)},_handleMute:function n(o){this._getThreadActions().updateMuteSetting(this.props.thread.thread_id,o)},_handleUnmute:function n(){this._getThreadActions().unmute(this.props.thread.thread_id)},_handleIgnore:function n(){this._getThreadActions().changeFolder(this.props.thread.thread_id,"other");c("MessengerActions").selectThread(null);new(c("IgnoreMessagesTypedLogger"))().setEvent("ignore_confirmed").setThreadID(this.props.thread.thread_fbid).setPlatform("messengerdotcom").log()},_handleBlock:function n(){var o,p=this,q=this.props.thread,r=q.thread_id;if(c("MercuryConfig").WMBF)(function(){var s=p.props.contactData&&p.props.contactData.contact.short_name||h._("exp\u00e9diteur");if(r)p._getThreadActions().blockIgnoreOnMessengerDotCom(true,r,function(){this._handleAfterBlock(s)}.bind(p))})();else this._getThreadActions().blockOnMessengerDotCom(r)},_handleAfterBlock:function n(o){var p=this.props,q=p.thread,r=p.viewer;c("messengerDialogsRe").showDialog(function(){return c("React").createElement(i,{participantName:o})});var s=c("MercuryIDs").getThreadKeyfromThreadIDUserID(q.thread_id,c("MercuryIDs").getParticipantIDFromUserID(r));if(q.folder===c("MessagingTag").PENDING)new(c("MessengerMessageRequestsTypedLogger"))().setAction("message_requests_block_request").setThreadID(c("MercuryIDs").getThreadFBIDFromThreadID(q.thread_id)).setSurface("thread").setFolderType(c("MessagingTag").PENDING).setThreadKey(s).setEntryPoint("settings").log()},_handleUnblock:function n(){this._getThreadActions().unblockOnMessengerDotCom(this.props.thread.thread_id)},_handleMuteChange:function n(o){this._getThreadActions().updateMuteSetting(this.props.thread.thread_id,o)},_handleContactSelect:function n(o,event){var p=c("MercuryIDs").getThreadIDFromParticipantID(o.uid);p&&c("MessengerActions").selectThread(p)},_handleContactAction:function n(o,p){__p&&__p();if(c("MercuryIDs").getUserIDFromParticipantID(p.uid)!==this.props.viewer)switch(o){case k.MESSAGE:this._handleContactSelect(p);break;case k.PROFILE:var q=this.props.participants.get(p.uid);if(q&&q.href)window.open(q.href);else this._handleContactSelect(p);break;case k.REMOVE:if(!c("MercuryThreadInfo").isEmptyLocalThread(this.props.thread)){var r=new(c("URI"))("/chat/remove_participants/");r.addQueryData({uid:c("MercuryIDs").getUserIDFromParticipantID(p.uid),tid:this.props.thread.thread_fbid});var s=new(c("AsyncRequest"))(r);s.send()}break}switch(o){case k.REMOVE_OWNER:if(!c("MercuryThreadInfo").isEmptyLocalThread(this.props.thread))this._getThreadActions().changeGroupAdmins(this.props.thread.thread_fbid,[c("MercuryIDs").getUserIDFromParticipantID(p.uid)],false);break;case k.ADD_OWNER:if(!c("MercuryThreadInfo").isEmptyLocalThread(this.props.thread))this._getThreadActions().changeGroupAdmins(this.props.thread.thread_fbid,[c("MercuryIDs").getUserIDFromParticipantID(p.uid)],true);break}},_handleLeaveGroup:function n(){var o,p=this;if(this.props.viewer)(function(){var q=c("MessengerAdminGroupUtils").isViewerAdmin(p.props.thread.admin_ids,p.props.viewer);c("messengerDialogsRe").showDialog(function(){return c("React").createElement(j,{onLeave:this._onLeaveGroupConfirm,isViewerAdmin:q,thread:this.props.thread})}.bind(p))})()},_onLeaveGroupConfirm:function n(){c("MessengerLeaveGroupAction").leaveGroup(this.props.thread,this.props.viewer)},_handleThreadNameChange:function n(o){var p=c("MessengerAdminGroupUtils").isJoinableThread(this.props.thread);if(!p)this._getMessageActions().send(this._getMessageObject().constructLogMessageObject(c("MercuryTriodeSourceUtil").getMercuryTriodeSource(),this.props.thread.thread_id,c("MercuryLogMessageType").THREAD_NAME,{name:o}),null,c("MercuryAPIArgsSource").MESSENGER);else{var q=c("XMessagingSetThreadStateController").getURIBuilder().getURI();new(c("AsyncRequest"))().setURI(q).setData({thread_id:this.props.thread.thread_fbid,thread_name:o}).send()}},_handleThreadPhotoChange:function n(o,p){this._getMessageActions().send(this._getMessageObject().constructLogMessageObject(c("MercuryTriodeSourceUtil").getMercuryTriodeSource(),o,c("MercuryLogMessageType").THREAD_IMAGE,{image:p.metadata[0]}))},_handleAssociatedObjectSectionToggle:function n(){c("MessengerSettingsActions").changeSettings({associated_object_section_collapsed:!this.state.associated_object_section_collapsed})},_handlePeopleSectionToggle:function n(){c("MessengerSettingsActions").changeSettings({people_section_collapsed:!this.state.people_section_collapsed})},_handlePhotosSectionToggle:function n(){c("MessengerSettingsActions").changeSettings({photos_section_collapsed:!this.state.photos_section_collapsed})},_handleFilesSectionToggle:function n(){c("MessengerSettingsActions").changeSettings({files_section_collapsed:!this.state.files_section_collapsed})},_handleThreadSectionToggle:function n(){c("MessengerSettingsActions").changeSettings({thread_section_collapsed:!this.state.thread_section_collapsed})},_handleThreadStatsSectionToggle:function n(){c("MessengerSettingsActions").changeSettings({thread_stats_section_collapsed:!this.state.thread_stats_section_collapsed})},_handleGroupOptionsSectionToggle:function n(){c("MessengerSettingsActions").changeSettings({group_section_collapsed:!this.state.group_section_collapsed})},_handleGroupOptionsApprovalSectionToggle:function n(){c("MessengerSettingsActions").changeSettings({group_approval_section_collapsed:!this.state.group_approval_section_collapsed})},_handleLinksSectionToggle:function n(){c("MessengerSettingsActions").changeSettings({links_section_collapsed:!this.state.links_section_collapsed})},_getThreadActions:function n(){return c("MercuryThreadActions").getForFBID(this.props.viewer)},_getMessageActions:function n(){return c("MercuryMessageActions").getForFBID(this.props.viewer)},_getMessageObject:function n(){return c("MercuryMessageObject").getForFBID(this.props.viewer)},_isPageChat:function n(){return!!c("getPageIDFromThreadID")(this.props.thread.thread_id)}});f.exports=m}),null);
__d("MessengerDetailView.react",["cx","fbt","invariant","Bootloader","BootloadOnRender.react","CustomColorHighlighting.react","DataTransfer","EventReminderActions","EventRemindersGating","EventReminderStateStore","immutable","JSResource","LazyComponent.react","MercuryIDs","MercuryConfig","MercuryCanonicalGroupThreadStore","MercuryParticipants","MercuryThreadActions","MercuryThreadInfo","MercuryThreads","MessengerActions","MessengerComposerStore","MessengerComposerContainer.react","MessengerConversation.react","MessengerConversationContainer.react","MessengerDetailViewHeaderContainer.react","messengerDomIDsRe","MessengerErrorBoundary.react","MessengerPresenceStatusUtils","MessengerSettingsActions","MessengerSettingsStore","MessengerStateStore","MessengerThreadSearchStore","MessengerThreadInfoPanelContainer.react","MessengerThreadSearchActions","MessengerView","MessengerWebDriverTestIDs","Parent","PresenceStatus","React","SubscriptionsHandler","AvailableList","emptyFunction","gkx","ifRequired","shallowCompare"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k=c("messengerDomIDsRe").ids;c("AvailableList");var l=c("React").PropTypes;function m(event,o,p,q){if(!c("EventRemindersGating").shouldShowPlansOnMessengerCom)return null;if(!o)return null;if(!event)return null;return c("React").createElement(c("BootloadOnRender.react"),{loader:c("JSResource")("MessengerEventPlanContainer.react").__setRef("MessengerDetailView.react"),placeholder:c("React").createElement("div",null),component:c("React").createElement(c("LazyComponent.react"),{threadID:o,participants:p,viewer:q})})}var n=c("React").createClass({displayName:"MessengerDetailView",_composer:undefined,_refsConversationContainer:null,_subscriptionsHandler:new(c("SubscriptionsHandler"))(),propTypes:{activeThreadID:l.string,view:l.string,viewer:l.string.isRequired},calculateState:function o(p){__p&&__p();var q=p.activeThreadID,r=c("MercuryThreads").getForFBID(p.viewer),s=c("MessengerComposerStore").getState();if(p.view===c("MessengerView").DETAIL.COMPOSE){!!s.recipients||j(0);var t=s.recipients;if(t.size===1)q=c("MercuryIDs").getThreadIDFromUserID(t.first().getUniqueID().toString());else if(t.size>1)q=c("MercuryCanonicalGroupThreadStore").getOrFetch(Array.from(t).map(function(z){return z.getUniqueID().toString()}))}var u=q?r.getOrFetch(q):null,v=c("immutable").Map();if(u&&q){v=v.withMutations(function(z){u.participants&&u.participants.forEach(function(A){z.set(A,c("MercuryParticipants").getOrFetch(A))});u.is_subscribed&&z.set(c("MercuryIDs").getParticipantIDFromUserID(p.viewer),c("MercuryParticipants").getOrFetch(c("MercuryIDs").getParticipantIDFromUserID(p.viewer)))});if(c("EventRemindersGating").shouldShowPlansOnMessengerCom){var event=u?u.lightweight_event:null;if(event)c("EventReminderActions").updateEventReminder(q,event);else{var w=c("EventReminderStateStore").getEvent(q);if(w&&w.exists)c("EventReminderActions").deleteEventReminder(q)}}}var x=c("ifRequired")("MessengerUploadFilesStore",function(z){return z.getState()},function(){return c("immutable").Map({})}),y=c("ifRequired")("MessengerSharePreviewStore",function(z){return z.getState()},function(){return c("immutable").Map({})});return{infoPanelCollapsed:c("MessengerSettingsStore").getSettings().info_sidebar_collapsed,activeThreadID:q,composerState:s,messengerState:c("MessengerStateStore").getState(),contactData:c("MessengerPresenceStatusUtils").getStatusFromCanonicalThread(v,u),activeThread:u,participants:v,searchResults:c("MessengerThreadSearchStore").getState(),uploadFilesState:x,sharePreivewState:y}},getInitialState:function o(){return babelHelpers["extends"]({dropTargetOverlayVisible:false},this.calculateState(this.props))},componentWillMount:function o(){this._subscribeToSubscrptionHandler([c("MessengerComposerStore"),c("MessengerStateStore"),c("MessengerThreadSearchStore"),c("MercuryCanonicalGroupThreadStore"),c("MercuryThreads"),c("MercuryParticipants"),c("PresenceStatus")])},componentDidMount:function o(){if(c("gkx")("AT5V6GuV7OE1f4CNmq1NUhZOeDrgnZF-AQ7WoOvZA8jFMJsYzyghwU79Bm31vgH-mi9DAlUGSFnfYvhwjhMfTolYEEzHhgUrhLD2UxTqbooHHw"))c("Bootloader").loadModules(["MessengerUploadFilesStore"],function(p){this._subscribeToSubscrptionHandler([p])}.bind(this),"MessengerDetailView.react");if(c("gkx")("AT5M-KOnq98igVULtzbIXLLujZOrcPEb_vzPxIrrMO4yDC59FjeQpdoZs2nMsaoB9WIY9SOWsfOkycr87iOYdoQQ"))c("Bootloader").loadModules(["MessengerSharePreviewStore"],function(p){this._subscribeToSubscrptionHandler([p])}.bind(this),"MessengerDetailView.react")},_subscribeToSubscrptionHandler:function o(p){__p&&__p();var q=function(){this.setState(this.calculateState(this.props))}.bind(this),r=[];p.forEach(function(t){if(t.hasChanged&&t.getDispatchToken&&t.addListener)r.push(t.addListener(q));else if(t.subscribe)r.push(t.subscribe("change",q));else if(t.addListener)r.push(t.addListener("change",q));else j(0)});if(r.length>0){var s;this._subscriptionsHandler&&(s=this._subscriptionsHandler).addSubscriptions.apply(s,r)}},shouldComponentUpdate:function o(p,q){return c("shallowCompare")(this,p,q)},componentDidUpdate:function o(){this._handleResize()},componentWillUnmount:function o(){this._subscriptionsHandler&&this._subscriptionsHandler.release();this._subscriptionsHandler=null},componentWillReceiveProps:function o(p){this.setState(this.calculateState(p))},render:function o(){var p=this.state.activeThreadID,q=this._getMainLabelDetails(),r=void 0;if(this.state.activeThread)r=this.props.query==null?m(this.state.activeThread.lightweight_event,p,this.state.participants,this.props.viewer):null;return c("React").createElement("div",{"aria-labelledby":q.labelIDs,className:"_1q5-",role:"main"},c("React").createElement("div",{className:"hidden_elem",id:k.MAIN_LABEL},q.labelText),c("React").createElement(c("CustomColorHighlighting.react"),{className:"_wsc",customColor:this.state.activeThread&&this.state.activeThread.custom_color},c("React").createElement(c("MessengerDetailViewHeaderContainer.react"),{contactData:this.state.contactData,recipients:this.state.composerState.recipients,participants:this.state.participants,thread:this.state.activeThread,view:this.props.view,viewer:this.props.viewer,onResize:this._handleResize,onInfoPanelToggle:this._handleInfoPanelToggle,infoPanelCollapsed:this.state.infoPanelCollapsed}),c("React").createElement("div",{className:"_20bp"},this._renderInfoPanel(),c("React").createElement("div",{className:"_4_j4",onClick:this._handleConversationClick,onDragEnter:this._showDropTargetOverlay,onDragLeave:this._hideDropTargetOverlay,onDragOver:this._showDropTargetOverlay,onDrop:this._handleDrop,role:"presentation"},this._renderMainView(p),r,this._renderSearchView(p),this._renderFooterView(p),c("React").createElement("div",{className:(!this.state.dropTargetOverlayVisible?"hidden_elem":"")+" _2fg6"}),(c("gkx")("AT5V6GuV7OE1f4CNmq1NUhZOeDrgnZF-AQ7WoOvZA8jFMJsYzyghwU79Bm31vgH-mi9DAlUGSFnfYvhwjhMfTolYEEzHhgUrhLD2UxTqbooHHw")||c("gkx")("AT5M-KOnq98igVULtzbIXLLujZOrcPEb_vzPxIrrMO4yDC59FjeQpdoZs2nMsaoB9WIY9SOWsfOkycr87iOYdoQQ"))&&this._renderUploadFiles(p)))))},_renderUploadFiles:function o(p){if(!p)return null;var q=this.state.uploadFilesState.get(p)||{},r=this.state.sharePreivewState.get(p);return c("React").createElement(c("BootloadOnRender.react"),{loader:c("JSResource")("FantaDragAndDrop.react").__setRef("MessengerDetailView.react"),placeholder:c("React").createElement("div",null),component:c("React").createElement(c("LazyComponent.react"),{threadID:p,uploadedFiles:q.uploadedFiles,uploadingFiles:q.uploadingFiles,sharePreview:r})})},_renderSearchView:function o(p){return p&&!this.props.mid&&this.props.query!=null?c("React").createElement(c("BootloadOnRender.react"),{loader:c("JSResource")("MessengerThreadSearchContainer.react").__setRef("MessengerDetailView.react"),placeholder:c("React").createElement("div",{className:"_33p7 _5iwm"}),component:c("React").createElement(c("LazyComponent.react"),{loading:this.state.searchResults.loading,query:this.state.searchResults.query,selectedIndex:this.state.searchResults.selectedIndex,totalCount:this.state.searchResults.totalCount})}):null},_assignConversationContainerRef:function o(p){this._refsConversationContainer=p},_renderMainView:function o(p){if(!p)return c("React").createElement("div",{className:"_1ut7"});var q=this.state.contactData?this.state.contactData.contact:null;if(this.state.searchResults.messages)return c("React").createElement(c("MessengerErrorBoundary.react"),{component:"conversation"},c("React").createElement(c("MessengerConversation.react"),{className:"_1wfr",contact:q,downExhausted:this.state.searchResults.downExhausted,fetchMessages:c("MessengerThreadSearchActions").getMoreSearchContext,onVoiceClipCreate:this.handleAudioUpload,innerClassName:"_1r_-",isCanonical:c("MercuryIDs").isCanonical(p),isLoaded:true,isLoading:false,messages:this.state.searchResults.messages,onRead:c("emptyFunction"),participants:this.state.participants,thread:this.state.activeThread,threadID:p,upExhausted:this.state.searchResults.upExhausted,useManualFetch:true,viewer:this.props.viewer}));return c("React").createElement(c("MessengerErrorBoundary.react"),{component:"conversation"},c("React").createElement(c("MessengerConversationContainer.react"),{className:"_1wfr",contact:q,onVoiceClipCreate:this.handleAudioUpload,onMarkRead:this._handleMarkRead,participants:this.state.participants,ref:this._assignConversationContainerRef,thread:this.state.activeThread,threadID:p,viewer:this.props.viewer}))},_renderFooterView:function o(p){var q=c("MercuryConfig").ColdOpenBlock&&this.state.activeThread&&c("MercuryThreadInfo").isColdOpen(this.state.activeThread);return c("React").createElement(c("MessengerErrorBoundary.react"),{className:"_4rv3 _2pen",component:"composer"},c("React").createElement(c("MessengerComposerContainer.react"),{canReply:!!(!q&&(this.props.view===c("MessengerView").DETAIL.COMPOSE||this.state.activeThread&&c("MercuryThreadInfo").canReply(this.state.activeThread)&&!c("MercuryConfig").ViewerIsReadOnly)),fileUploader:this.state.uploadFilesState.get(p),onMount:function(r){return this._composer=r}.bind(this),onResize:this._handleResize,participants:this.state.participants,recipients:this.state.composerState.recipients,sharePreview:this.state.sharePreivewState.get(p),threadID:p,threadFBID:this.state.activeThread?this.state.activeThread.thread_fbid:null,thread:this.state.activeThread,view:this.props.view,viewer:this.props.viewer}))},_renderInfoPanel:function o(){var p=this.state,q=p.activeThread,r=p.contactData,s=p.infoPanelCollapsed,t=p.participants,u=this.props.view;if(!q||!t||u===c("MessengerView").DETAIL.COMPOSE)return null;return c("React").createElement("div",{className:(s?"hidden_elem":"")+" _4_j5","data-testid":c("MessengerWebDriverTestIDs").INFO_PANEL},c("React").createElement(c("MessengerErrorBoundary.react"),{className:"_4rv3",component:"conversation information"},c("React").createElement(c("MessengerThreadInfoPanelContainer.react"),{className:"_4_j9",contactData:r,participants:t,thread:q,viewer:this.props.viewer})))},_getMainLabelDetails:function o(){if(this.props.view===c("MessengerView").DETAIL.COMPOSE)return{labelText:i._("Nouveau message"),labelIDs:k.MAIN_LABEL};return{labelText:i._("Conversation avec"),labelIDs:k.MAIN_LABEL+" "+k.THREAD_TITLE}},_handleConversationClick:function o(p){__p&&__p();var q=this.props.activeThreadID;if(q&&this._refsConversationContainer&&this._refsConversationContainer.isScrolledToBottom())this._handleMarkRead(q);if(window.getSelection().toString()!=="")return;var r=p.target;if(r instanceof Node&&c("Parent").byTag(r,"a")!=null)return;var s=this._getComposer();s&&s.focusInput()},handleAudioUpload:function o(p){var q=this._getComposer();if(q!=null&&p!=null){q.handleAudioUpload(p);q.focusInput()}},_showDropTargetOverlay:function o(p){p&&p.preventDefault();this.setState({dropTargetOverlayVisible:true})},_hideDropTargetOverlay:function o(p){p&&p.preventDefault();this.setState({dropTargetOverlayVisible:false});var q=this._getComposer();q&&q.resetDrag()},_handleDrop:function o(p){__p&&__p();this._hideDropTargetOverlay(p);var q=this._getComposer();if(!q)return;p.nativeEvent.dataTransfer instanceof Object||j(0);if(c("gkx")("AT5V6GuV7OE1f4CNmq1NUhZOeDrgnZF-AQ7WoOvZA8jFMJsYzyghwU79Bm31vgH-mi9DAlUGSFnfYvhwjhMfTolYEEzHhgUrhLD2UxTqbooHHw")){c("MessengerActions").prepareFilesForSend(this.state.activeThreadID,p.nativeEvent.dataTransfer.files);return}var r=new(c("DataTransfer"))(p.nativeEvent.dataTransfer),s=r.getFiles();if(s.length)q.handleFileUpload(s);else{var t=r.getText();if(t)q.handleTextDropped(t)}},_handleResize:function o(){var p=this._refsConversationContainer;if(p)p.handleResize()},_handleInfoPanelToggle:function o(){var p=!this.state.infoPanelCollapsed;this.setState({infoPanelCollapsed:p},function(){c("MessengerSettingsActions").changeSettings({info_sidebar_collapsed:p})})},_handleMarkRead:function o(p){c("MercuryThreadActions").getForFBID(this.props.viewer).markRead(p)},_getComposer:function o(){return this._composer}});f.exports=n}),null);
__d("messengerDetailViewReact",["ReasonReact","bs_js_null_undefined","MessengerDetailView.react"],(function a(b,c,d,e,f,g){"use strict";function h(i,j,k,l,m,n){return c("ReasonReact").wrapJsForReason(c("MessengerDetailView.react"),{activeThreadID:c("bs_js_null_undefined").from_opt(i),mid:c("bs_js_null_undefined").from_opt(j),query:c("bs_js_null_undefined").from_opt(k),view:c("bs_js_null_undefined").from_opt(l),viewer:m},n)}g.make=h}),null);
__d("messengerErrorBoundaryReact",["ReasonReact","bs_js_null_undefined","MessengerErrorBoundary.react"],(function a(b,c,d,e,f,g){"use strict";function h(i,j,k){return c("ReasonReact").wrapJsForReason(c("MessengerErrorBoundary.react"),{className:c("bs_js_null_undefined").from_opt(i),component:c("bs_js_null_undefined").from_opt(j)},k)}g.make=h}),null);
__d("P2PBannerStore",["invariant","EventEmitter","P2PActionConstants","P2PAPI","P2PDispatcher"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=void 0,l={},m=false,n=false;i=babelHelpers.inherits(o,c("EventEmitter"));j=i&&i.prototype;function o(){j.constructor.call(this);k=c("P2PDispatcher").register(this.onEventDispatched.bind(this))}o.prototype.onEventDispatched=function(p){__p&&__p();var q=p.type,r=p.data;switch(q){case c("P2PActionConstants").BANNER_STATES_UPDATED:this.handleBannerStatesUpdated(r);this.emit("change");break;case c("P2PActionConstants").BANNER_DISMISSED:this.handleBannerDismissed(r);this.emit("change");break;case c("P2PActionConstants").BANNER_COMPLETED:this.handleBannerCompleted(r);this.emit("change");break}};o.prototype.handleBannerStatesUpdated=function(p){m=true;l=p};o.prototype.handleBannerDismissed=function(p){var q=this.getBannerState(p);q.hasBeenDismissed=true};o.prototype.shouldShowBanner=function(p){__p&&__p();var q=void 0;if(!n){c("P2PAPI").getBannerStates();n=true;return false}if(!m)return false;q=this.getBannerState(p);return q.eligible&&!q.hasBeenDismissed};o.prototype.handleBannerCompleted=function(p){var q=this.getBannerState(p);q.eligible=false};o.prototype.getBannerState=function(p){var q=l[p];q||h(0);return q};f.exports=new o()}),null);
__d("P2PJewelBanner.react",["cx","fbt","ix","Image.react","Layout.react","P2PButton.react","React","TooltipLink.react","URI","XUIGrayText.react"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l,m=c("Layout.react").FillColumn,n=c("Layout.react").Column,o=c("React").PropTypes;k=babelHelpers.inherits(p,c("React").Component);l=k&&k.prototype;function p(){__p&&__p();var q,r;for(var s=arguments.length,t=Array(s),u=0;u<s;u++)t[u]=arguments[u];return r=(q=l.constructor).call.apply(q,[this].concat(t)),this.handleCloseClick=function(v){v.stopPropagation();if(this.props.onClose)this.props.onClose()}.bind(this),this.handleClick=function(){this.execPrimaryClick()}.bind(this),this.handlePrimaryClick=function(v){v.stopPropagation();this.execPrimaryClick()}.bind(this),this.execPrimaryClick=function(){if(this.props.primaryActionConfig.uri)new(c("URI"))(this.props.primaryActionConfig.uri).go();this.props.primaryActionConfig.onClick&&this.props.primaryActionConfig.onClick()}.bind(this),this.handleSecondaryActionClick=function(v){v.stopPropagation();this.props.secondaryActionConfig&&this.props.secondaryActionConfig.onClick&&this.props.secondaryActionConfig.onClick()}.bind(this),this.renderCloseButton=function(){return c("React").createElement(c("TooltipLink.react"),{alignH:"center",className:"_47d8",href:"#",onClick:this.handleCloseClick,position:"above",tooltip:i._("Annuler")},c("React").createElement(c("Image.react"),{className:"_47dg",height:7,src:j("94375"),width:7}))}.bind(this),this.renderActions=function(){var v=this.props.primaryActionConfig,w=void 0,x=this.props.secondaryActionConfig;if(x)w=c("React").createElement(c("P2PButton.react"),{className:"_5d0t",href:"#",label:x.text,onClick:this.handleSecondaryActionClick,size:"large",target:"_blank",type:"primary"});return c("React").createElement("div",null,w,c("React").createElement(c("P2PButton.react"),{className:"_5d0t",href:v.uri||"#",label:v.text,onClick:this.handlePrimaryClick,size:"large",target:"_blank",type:"primary",use:"confirm"}))}.bind(this),r}p.prototype.render=function(){var q=void 0;if(this.props.isDismissable)q=this.renderCloseButton();return c("React").createElement("div",{className:"_5d0n",onClick:this.handleClick,role:"presentation"},q,c("React").createElement(c("Layout.react"),null,c("React").createElement(n,{className:"_400i"},c("React").createElement("div",{className:"_400j"},c("React").createElement(c("Image.react"),{className:"_5d0q",height:50,src:j("94376"),width:50}))),c("React").createElement(m,{className:"_47di"},c("React").createElement("div",{className:"_400j"},c("React").createElement(c("XUIGrayText.react"),{display:"block",shade:"dark",weight:"bold"},this.props.titleText),c("React").createElement(c("XUIGrayText.react"),{display:"block",shade:"light"},this.props.bodyText))),c("React").createElement(n,{className:"_400k"},c("React").createElement("div",{className:"_400j"},this.renderActions()))))};p.propTypes={bodyText:o.node,isDismissable:o.bool,onClose:o.func,primaryActionConfig:o.shape({onClick:o.func,text:o.node.isRequired,uri:o.oneOfType([o.string,o.object])}).isRequired,secondaryActionConfig:o.shape({onClick:o.func.isRequired,text:o.node.isRequired}),titleText:o.node.isRequired};p.defaultProps={isDismissable:false};f.exports=p}),null);
__d("P2PPendingPaymentRequestJewelBanner.react",["fbt","P2PJewelBanner.react","P2PPaymentRequest","P2PPaymentRequestActionHelper","React"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;function l(){__p&&__p();var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.handleDeclineClick=function(){c("P2PPaymentRequestActionHelper").initDeclinePaymentRequestFlow(this.props.paymentRequest)}.bind(this),this.handlePayClick=function(){c("P2PPaymentRequestActionHelper").initPayForPaymentRequestFlow(this.props.paymentRequest,"banner")}.bind(this),this.renderBodyText=function(){var r=this.props.paymentRequest,s=r.memoText;if(!s)return null;return h._("Pour {What the user paid for}",[h.param("What the user paid for",s)])}.bind(this),n}l.prototype.render=function(){var m=this.props.paymentRequest;return c("React").createElement(c("P2PJewelBanner.react"),{bodyText:this.renderBodyText(),primaryActionConfig:{onClick:this.handlePayClick,text:h._("Payer")},secondaryActionConfig:{onClick:this.handleDeclineClick,text:h._("Refuser")},titleText:h._("{requester_name} a demand\u00e9 {amount}",[h.param("requester_name",m.requester.name),h.param("amount",m.amountWithSymbol)])})};l.propTypes={paymentRequest:k.instanceOf(c("P2PPaymentRequest")).isRequired};f.exports=l}),null);
__d("P2PPendingPushFailJewelBanner.react",["fbt","P2PJewelBanner.react","P2PLinkConstants","React"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.getActionText=function(){return h._("En savoir plus")},this.getBodyText=function(){var r=this.props.transfer;return h._("Impossible de d\u00e9poser le montant de {amount} {currency} de {sender_name} \u00e0 l\u2019aide de votre carte de d\u00e9bit.",[h.param("currency",r.currency),h.param("amount",r.amount),h.param("sender_name",r.sender.name)])}.bind(this),n}l.prototype.render=function(){return c("React").createElement(c("P2PJewelBanner.react"),{bodyText:this.getBodyText(),primaryActionConfig:{text:this.getActionText(),uri:c("P2PLinkConstants").helpTransferPushFailURI},titleText:h._("Mettez votre carte \u00e0 jour")})};l.propTypes={transfer:k.object.isRequired};f.exports=l}),null);
__d("P2PTimeBasedAcceptMessage.react",["fbt","React"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;l.prototype.render=function(){var m=this.props.transfer,n=m.creationTime*1e3,o=1e3*60*60*24,p=Date.now(),q=(p-n)/o,r=m.expirationTimestamp*1e3-p,s=Math.round(Math.max(r/o,1)),t=void 0;if(q<=2)t=h._("Ajoutez une carte de d\u00e9bit pour que l\u2019argent aille directement \u00e0 votre banque.");else if(q<=4)t=h._("Cet argent sera renvoy\u00e9 dans {days left} jours. Ajoutez une carte de d\u00e9bit pour l\u2019accepter.",[h.param("days left",s)]);else if(q<=5)t=h._({"day":"Vous avez encore {days left} jour pour ajouter une carte de d\u00e9bit avant que l\u2019argent ne soit renvoy\u00e9 \u00e0 {sender_name}.","days":"Vous avez {days left} jours pour ajouter une carte de d\u00e9bit avant que l\u2019argent ne soit renvoy\u00e9 \u00e0 {sender_name}."},[h.param("days left",s),h["enum"](s===1?"day":"days",{day:"day",days:"days"}),h.param("sender_name",m.sender.name)]);else t=h._("Vous avez 24 heures pour ajouter une carte de d\u00e9bit avant que l\u2019argent ne soit renvoy\u00e9 \u00e0 {sender_name}.",[h.param("sender_name",m.sender.name)]);return c("React").createElement("div",null,t)};function l(){i.apply(this,arguments)}l.propTypes={transfer:k.object.isRequired};f.exports=l}),null);
__d("P2PPendingRecipientNUXJewelBanner.react",["fbt","P2PAcceptMoneyDialog.react","P2PActions","P2PCreditCardStore","P2PJewelBanner.react","P2PTimeBasedAcceptMessage.react","React"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("React").PropTypes,j=c("React").createClass({displayName:"P2PPendingRecipientNUXJewelBanner",propTypes:{transfer:i.object.isRequired},getInitialState:function k(){return{creditCards:c("P2PCreditCardStore").getAll()}},creditCardStoreSub:null,componentDidMount:function k(){this.creditCardStoreSub=c("P2PCreditCardStore").addListener("change",this.onCreditCardStoreChange)},componentWillUnmount:function k(){if(this.creditCardStoreSub){this.creditCardStoreSub.remove();this.creditCardStoreSub=null}},onCreditCardStoreChange:function k(){var l={creditCards:c("P2PCreditCardStore").getAll()};if(this.isMounted())this.setState(l)},handleClick:function k(){this.showAcceptMoneyDialog()},showAcceptMoneyDialog:function k(){c("P2PActions").showDialog(c("P2PAcceptMoneyDialog.react"),{creditCards:this.state.creditCards,onClose:c("P2PActions").hideDialog,transfer:this.props.transfer})},renderTimeBasedMessage:function k(){return c("React").createElement(c("P2PTimeBasedAcceptMessage.react"),{transfer:this.props.transfer})},render:function k(){var l=this.props.transfer;if(!c("P2PCreditCardStore").isCreditCardsFetchComplete())return null;return c("React").createElement(c("P2PJewelBanner.react"),{bodyText:this.renderTimeBasedMessage(),primaryActionConfig:{onClick:this.handleClick,text:h._("Ajouter une carte")},titleText:h._("Accepter {amount} {currency} de {sender_name}.",[h.param("currency",l.currency),h.param("amount",l.amount),h.param("sender_name",l.sender.name)])})}});f.exports=j}),null);
__d("P2PPendingRecipientVerificationJewelBanner.react",["fbt","P2PJewelBanner.react","P2PTransferParam","P2PVerificationFlowHelper","React"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.handleClick=function(){c("P2PVerificationFlowHelper").startVerificationFlow(this.props.transfer[c("P2PTransferParam").TRANSFER_ID],false)}.bind(this),n}l.prototype.render=function(){return c("React").createElement(c("P2PJewelBanner.react"),{bodyText:h._("Pour accepter l\u2019argent que {sender_name} vous a envoy\u00e9, veuillez confirmer vos informations.",[h.param("sender_name",this.props.transfer.sender.name)]),primaryActionConfig:{onClick:this.handleClick,text:h._("Confirmer les informations")},titleText:h._("Veuillez confirmer vos infos")})};l.propTypes={transfer:k.object.isRequired};f.exports=l}),null);
__d("P2PJewelBannerContainer.react",["cx","CurrentUser","P2PBannerStore","P2PPaymentRequestsStore","P2PPendingPaymentRequestJewelBanner.react","P2PPendingPushFailJewelBanner.react","P2PPendingRecipientNUXJewelBanner.react","P2PPendingRecipientVerificationJewelBanner.react","P2PTransferParam","P2PTransferStatus","P2PTransferStore","PureStoreBasedStateMixin","React"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("React").createClass({displayName:"P2PJewelBannerContainer",mixins:[c("PureStoreBasedStateMixin")(c("P2PBannerStore"),c("P2PPaymentRequestsStore"),c("P2PTransferStore"))],statics:{calculateState:function j(){var k=c("P2PTransferStore").getNUXTransfer(),l=c("P2PPaymentRequestsStore").getPendingPaymentRequest();return{paymentRequest:l,paymentRequestBannerShown:!!l,transfer:k,transferBannerShown:k&&k.receiver.id==c("CurrentUser").getID()}}},renderTransferBanner:function j(){var k=this.state.transfer,l=k[c("P2PTransferParam").STATUS];switch(l){case c("P2PTransferStatus").PENDING_RECIPIENT_NUX:return c("React").createElement(c("P2PPendingRecipientNUXJewelBanner.react"),{transfer:k});case c("P2PTransferStatus").PENDING_RECIPIENT_VERIFICATION:return c("React").createElement(c("P2PPendingRecipientVerificationJewelBanner.react"),{transfer:k});case c("P2PTransferStatus").PENDING_PUSH_FAIL:return c("React").createElement(c("P2PPendingPushFailJewelBanner.react"),{transfer:k})}},renderPaymentRequestBanner:function j(){return c("React").createElement(c("P2PPendingPaymentRequestJewelBanner.react"),{paymentRequest:this.state.paymentRequest})},render:function j(){var k=void 0;if(this.state.transferBannerShown)k=this.renderTransferBanner();else if(this.state.paymentRequestBannerShown)k=this.renderPaymentRequestBanner();return c("React").createElement("div",{className:"_1xfk"},k)}});f.exports=i}),null);
__d("MercuryThreadlistContainer.react",["Bootloader","immutable","MercuryAPIArgsSource","MercuryConfig","MercuryFilters","MercuryIDs","MercuryThreadlistConstants","MessagingTag","P2PJewelBannerContainer.react","QE2Logger","React","SubscriptionsHandler","gkx","MessengerStateStore","MessengerMessageRequestsTypedLogger"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("React").PropTypes,k="search",l="www_messenger_jewel_perf_h2_2017",m=3;h=babelHelpers.inherits(n,c("React").Component);i=h&&h.prototype;function n(){__p&&__p();var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=i.constructor).call.apply(o,[this].concat(r)),this.state={aggregatedThreads:null,showAggregation:false,isLoading:true,isSearching:false,unreadMessageRequestThreads:[],threads:c("immutable").Map()},this.threadListReqsInFlight=0,this.$MercuryThreadlistContainer18=function(){this.$MercuryThreadlistContainer1.getFilteredThreadlist(c("MercuryThreadlistConstants").RECENT_THREAD_OFFSET,c("MercuryThreadlistConstants").MAX_UNREAD_COUNT,c("MessagingTag").PENDING,c("MercuryFilters").UNREAD,this.$MercuryThreadlistContainer20,true,this.props.source)}.bind(this),this.$MercuryThreadlistContainer13=function(){if(this.props.folder!=="aggregation"&&!this.state.isSearching&&!this.state.isLoading&&!this.$MercuryThreadlistContainer1.hasLoadedThreadlist(this.props.folder,this.props.filter))this.$MercuryThreadlistContainer8(this.props.folder,this.props.filter,this.$MercuryThreadlistContainer9(this.props.folder)+c("MercuryThreadlistConstants").JEWEL_MORE_COUNT+1)}.bind(this),this.$MercuryThreadlistContainer20=function(){if(!this.$MercuryThreadlistContainer1||!this.$MercuryThreadlistContainer2)return;var t=this.$MercuryThreadlistContainer1.getAvailableThreadlistNow(c("MessagingTag").PENDING,c("MercuryFilters").UNREAD);this.$MercuryThreadlistContainer2.getMultiThreadMeta(t,function(u){this.setState({unreadMessageRequestThreads:t.map(function(v){return u[v]})})}.bind(this))}.bind(this),this.$MercuryThreadlistContainer15=function(t,u){this.setState({isLoading:u,searchThreads:[]},function(){return this.$MercuryThreadlistContainer7(k,c("MercuryFilters").ALL,t)}.bind(this))}.bind(this),this.$MercuryThreadlistContainer14=function(t){this.setState({isSearching:!!t})}.bind(this),this.$MercuryThreadlistContainer16=function(t,u){this.setState({showAggregation:true,aggregatedThreads:u});var v=c("MercuryIDs").getParticipantIDFromUserID(this.props.viewer),w=[],x=u.map(function(y){w.push(c("MercuryIDs").getThreadKeyfromThreadIDUserID(y.thread_id,c("MercuryIDs").tokenize(v).value));return y.thread_id});this.props.onAggregationClick&&this.props.onAggregationClick(t,x);new(c("MessengerMessageRequestsTypedLogger"))().setAction("aggregation_entrypoint_tap").setEntryPoint("inbox_aggregation").setSurface("inbox").setFolderType("pending").setThreadKeyList(w.filter(function(y){return y}).join(", ")).log()}.bind(this),p}n.prototype.componentWillMount=function(){this.setState({showAggregation:c("MessengerStateStore").getState()&&c("MessengerStateStore").getState().threadIDs!==null})};n.prototype.componentDidMount=function(){__p&&__p();c("QE2Logger").logExposureForUser(l);c("Bootloader").loadModules(["MercuryOrderedThreadlist","MercuryThreadInformer","MercuryThreads"],function(o,p,q){__p&&__p();if(this.props.resetAggregatedThreads)this.setState({showAggregation:false,aggregatedThreads:null});this.$MercuryThreadlistContainer1=o.getForFBID(this.props.viewer);this.$MercuryThreadlistContainer2=q.getForFBID(this.props.viewer);this.$MercuryThreadlistContainer3=function(){__p&&__p();var r=this.$MercuryThreadlistContainer1.getAvailableThreadlistNow(c("MessagingTag").INBOX,this.props.filter);if(r.length===0)return r;var s=this.$MercuryThreadlistContainer2.getThreadMetaNow(r[r.length-1]);if(!s)return r;var t=s.timestamp,u=this.$MercuryThreadlistContainer1.getThreadlistUntilTimestamp(t,c("MessagingTag").PENDING,this.props.filter);u.sort(function(w,x){var y=this.$MercuryThreadlistContainer2.getThreadMetaNow(w),z=this.$MercuryThreadlistContainer2.getThreadMetaNow(x);return(z&&z.timestamp)-(y&&y.timestamp)}.bind(this));var v=c("MercuryConfig").MCMA?this.$MercuryThreadlistContainer4(u):u;return r.concat(v).sort(function(w,x){var y=typeof w==="string"?this.$MercuryThreadlistContainer2.getThreadMetaNow(w):this.$MercuryThreadlistContainer2.getThreadMetaNow(w[0]),z=typeof x==="string"?this.$MercuryThreadlistContainer2.getThreadMetaNow(x):this.$MercuryThreadlistContainer2.getThreadMetaNow(x[0]);return(z&&z.timestamp)-(y&&y.timestamp)}.bind(this))}.bind(this);this.$MercuryThreadlistContainer5=p.getForFBID(this.props.viewer);this.$MercuryThreadlistContainer6=new(c("SubscriptionsHandler"))();this.$MercuryThreadlistContainer6.addSubscriptions(this.$MercuryThreadlistContainer5.subscribe("threadlist-updated",function(r,s){this.$MercuryThreadlistContainer7(this.props.folder,this.props.filter);if(c("MercuryConfig").MessengerInboxRequests){this.props.folder===c("MessagingTag").INBOX&&this.$MercuryThreadlistContainer7(c("MessagingTag").PENDING,this.props.filter);this.props.folder===c("MessagingTag").PENDING&&this.$MercuryThreadlistContainer7(c("MessagingTag").INBOX,this.props.filter)}}.bind(this)));if(c("MercuryConfig").MessengerInboxRequests)this.$MercuryThreadlistContainer8(c("MessagingTag").PENDING,this.props.filter,this.$MercuryThreadlistContainer9(c("MessagingTag").PENDING)+c("MercuryThreadlistConstants").CONNECTION_REQUEST);this.$MercuryThreadlistContainer10(this.props.folder,this.props.filter)}.bind(this),"MercuryThreadlistContainer.react")};n.prototype.componentWillReceiveProps=function(o){if(o.resetAggregatedThreads!==this.props.resetAggregatedThreads||o.folder!==this.props.folder||o.filter!==this.props.filter||o.folder===c("MessagingTag").INBOX&&this.state.showAggregation==true)this.$MercuryThreadlistContainer10(o.folder,o.filter)};n.prototype.componentDidUpdate=function(){if(this.props.resetAggregatedThreads&&this.state.showAggregation)this.setState({showAggregation:false,aggregatedThreads:null})};n.prototype.componentWillUnmount=function(){this.$MercuryThreadlistContainer11();this.$MercuryThreadlistContainer12();this.$MercuryThreadlistContainer6&&this.$MercuryThreadlistContainer6.release()};n.prototype.render=function(){var o=this.props,p=o.ChildClass,q=o.folder,r=o.filter,s=babelHelpers.objectWithoutProperties(o,["ChildClass","folder","filter"]),t=this.state.isSearching?this.state.threads.get(k)||[]:this.state.threads.get(q)||[];return c("React").createElement(p,babelHelpers["extends"]({},s,{filter:this.props.filter,folder:q,isLoaded:q==="aggregation"||!!this.$MercuryThreadlistContainer1&&this.$MercuryThreadlistContainer1.hasLoadedThreadlist(q,r),isLoading:this.state.isLoading,isSearching:this.state.isSearching,newMessageRequestThreads:this.state.unreadMessageRequestThreads,onRenderThreads:this.props.onRenderThreads,onMessageRequestsClick:this.props.onMessageRequestsClick,showAggregation:this.state.showAggregation,threads:this.state.aggregatedThreads||t,onLoadMoreRequest:this.$MercuryThreadlistContainer13,onQuery:this.$MercuryThreadlistContainer14,onSearchResults:this.$MercuryThreadlistContainer15,onAggregationClick:this.$MercuryThreadlistContainer16,p2pJewelBannerContainer:this.$MercuryThreadlistContainer17(),maxInitialThreadCount:this.props.threadCount}))};n.prototype.$MercuryThreadlistContainer4=function(o){__p&&__p();var p=c("MercuryConfig").Unit||3,q=(c("MercuryConfig").Duration||3)*1e3*60*60*24,r=o.map(function(z){return this.$MercuryThreadlistContainer2.getThreadMetaNow(z).timestamp}.bind(this)),s=[];for(var t=0;t<r.length;t++){var u=r[t],v=r[t+p-1];if(v&&u-v<q){var w=[o[t]];for(var x=t+1;x<r.length;x++){var y=r[x];if(y&&u-y<q){w.push(o[x]);t++}else break}s.push(w)}else s.push(o[t])}return s};n.prototype.$MercuryThreadlistContainer17=function(){return c("React").createElement(c("P2PJewelBannerContainer.react"),null)};n.prototype.$MercuryThreadlistContainer10=function(o,p){__p&&__p();if(o==="aggregation")return;var q=c("MessengerStateStore").getState()&&c("MessengerStateStore").getState().threadIDs||this.props.threadIDs;if(!q)this.setState({showAggregation:false,aggregatedThreads:null});if(!c("MercuryConfig").MessengerInboxRequests&&o===c("MessagingTag").INBOX&&(c("gkx")("AT6h5--3KUdxbat1rL4n2mVcPcg9eZ8bwokXjpPZS-_sSShoFlPyHXdioNqIwODAz2vH7270MK0r4x8XFkaYt6-h")||this.props.source!==c("MercuryAPIArgsSource").JEWEL))this.$MercuryThreadlistContainer18();if(!this.$MercuryThreadlistContainer19(o,p))this.$MercuryThreadlistContainer8(o,p,this.props.threadCount||c("MercuryThreadlistConstants").JEWEL_THREAD_COUNT+m);else if(this.state.isLoading)this.setState({isLoading:false},function(){this.$MercuryThreadlistContainer7(o,p)}.bind(this));else this.$MercuryThreadlistContainer7(o,p)};n.prototype.$MercuryThreadlistContainer8=function(o,p,q){__p&&__p();if(!this.$MercuryThreadlistContainer1)return;this.$MercuryThreadlistContainer12();this.threadListReqsInFlight++;this.setState({isLoading:true},function(){this.props.onDataFetchStart&&this.props.onDataFetchStart();var r=this.$MercuryThreadlistContainer1.getFilteredThreadlist(c("MercuryThreadlistConstants").RECENT_THREAD_OFFSET,q,o,p||c("MercuryFilters").ALL,function(s){this.threadListReqsInFlight--;if(this.threadListReqsInFlight===0){this.props.onDataFetchEnd&&this.props.onDataFetchEnd();this.setState({isLoading:false})}}.bind(this),true,this.props.source);this.$MercuryThreadlistContainer21={subscriberID:r,folder:o,filter:p}}.bind(this))};n.prototype.$MercuryThreadlistContainer7=function(o,p,q){__p&&__p();if(!this.$MercuryThreadlistContainer1||!this.$MercuryThreadlistContainer2)return;this.$MercuryThreadlistContainer11();var r=void 0;if(c("MercuryConfig").MessengerInboxRequests&&o===c("MessagingTag").INBOX)r=this.$MercuryThreadlistContainer3();else if(o==="aggregation"||this.state.showAggregation){r=c("MessengerStateStore").getState()&&c("MessengerStateStore").getState().threadIDs||this.props.threadIDs;this.$MercuryThreadlistContainer22(r)}else r=q||this.$MercuryThreadlistContainer1.getAvailableThreadlistNow(o,p);var s=[].concat.apply([],r);this.$MercuryThreadlistContainer23=this.$MercuryThreadlistContainer2.getMultiThreadMeta(s,function(q){this.setState({threads:this.state.threads.set(o,this.$MercuryThreadlistContainer24(r,q))})}.bind(this))};n.prototype.$MercuryThreadlistContainer22=function(o){__p&&__p();var p=this.$MercuryThreadlistContainer1.getAvailableThreadlistNow(c("MessagingTag").PENDING,this.props.filter);if(o&&o.length>0){var q=o.filter(function(r){return p.indexOf(r)!==-1});this.$MercuryThreadlistContainer2.getMultiThreadMeta(q,function(r){if(!Array.isArray(r))r=Object.values(r);this.setState({aggregatedThreads:r})}.bind(this))}else this.setState({aggregatedThreads:null})};n.prototype.$MercuryThreadlistContainer24=function(o,p){return o.map(function(q){if(Array.isArray(q))return q.map(function(r){return p[r]});else return p[q]})};n.prototype.$MercuryThreadlistContainer19=function(o,p){var q=this.props.threadCount||c("MercuryThreadlistConstants").JEWEL_THREAD_COUNT+m;return!!(this.$MercuryThreadlistContainer1&&(this.$MercuryThreadlistContainer1.getThreadCount(o,p)>=q||this.$MercuryThreadlistContainer1.hasLoadedThreadlist(o,p)))};n.prototype.$MercuryThreadlistContainer9=function(o){var p=this.state.threads.get(o);return p?p.length:0};n.prototype.$MercuryThreadlistContainer11=function(){this.$MercuryThreadlistContainer2&&this.$MercuryThreadlistContainer23&&this.$MercuryThreadlistContainer2.unsubscribe(this.$MercuryThreadlistContainer23)};n.prototype.$MercuryThreadlistContainer12=function(){this.$MercuryThreadlistContainer1&&this.$MercuryThreadlistContainer21&&this.$MercuryThreadlistContainer1.unsubscribe(this.$MercuryThreadlistContainer21.subscriberID,this.$MercuryThreadlistContainer21.folder,this.$MercuryThreadlistContainer21.filter)};n.propTypes={ChildClass:j.func.isRequired,filter:j.string.isRequired,folder:j.string.isRequired,onMessageRequestsClick:j.func,onRenderThreads:j.func,onDataFetchStart:j.func,onDataFetchEnd:j.func,onAggregationClick:j.func,showCount:j.bool,showPresence:j.bool,source:j.string,threadCount:j.number,threadIDs:j.array,viewer:j.string.isRequired,onRenderBackArrow:j.func,resetAggregatedThreads:j.bool};n.defaultProps={source:c("MercuryAPIArgsSource").JEWEL};f.exports=n}),null);
__d("MessengerRecentContainer.react",["MercuryAPIArgsSource","MercuryThreadlistContainer.react","MessengerComposerSteps","MessengerComposerStore","messengerThreadlistReact","PureStoreBasedStateMixin","React"],(function a(b,c,d,e,f,g){"use strict";var h=c("messengerThreadlistReact").jsComponent,i=c("React").PropTypes,j=c("React").createClass({displayName:"MessengerRecentContainer",mixins:[c("PureStoreBasedStateMixin")(c("MessengerComposerStore"))],propTypes:{activeThreadID:i.string,filter:i.string.isRequired,folder:i.string.isRequired,viewer:i.string.isRequired,onAggregationClick:i.func,onRenderBackArrow:i.func,resetAggregatedThreads:i.bool},statics:{calculateState:function k(){return{isComposing:c("MessengerComposerStore").getState().step!==c("MessengerComposerSteps").NULL}}},render:function k(){return c("React").createElement(c("MercuryThreadlistContainer.react"),{ChildClass:h,activeThreadID:this.props.activeThreadID,filter:this.props.filter,folder:this.props.folder,isComposing:this.state.isComposing,onAggregationClick:this.props.onAggregationClick,onRenderBackArrow:this.props.onRenderBackArrow,resetAggregatedThreads:this.props.resetAggregatedThreads,isNewMessageActive:this.props.isNewMessageActive,source:c("MercuryAPIArgsSource").WEBMESSENGER,viewer:this.props.viewer})}});f.exports=j}),null);
__d("MessengerSearchContainer.react",["cx","fbt","Link.react","MessengerActions","MessengerSpinner.react","messengerThreadlistReact","MessengerThreadSearchActions","MessengerThreadSearchStore","MessengerView","React","StoreAndPropBasedStateMixin","emptyFunction"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=c("messengerThreadlistReact").jsComponent,k=c("React").PropTypes,l=c("React").createClass({displayName:"MessengerSearchContainer",mixins:[c("StoreAndPropBasedStateMixin")(c("MessengerThreadSearchStore"))],propTypes:{activeThreadID:k.string,filter:k.string.isRequired,folder:k.string.isRequired,isComposing:k.bool,isLoaded:k.bool,isLoading:k.bool,isNewMessageActive:k.bool,viewer:k.string.isRequired},statics:{calculateState:function m(n){var o=c("MessengerThreadSearchStore").getState();return{threads:o.threads?o.threads.toArray():[],threadsExhausted:o.threadsExhausted,loading:o.loading,query:o.query}}},_subscriptions:null,render:function m(){return c("React").createElement(j,babelHelpers["extends"]({},this.props,{clearQuery:this._handleClear,isLoaded:!this.state.loading&&!!this.state.threads,isLoading:this.state.loading,isSearching:false,newMessageRequestThreads:[],onLoadMoreRequest:c("MessengerThreadSearchActions").loadMoreThreads,onQuery:c("MessengerActions").changeQueryAll,onSearchResults:c("emptyFunction"),p2pJewelBannerContainer:null,queryString:this.state.query,renderLoadMore:this._renderLoadMoreLink,threads:this.state.threads}))},_renderLoadMoreLink:function m(){if(this.state.threadsExhausted)return c("React").createElement("div",{className:"_19hf"},c("React").createElement(c("Link.react"),{href:"#",onClick:this._handleClear},i._("Aucune conversation trouv\u00e9e")));if(this.state.loading)return c("React").createElement("div",{className:"_19hf"},c("React").createElement(c("MessengerSpinner.react"),null));return c("React").createElement("div",{className:"_19hf"},c("React").createElement(c("Link.react"),{href:"#",onClick:c("MessengerThreadSearchActions").loadMoreThreads,tabIndex:-1},i._("Charger plus de r\u00e9sultats")))},_handleClear:function m(){c("MessengerActions").changeMasterView(c("MessengerView").MASTER.RECENT)}});f.exports=l}),null);
__d("MessengerMasterView.react",["cx","BootloadOnRender.react","JSResource","LazyComponent.react","MercuryFilters","MercuryOrderedThreadlist","MercuryThreadlistConstants","MessagingTag","MessengerActions","MessengerRecentContainer.react","MessengerSearchContainer.react","MessengerSpinner.react","MessengerStateStore","MessengerView","React","messengerMasterViewHeaderReact"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("messengerMasterViewHeaderReact").jsComponent,l=c("React").PropTypes;i=babelHelpers.inherits(m,c("React").PureComponent);j=i&&i.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=j.constructor).call.apply(n,[this].concat(q)),this.state={aggregationView:false,resetAggregatedThreads:false,threadIDs:[]},this.$MessengerMasterView1=function(s,t){this.setState({aggregationView:true,resetAggregatedThreads:false,threadIDs:t})}.bind(this),this.$MessengerMasterView2=function(){this.setState({aggregationView:false,resetAggregatedThreads:true},function(){c("MessengerActions").selectAggregation(null)})}.bind(this),this.$MessengerMasterView3=function(){this.setState({aggregationView:true,resetAggregatedThreads:false})}.bind(this),o}m.prototype.componentDidMount=function(){var n=c("MessengerStateStore").getState().threadIDs;if(n)this.setState({threadIDs:n,aggregationView:true})};m.prototype.$MessengerMasterView4=function(){var n=this.props.detailView===c("MessengerView").DETAIL.COMPOSE;switch(this.props.view){case c("MessengerView").MASTER.PEOPLE:return c("React").createElement(c("BootloadOnRender.react"),{component:c("React").createElement(c("LazyComponent.react"),{activeThreadID:n?null:this.props.activeThreadID,viewer:this.props.viewer}),loader:c("JSResource")("MessengerPeopleList.react").__setRef("MessengerMasterView.react"),placeholder:c("React").createElement("div",{className:"_2pif",style:{textAlign:"center"}},c("React").createElement(c("MessengerSpinner.react"),null))});case c("MessengerView").MASTER.PAYMENT:case c("MessengerView").MASTER.RECENT:return c("React").createElement(c("MessengerRecentContainer.react"),{activeThreadID:this.props.activeThreadID,filter:this.props.filter,folder:this.props.folder,isNewMessageActive:n,onAggregationClick:this.$MessengerMasterView1,onRenderBackArrow:this.$MessengerMasterView3,resetAggregatedThreads:this.state.resetAggregatedThreads,viewer:this.props.viewer});case c("MessengerView").MASTER.SEARCH:return c("React").createElement(c("MessengerSearchContainer.react"),{activeThreadID:this.props.activeThreadID,filter:this.props.filter,folder:this.props.folder,isNewMessageActive:n,viewer:this.props.viewer});default:throw new Error("Unknown master view: "+this.props.view)}};m.prototype.render=function(){return c("React").createElement("div",null,c("React").createElement(k,{aggregationView:this.state.aggregationView,filter:this.props.filter,folder:this.props.folder,onBackToRecent:this.$MessengerMasterView2,threadIDs:this.state.threadIDs,view:this.props.view,viewer:this.props.viewer}),this.$MessengerMasterView4())};m.propTypes={activeThreadID:l.string,detailView:l.string,filter:l.string,folder:l.string.isRequired,view:l.string.isRequired,viewer:l.string.isRequired};f.exports=m}),null);
__d("messengerMasterViewReact",["ReasonReact","bs_js_null_undefined","MessengerMasterView.react"],(function a(b,c,d,e,f,g){"use strict";function h(i,j,k,l,m,n,o){return c("ReasonReact").wrapJsForReason(c("MessengerMasterView.react"),{activeThreadID:c("bs_js_null_undefined").from_opt(i),detailView:c("bs_js_null_undefined").from_opt(j),filter:c("bs_js_null_undefined").from_opt(k),folder:l,view:m,viewer:n},o)}g.make=h}),null);
__d("P2PPaymentPickerDialog.react",["cx","fbt","immutable","MessengerDialog.react","MessengerDialogButton.react","MessengerDialogCancelButton.react","MessengerDialogHeader.react","MessengerDialogTitle.react","MessengerGraphQLTokenizer.react","React"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("React").PropTypes,m=460,n=c("immutable").Set();j=babelHelpers.inherits(o,c("React").Component);k=j&&j.prototype;function o(){__p&&__p();var p,q;for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=k.constructor).call.apply(p,[this].concat(s)),this.state={entries:c("immutable").Set()},this.$P2PPaymentPickerDialog1=function(){var u=this.state.entries;this.props.handleContinue(u)}.bind(this),this.$P2PPaymentPickerDialog2=function(){var u=this.state.entries;this.props.handleCancel(u)}.bind(this),this.handleAddEntryAttempt=function(u){if(this.props.multiSelect)this.setState({entries:this.state.entries.add(u)});else this.setState({entries:c("immutable").Set.of(u)})}.bind(this),this.handleRemoveEntryAttempt=function(u){this.setState({entries:this.state.entries["delete"](u)})}.bind(this),q}o.prototype.renderHeader=function(){return c("React").createElement(c("MessengerDialogHeader.react"),null,c("React").createElement(c("MessengerDialogCancelButton.react"),null),c("React").createElement(c("MessengerDialogTitle.react"),null,i._("Envoyer de l\u2019argent")),c("React").createElement(c("MessengerDialogButton.react"),{disabled:!this.state.entries.size,label:i._("Continuer"),type:"primary",onClick:this.$P2PPaymentPickerDialog1}))};o.prototype.renderTokenizer=function(){return c("React").createElement(c("MessengerGraphQLTokenizer.react"),{autoFocus:true,canViewerSendMoneyFilter:true,className:"_2wsl",context:null,enableMessageSearch:false,entries:this.state.entries.toList(),excludeGroups:true,excludePages:true,forceHideClearButton:true,hasHoverState:false,originalEntryIDs:n,placeholder:i._("Saisissez le nom d\u2019une personne"),scrollableViewClassName:"_2wsm",shouldQueryInternalBot:false,shouldQueryVCEndpoint:false,useLayer:false,viewer:this.props.viewer,width:m,onAddEntryAttempt:this.handleAddEntryAttempt,onClear:null,onRemoveEntryAttempt:this.handleRemoveEntryAttempt})};o.prototype.render=function(){return c("React").createElement(c("MessengerDialog.react"),{className:"_2wsn",type:"default",width:m,onToggle:this.$P2PPaymentPickerDialog2},this.renderHeader(),this.renderTokenizer())};o.propTypes={viewer:l.string.isRequired,handleContinue:l.func.isRequired,handleCancel:l.func.isRequired,multiSelect:l.bool.isRequired};f.exports=o}),null);
__d("MessengerP2PDialogContainer.react",["Bootloader","immutable","MercuryIDs","MercuryOrderedThreadlist","MessagingTag","MessengerActions","MessengerStateStore","MessengerView","P2PActions","P2PDialogContainer.react","P2PPaymentPickerDialog.react","React"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("React").PropTypes;h=babelHelpers.inherits(k,c("React").Component);i=h&&h.prototype;k.prototype.componentDidMount=function(){var l=c("MessengerStateStore").getState();if(l.detailView===c("MessengerView").DETAIL.PAYFRIENDPICKER)this.$MessengerP2PDialogContainer1();var m=l.extraQueryParams;if(m&&m.id)c("Bootloader").loadModules(["P2PSendMoneyDialogStore"],function(){this.$MessengerP2PDialogContainer2(m)}.bind(this),"MessengerP2PDialogContainer.react")};k.prototype.componentDidUpdate=function(){var l=c("MessengerStateStore").getState();if(l.detailView===c("MessengerView").DETAIL.PAYFRIENDPICKER)this.$MessengerP2PDialogContainer1();var m=c("MessengerStateStore").getState().extraQueryParams;if(m&&m.id)this.$MessengerP2PDialogContainer2(m)};k.prototype.$MessengerP2PDialogContainer1=function(){var l=function l(n){c("P2PActions").hideDialog();var o=n.first().getUniqueID();c("MessengerActions").changeID(o)},m=function(n){c("P2PActions").hideDialog();c("MercuryOrderedThreadlist").getForFBID(this.props.viewer).getThreadlist(0,1,c("MessagingTag").INBOX,function(o){c("MessengerActions").selectThread(o[0])})}.bind(this);c("P2PActions").showDialog(c("P2PPaymentPickerDialog.react"),{viewer:this.props.viewer,handleContinue:l,handleCancel:m,multiSelect:false})};k.prototype.$MessengerP2PDialogContainer2=function(l){var m=c("MercuryIDs").getThreadIDFromUserID(l.id);c("P2PActions").chatSendViewOpened({referrer:"chat",threadID:m,amount:l.a,memoText:l.m})};k.prototype.render=function(){return c("React").createElement(c("P2PDialogContainer.react"),null)};function k(){h.apply(this,arguments)}k.propTypes={viewer:j.string.isRequired};f.exports=k}),null);
__d("messengerP2PDialogContainerReact",["ReasonReact","MessengerP2PDialogContainer.react"],(function a(b,c,d,e,f,g){"use strict";function h(i,j){return c("ReasonReact").wrapJsForReason(c("MessengerP2PDialogContainer.react"),{viewer:i},j)}g.make=h}),null);
__d("messengerReasonDialogContainerReact",["bs_list","bs_array","bs_block","bs_curry","React","bs_pervasives","ReasonReact","messengerDialogsRe"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(l){return[l]}var i=c("ReasonReact").reducerComponent("MessengerReasonDialogContainer");function j(){__p&&__p();var l=i.slice();l[4]=function(m){c("messengerDialogsRe").addHandler(c("bs_curry")._1(m[1],h));return 0};l[9]=function(m){var n=m[2][0];if(n)return c("React").createElement("div",undefined,c("bs_array").of_list(c("bs_list").mapi(function(o,p){return c("React").createElement("span",{key:c("bs_pervasives").string_of_int(o)},c("bs_curry")._1(p,0))},c("bs_list").rev(n[0]))));else return null};l[10]=function(){return[0]};l[12]=function(m,n){return c("bs_block").__(0,[[m[0]]])};return l}var k=c("ReasonReact").wrapReasonForJs(i,function(){return j([])});g.updateDialog=h;g.component=i;g.make=j;g.jsComponent=k}),null);
__d("pagesPlatformDialogContainerReact",["ReasonReact","PagesPlatformDialogContainer.react"],(function a(b,c,d,e,f,g){"use strict";function h(i){return c("ReasonReact").wrapJsForReason(c("PagesPlatformDialogContainer.react"),{},i)}g.make=h}),null);
__d("messengerReact",["cx","React","utilsRe","CurrentUser","ReasonReact","bs_js_primitive","MessengerStateStore","messengerBannerReact","messengerBugNubReact","MessengerSettingsStore","messengerDetailViewReact","messengerMasterViewReact","PureStoreBasedStateMixin","messengerErrorBoundaryReact","fBPaymentsDialogContainerReact","mNCommerceDialogContainerReact","messengerP2PDialogContainerReact","pagesPlatformDialogContainerReact","ReactComponentWithPureRenderMixin","messengerReasonDialogContainerReact"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();function i(l){l.preventDefault();return 0}function j(l,m,n,o,p){var q=+c("CurrentUser").isEmployee();return c("React").createElement("div",{className:"_li"},c("ReasonReact").element(0,0,c("messengerBannerReact").make(m,o,n,[])),c("React").createElement("div",{className:"_4sp8",onDragEnter:i,onDragOver:i,onDrop:i},c("React").createElement("div",{className:"_1enh"},c("ReasonReact").element(0,0,c("messengerErrorBoundaryReact").make(0,["conversation list"],[c("ReasonReact").element(0,0,c("messengerMasterViewReact").make(c("bs_js_primitive").null_undefined_to_opt(p.state.activeThreadID),c("bs_js_primitive").null_undefined_to_opt(p.state.detailView),[p.state.filter],p.state.folder,p.state.masterView,c("CurrentUser").getID(),[]))])),q!==0?c("ReasonReact").element(0,0,c("messengerBugNubReact").make([l?c("utilsRe").isTruthy(l[0].isBetaEnabled):0],l?[l[0].unixName]:0,[])):null),c("ReasonReact").element(0,0,c("messengerDetailViewReact").make(c("bs_js_primitive").null_undefined_to_opt(p.state.activeThreadID),c("bs_js_primitive").null_undefined_to_opt(p.state.mid),c("bs_js_primitive").null_undefined_to_opt(p.state.query),c("bs_js_primitive").null_undefined_to_opt(p.state.detailView),c("CurrentUser").getID(),[]))),c("ReasonReact").element(0,0,c("messengerReasonDialogContainerReact").make([])),c("ReasonReact").element(0,0,c("mNCommerceDialogContainerReact").make([])),c("ReasonReact").element(0,0,c("messengerP2PDialogContainerReact").make(c("CurrentUser").getID(),[])),c("ReasonReact").element(0,0,c("pagesPlatformDialogContainerReact").make([])),c("ReasonReact").element(0,0,c("fBPaymentsDialogContainerReact").make([])))}var k=c("React").createClass({displayName:"MessengerReact",mixins:[c("ReactComponentWithPureRenderMixin"),c("PureStoreBasedStateMixin")(c("MessengerStateStore"),c("MessengerSettingsStore"))],statics:{calculateState:function l(){return{state:c("MessengerStateStore").getState(),settings:c("MessengerSettingsStore").getSettings()}}},componentDidMount:function l(){var m=this,n=m.props;return n.onMount()},componentWillUnmount:function l(){c("MessengerStateStore").destroy();c("MessengerSettingsStore").destroy();return 0},render:function l(){var m=this,n=m.props,o=m.state;return j(c("bs_js_primitive").null_undefined_to_opt(n.employeeData),+n.showWorkchatUpsellBanner,c("utilsRe").nullUndefinedBooleanToOptionBool(n.isFirstRedirect),c("bs_js_primitive").null_undefined_to_opt(n.promotionData),o)}});g.preventDefault=i;g.make=j;g.jsComponent=k}),null);
__d("messengerSearchConfirmationDialogReact",["fbt","ReasonReact","messengerDialogsRe","messengerDialogReact"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("ReasonReact").statelessComponent("MessengerSearchConfirmationDialog");function j(m){if(m)return 0;else return c("messengerDialogsRe").removeDialog(0)}function k(m,n,o){var p=i.slice();p[9]=function(){return c("ReasonReact").element(0,0,c("messengerDialogReact").Dialog[0](0,j,0,0,0,0,0,[c("ReasonReact").element(0,0,c("messengerDialogReact").Header[0](0,0,h._("Rechercher \"{term}\"\u00a0?",[h.param("term",n)]))),c("ReasonReact").element(0,0,c("messengerDialogReact").Footer[0](0,0,[c("ReasonReact").element(0,0,c("messengerDialogReact").Button[0]([2],[h._("OK")],0,0,[m],[0],0,0,[])),c("ReasonReact").element(0,0,c("messengerDialogReact").CancelButton[0](0,[]))]))]))};return p}var l=c("ReasonReact").wrapReasonForJs(i,function(m){return k(m.onSearch,m.term,[])});g.component=i;g.handleToggle=j;g.make=k;g.jsComponent=l}),null);
__d("MessengerMount",["cx","Bootloader","CSS","ChannelConnection","ChannelManager","CurrentUser","HotLikeSound","InstantGamesGateKeepers","mercuryBlockedParticipantsRe","mercuryIgnoredParticipantsRe","MercuryDelayedRoger","MercuryDeliveryReceiptsRe","MercuryDeliveryState","MercuryOrderedThreadlist","MercuryParticipants","MercuryServerPayloadPreprocessor","MercurySyncEnvironment","MercuryThreads","MercuryThreadIDMap","MercuryUnreadState","MercuryUnseenState","messengerReact","MessengerActions","messengerDialogsRe","MessengerAttributionTagsStore","MessengerComposerActions","MessengerBrowserAlerts","MessengerComposerStore","MessengerConfig","MessengerEnvironment","messengerInitialDataTransformerRe","MessengerMDotMeReferralStore","MessengerPage","MessengerRTCMessageHandler","MessengerSettingsStore","messengerSearchConfirmationDialogReact","MessengerStateStore","MessengerThreadSearchStore","MessengerURIListener","MessengerURIConstants","MessengerURISerializer","MessengerView","MNPlatformTagsDataManager","OmniMStore","React","ReactDOM","URI","gkx","goURI","OrderedFriendsList","PageHooks"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("MercuryDelayedRoger").get(),j=c("messengerReact").jsComponent,k=c("messengerSearchConfirmationDialogReact").jsComponent;c("OrderedFriendsList");c("PageHooks");c("ChannelManager").startChannelManager();var l={mount:function q(r,s){__p&&__p();c("MessengerEnvironment").setMessengerUI(true);c("MessengerPage").emit(c("MessengerPage").Events.JS_LOADED);var t=c("CurrentUser").getID();m(t);n(t);o(t,s);c("MessengerPage").emit(c("MessengerPage").Events.DATA_INITIALIZED);if(document.documentElement)c("CSS").addClass(document.documentElement,"_51l0");if(document.body){var u=document.body;c("CSS").addClass(u,"_z4_");if(c("MessengerConfig").SFFontEnabled)c("CSS").addClass(u,"__6g");if(c("MessengerConfig").SegoeUIDisabled)c("CSS").addClass(u,"_2por");if(c("MessengerEnvironment").facebookdotcom)c("CSS").addClass(u,"_mvg")}c("HotLikeSound").setCheckSoundEnabledFunc(function(){return c("MessengerSettingsStore").getSettings().sound_enabled});c("ReactDOM").render(c("React").createElement(j,{employeeData:s.employeeData,facebookNotificationTokens:s.facebookNotificationTokens,showWorkchatUpsellBanner:s.showWorkchatUpsellBanner,promotionData:s.promotionData,isFirstRedirect:!c("gkx")("AT71LRcbgltkBEoVFCCCdNV29c5_0WezosqmKxl4WEXk8XQNpOgP_oLFicsbGWor0e-3lTCNH9el3cQIDbyD2Ry3"),viewer:t,onMount:function v(){return p(s)}}),r)}};function m(q){__p&&__p();i;c("MercuryDeliveryReceiptsRe").getForFBID(q);c("MercuryDeliveryState").getForFBID(q);c("MercuryOrderedThreadlist").getForFBID(q);c("MercuryParticipants");c("mercuryBlockedParticipantsRe").getForFBID(q);c("mercuryIgnoredParticipantsRe").getForFBID(q);c("MercuryThreads").getForFBID(q);c("MercuryUnreadState").getForFBID(q);c("MercuryUnseenState").getForFBID(q);c("MessengerAttributionTagsStore");c("MessengerComposerStore");c("MessengerMDotMeReferralStore");c("MessengerSettingsStore");c("MessengerStateStore");c("MessengerThreadSearchStore").getForFBID(q)}function n(q){c("MessengerURIListener").start();c("MercurySyncEnvironment").setUp();c("MessengerBrowserAlerts").init(q);c("MessengerRTCMessageHandler").init();c("ChannelConnection");c("OmniMStore").setUp()}function o(q,r){__p&&__p();var s,t=c("MercuryServerPayloadPreprocessor").getForFBID(q),u=r.lastReadThreadKey;if(r.graphqlPayload){var v=c("messengerInitialDataTransformerRe").transform(r.graphqlPayload),w=v[0];u=v[1];w.message_blocked_ids=r.mercuryPayload.message_blocked_ids;t.handleUpdate(w)}else t.handleUpdate(r.mercuryPayload);var x=new(c("URI"))(window.location.href),y=c("MessengerURISerializer").deserialize(x);if(y.query)(function(){var B=y.masterView===c("MessengerView").MASTER.SEARCH,C=y.query;y.query=null;y.masterView=c("MessengerView").MASTER.RECENT;c("messengerDialogsRe").showDialog(function(){return c("React").createElement(k,{term:C,onSearch:function D(){c("messengerDialogsRe").removeAllDialogs();B?c("MessengerActions").changeQueryAll(C):c("MessengerActions").changeQuery(C)}})})})();c("goURI")(c("MessengerURISerializer").serialize(y),false,true);if(x.getPath().match(c("MessengerURIConstants").COMPOSE_SUBPATH+"/?$"))return;if(y.masterView===c("MessengerView").MASTER.PAYMENT)return;c("MessengerActions").changeMDotMeReferral(r.mDotMeReferral,r.mDotMeReferralThreadKey);var z=c("MercuryThreadIDMap").get(),A=z.getClientIDFromServerIDNow(u);if(A){c("MessengerComposerActions").exitComposeState();c("MessengerActions").selectThread(A)}else if(x.getPath()==="/")c("MessengerActions").changeDetailView(c("MessengerView").DETAIL.COMPOSE);c("MNPlatformTagsDataManager").updateThreadTabAfterSelectThread(r.messagingSource,r.mDotMeReferralThreadKey&&r.mDotMeReferralThreadKey.toString())}function p(q){__p&&__p();c("MessengerPage").emit(c("MessengerPage").Events.APP_MOUNTED);if(q.gameData&&q.gameData.gameID&&c("InstantGamesGateKeepers").messenger_dot_com_shareable_link_open_game)c("Bootloader").loadModules(["MessengerGamesQuicksilverPlayerContainer.react","InstantGameContextType","QuicksilverSources"],function(r,s,t){var u=null,v=s.SOLO;if(q.gameData.contextSourceID){u=q.gameData.contextSourceID;v=s.THREAD}c("messengerDialogsRe").showDialog(function(){return c("React").createElement(r,{contextSourceID:u,contextType:v,onHide:function w(){return c("messengerDialogsRe").removeAllDialogs()},gameID:q.gameData.gameID,source:t.M_ME_LINK,sourceID:null})})},"MessengerMount")}f.exports=l}),null);