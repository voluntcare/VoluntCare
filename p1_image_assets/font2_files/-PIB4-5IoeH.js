if (self.CavalryLogger) { CavalryLogger.start_js(["8EzWp"]); }

__d("XBrowserPushDisabledController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/notifications/client/push/disabled/",{})}),null);
__d("XBrowserPushXOutController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/notifications/client/push/xout/",{})}),null);
__d("XServiceWorkerSessionChangeController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/service_workers/session/persist/",{})}),null);
__d("BrowserPushSessionChange.react",["cx","fbt","ix","AsyncRequest","BanzaiLogger","Image.react","ImageBlock.react","LayerFadeOnHide","React","ReloadPage","XBrowserPushDisabledController","XBrowserPushXOutController","XServiceWorkerSessionChangeController","XUIDialog.react","XUIDialogBody.react","XUIDialogButton.react","XUIDialogFooter.react","XUIDialogOkayButton.react","XUIDialogTitle.react","XUISpinner.react","XUIText.react"],(function a(b,c,d,e,f,g,h,i,j){__p&&__p();var k,l,m=c("React").PropTypes;k=babelHelpers.inherits(n,c("React").Component);l=k&&k.prototype;function n(){__p&&__p();var o,p;"use strict";for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=l.constructor).call.apply(o,[this].concat(r)),this.state={dialogShown:true,spin:false},this.$BrowserPushSessionChange1=function(t){if(t)return;this.setState({dialogShown:false});this.$BrowserPushSessionChange2("session_keep");var u=c("XServiceWorkerSessionChangeController").getURIBuilder().getURI();new(c("AsyncRequest"))().setURI(u).setMethod("POST").setData({app_id:this.props.push.appID}).setAllowCrossPageTransition(true).setHandler(function(v){this.props.onHide()}.bind(this)).send()}.bind(this),this.$BrowserPushSessionChange3=function(){this.setState({spin:true});this.$BrowserPushSessionChange2("session_uninstall");this.$BrowserPushSessionChange2("xout");var t=c("XBrowserPushXOutController").getURIBuilder().getURI(),u=function(){this.props.push.unregisterPushAndSW(c("XBrowserPushDisabledController"),c("AsyncRequest")).done(function(v){c("ReloadPage").now()})}.bind(this);new(c("AsyncRequest"))().setURI(t).setMethod("POST").setHandler(u).setAllowCrossPageTransition(true).send()}.bind(this),p}n.prototype.$BrowserPushSessionChange2=function(event){"use strict";var o={event:event,appid:this.props.push.appID,surface:"session_change"};c("BanzaiLogger").log("BrowserPushLoggerConfig",o)};n.prototype.componentDidMount=function(){"use strict";this.$BrowserPushSessionChange2("session_change_prompt")};n.prototype.render=function(){"use strict";if(!this.state.dialogShown)return null;var o=j("92724");return c("React").createElement(c("XUIDialog.react"),{shown:true,behaviors:{LayerFadeOnHide:c("LayerFadeOnHide")},onToggle:this.$BrowserPushSessionChange1,width:445,key:"dialog"},c("React").createElement(c("XUIDialogTitle.react"),null,i._("Notifications sur le bureau activ\u00e9es")),c("React").createElement(c("XUIDialogBody.react"),null,this.state.spin?c("React").createElement(c("XUISpinner.react"),{size:"large"}):c("React").createElement(c("ImageBlock.react"),{spacing:"medium"},c("React").createElement(c("Image.react"),{src:o,alt:i._("Notifications sur le bureau activ\u00e9es")}),c("React").createElement("div",null,c("React").createElement("div",{className:"_3-8h"},c("React").createElement(c("XUIText.react"),{size:"large"},i._("Les nouvelles notifications apparaissent au coin de votre \u00e9cran."))),c("React").createElement("div",{className:"_3-8h"},c("React").createElement(c("XUIText.react"),{size:"small"},i._("Pour recevoir les notifications, vous resterez maintenant connect\u00e9(e) \u00e0 Facebook sur cet ordinateur. Si vous utilisez un ordinateur public ou ne souhaitez pas rester connect\u00e9(e), cliquez sur Annuler pour d\u00e9sactiver les notifications sur le bureau.")))))),c("React").createElement(c("XUIDialogFooter.react"),null,c("React").createElement(c("XUIDialogButton.react"),{action:"button",label:i._("Annuler"),onClick:this.$BrowserPushSessionChange3}),c("React").createElement(c("XUIDialogOkayButton.react"),{use:"confirm",action:"cancel"})))};n.propTypes={onHide:m.func.isRequired,push:m.object.isRequired};f.exports=n}),null);
__d("MockChromeBrowserNotification.react",["cx","fbt","ix","BrowserPushStrings","DOMContainer.react","Image.react","React","WorkModeConfig","isNode","joinClasses"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l;k=babelHelpers.inherits(m,c("React").Component);l=k&&k.prototype;m.prototype.render=function(){var n=c("isNode")(this.props.message)?c("React").createElement(c("DOMContainer.react"),null,this.props.message):this.props.message,o=!this.props.image&&c("WorkModeConfig").is_work_user,p=this.props.image?this.props.image:this.props.defaultImage;return c("React").createElement("section",{className:c("joinClasses")(this.props.className,"_257o")},c("React").createElement("span",{className:"_61kd"}),c("React").createElement(c("Image.react"),{className:(!o?"_ega":"")+(o?" _2rk4":""),draggable:false,src:p}),c("React").createElement("div",{className:"_egb"},c("React").createElement("h3",null,c("BrowserPushStrings").title),c("React").createElement("p",null,n),c("React").createElement("cite",null,window.location.hostname)))};function m(){k.apply(this,arguments)}m.defaultProps={message:c("WorkModeConfig").work_chat_as_home?i._("Vous avez de nouveaux messages."):i._("Vous avez de nouvelles notifications."),defaultImage:c("WorkModeConfig").is_work_user?c("WorkModeConfig").work_chat_as_home?j("277478"):j("351290"):j("76304")};f.exports=m}),null);
__d("MockEdgeBrowserNotification.react",["cx","fbt","ix","BrowserPushStrings","DOMContainer.react","Image.react","React","WorkModeConfig","isNode","joinClasses"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l;k=babelHelpers.inherits(m,c("React").Component);l=k&&k.prototype;m.prototype.render=function(){var n=c("isNode")(this.props.message)?c("React").createElement(c("DOMContainer.react"),null,this.props.message):this.props.message,o=i._("Microsoft Edge");return c("React").createElement("section",{className:c("joinClasses")(this.props.className,"_2eed")},c("React").createElement(c("Image.react"),{className:(!c("WorkModeConfig").is_work_user?"_2eee":"")+(c("WorkModeConfig").is_work_user?" _3_qv":""),draggable:false,src:this.props.image}),c("React").createElement("div",{className:"_2eef"},c("React").createElement("h3",{className:"_2eeg"},c("BrowserPushStrings").title),c("React").createElement("p",{className:"_2eeh"},n),c("React").createElement("div",{className:"_2eei"},o," \xb7 ",window.location.hostname)))};function m(){k.apply(this,arguments)}m.defaultProps={message:c("WorkModeConfig").work_chat_as_home?i._("Vous avez de nouveaux messages."):i._("Vous avez de nouvelles notifications."),image:c("WorkModeConfig").is_work_user?c("WorkModeConfig").work_chat_as_home?j("277478"):j("351290"):j("363137")};f.exports=m}),null);
__d("MockFirefoxBrowserNotification.react",["cx","fbt","ix","BrowserPushStrings","DOMContainer.react","Image.react","React","WorkModeConfig","isNode","joinClasses"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l;k=babelHelpers.inherits(m,c("React").Component);l=k&&k.prototype;m.prototype.render=function(){var n=c("isNode")(this.props.message)?c("React").createElement(c("DOMContainer.react"),null,this.props.message):this.props.message,o=this.props.isWindows;return c("React").createElement("section",{className:c("joinClasses")(this.props.className,"_g5o")},o?this.$MockFirefoxBrowserNotification1(n):this.$MockFirefoxBrowserNotification2(n))};m.prototype.$MockFirefoxBrowserNotification2=function(n){return c("React").createElement("div",{className:"_g5p"},c("React").createElement("div",{className:"_g5q"},c("React").createElement(c("Image.react"),{draggable:false,src:j("355144")})),c("React").createElement("div",{className:"_g5r"},c("React").createElement("h3",null,c("BrowserPushStrings").title),c("React").createElement("cite",null,window.location.hostname),c("React").createElement("p",null,n)),c("React").createElement(c("Image.react"),{className:(!c("WorkModeConfig").is_work_user?"_g5u":"")+(c("WorkModeConfig").is_work_user?" _gcl":""),draggable:false,src:this.props.image}))};m.prototype.$MockFirefoxBrowserNotification1=function(n){return c("React").createElement("div",{className:"_g5w"},c("React").createElement("h3",null,c("BrowserPushStrings").title),c("React").createElement("div",{className:"_g5x"},c("React").createElement("span",{className:"_g5z"}),c("React").createElement("span",{className:"_g7w"})),c("React").createElement("div",{className:"_g5r"},c("React").createElement(c("Image.react"),{className:(!c("WorkModeConfig").is_work_user?"_g5u":"")+(c("WorkModeConfig").is_work_user?" _gcl":""),draggable:false,src:this.props.image}),c("React").createElement("div",{className:"_g7x"},c("React").createElement("p",null,n),c("React").createElement("cite",null,window.location.hostname))))};function m(){k.apply(this,arguments)}m.defaultProps={message:c("WorkModeConfig").work_chat_as_home?i._("Vous avez de nouveaux messages."):i._("Vous avez de nouvelles notifications."),image:c("WorkModeConfig").is_work_user?c("WorkModeConfig").work_chat_as_home?j("277478"):j("351290"):j("363137"),isWindows:false};f.exports=m}),null);
__d("MockBrowserNotification.react",["MockChromeBrowserNotification.react","MockEdgeBrowserNotification.react","MockFirefoxBrowserNotification.react","React","UserAgent"],(function a(b,c,d,e,f,g){"use strict";f.exports=function h(i){var j=c("UserAgent").isPlatform("Windows");if(c("UserAgent").isBrowser("Firefox"))return c("React").createElement(c("MockFirefoxBrowserNotification.react"),babelHelpers["extends"]({},i,{isWindows:j}));else if(c("UserAgent").isBrowser("Edge"))return c("React").createElement(c("MockEdgeBrowserNotification.react"),i);return c("React").createElement(c("MockChromeBrowserNotification.react"),babelHelpers["extends"]({},i,{isWindows:j}))}}),null);
__d("NotificationPermissionNotice.react",["cx","fbt","Event","Keys","React","XUIAmbientNUX.react"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j,k,l=[],m=c("React").PropTypes;j=babelHelpers.inherits(n,c("React").Component);k=j&&j.prototype;n.prototype.componentDidMount=function(){"use strict";l.push(c("Event").listen(window,"mousedown",this.props.onHide));l.push(c("Event").listen(window,"keydown",function(event){if(event.keyCode===c("Keys").ESC)this.props.onHide()}.bind(this)))};n.prototype.componentWillUnmount=function(){"use strict";while(l.length>0){var o=l.pop();o.remove()}};n.prototype.renderLayers=function(){"use strict";var o=this.props.shortText?i._("Cliquez sur le cadenas pour autoriser {browser_name} \u00e0 vous envoyer des notifications sur le bureau.",[i.param("browser_name",this.props.browserName)]):i._("Si vous avez chang\u00e9 d\u2019avis, cliquez sur le cadenas pour autoriser {browser_name} \u00e0 vous envoyer des notifications sur le bureau.",[i.param("browser_name",this.props.browserName)]);return c("React").createElement(c("XUIAmbientNUX.react"),{contextRef:function(){return this.refs.noticeAnchor}.bind(this),shown:true,position:"below",onCloseButtonClick:this.props.onHide,key:"nux"},o)};n.prototype.render=function(){"use strict";return c("React").createElement("span",null,c("React").createElement("span",{ref:"noticeAnchor",className:"_1_i1"}),this.renderLayers())};function n(){"use strict";j.apply(this,arguments)}n.propTypes={onHide:m.func.isRequired,shortText:m.bool,browserName:m.string.isRequired};f.exports=n}),null);
__d("Spotlight",["csx","cx","Arbiter","ArbiterMixin","DOM","JSXDOM","Layer","LayerAutoFocus","LayerButtons","LayerTabIsolation","ModalLayer","Vector","classWithMixins","joinClasses","mixin"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j,k;j=babelHelpers.inherits(l,c("classWithMixins")(c("Layer"),c("mixin")(c("ArbiterMixin"))));k=j&&j.prototype;function l(n,o){"use strict";k.constructor.call(this,n,o);this.stageMinSize=new(c("Vector"))(0,0);this.stagePadding=new(c("Vector"))(0,0)}l.prototype._buildWrapper=function(n,o){"use strict";var p=c("joinClasses")("_n8"+(n.wash==="dark"||!n.wash?" _3qx":"")+(n.wash==="xui"?" _4-hy":""),n.rootClassName);return c("JSXDOM").div({className:p},c("JSXDOM").div({className:"_n9"},o))};l.prototype._getDefaultBehaviors=function(){"use strict";return k._getDefaultBehaviors.call(this).concat([m,c("LayerAutoFocus"),c("LayerButtons"),c("LayerTabIsolation"),c("ModalLayer")])};l.prototype.getContentRoot=function(){"use strict";if(!this._content)this._content=c("DOM").find(this.getRoot(),"div._n3");return this._content};l.prototype.configure=function(n){"use strict";if(n.stageMinSize)this.stageMinSize=n.stageMinSize;if(n.stagePadding)this.stagePadding=n.stagePadding};l.prototype.onContentLoaded=function(){"use strict";this.inform("content-load")};l.prototype.updatePermalink=function(n){"use strict";this.inform("permalinkchange",n)};Object.assign(l.prototype,{stageMinSize:null,stagePadding:null});function m(n){"use strict";this._layer=n}m.prototype.enable=function(){"use strict";this._subscription=this._layer.subscribe(["show","hide"],function(n,o){if(n==="show")c("Arbiter").inform("layer_shown",{type:"Spotlight"});else c("Arbiter").inform("layer_hidden",{type:"Spotlight"})})};m.prototype.disable=function(){"use strict";this._subscription.unsubscribe();this._subscription=null};Object.assign(m.prototype,{_subscription:null});f.exports=l}),null);
__d("Spotlight.react",["LayerAutoFocusReact","LayerHideOnBlur","LayerHideOnEscape","LayerRefocusOnHide","ReactLayer","Spotlight","React"],(function a(b,c,d,e,f,g){__p&&__p();var h=c("React").PropTypes,i=c("ReactLayer").createClass({propTypes:{causalElement:h.instanceOf(HTMLElement),onHide:h.func,rootClassName:h.string,shown:h.bool,wash:h.oneOf(["light","xui","dark"])},getDefaultEnabledBehaviors:function j(){return{hideOnBlur:c("LayerHideOnBlur"),hideOnEscape:c("LayerHideOnEscape"),refocusOnHide:c("LayerRefocusOnHide"),autoFocus:c("LayerAutoFocusReact")}},createLayer:function j(k){var l=this.enumerateBehaviors(this.props.behaviors),m={addedBehaviors:l,rootClassName:this.props.rootClassName,wash:this.props.wash},n=new(c("Spotlight"))(m,k);n.setCausalElement(this.props.causalElement);n.conditionShow(this.props.shown);if(this.props.onBeforeHide)n.subscribe("beforehide",this.props.onBeforeHide);if(this.props.onHide)n.subscribe("hide",this.props.onHide);return n},receiveProps:function j(k){if(this.layer){this.layer.setCausalElement(k.causalElement);this.layer.conditionShow(k.shown)}}});f.exports=i}),null);
__d("NotificationPermissionRequest.react",["cx","React","Spotlight.react"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;l.prototype.render=function(){"use strict";return c("React").createElement(c("Spotlight.react"),{shown:true,onHide:this.props.onHide,key:"spotlight"},c("React").createElement("div",{className:"_n3"}))};function l(){"use strict";i.apply(this,arguments)}l.propTypes={onHide:k.func};f.exports=l}),null);
__d("NotificationPermissionRequestWithPreview.react",["cx","fbt","ix","BrowserPushStrings","Image.react","ImageBlock.react","MockBrowserNotification.react","React","Spotlight.react","XUIAmbientNUX.react","XUIDialog.react","XUIDialogBody.react","XUIDialogButton.react","XUIDialogFooter.react","XUIDialogTitle.react"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l,m=function m(o){var p=void 0;return c("React").createElement(c("Spotlight.react"),{onHide:o.onHide,shown:o.shown,wash:"xui"},c("React").createElement("span",{ref:function q(r){return p=r},className:"_m4w"}),c("React").createElement("div",{className:"_n3"},c("React").createElement(c("XUIAmbientNUX.react"),{contextRef:function q(){return p},key:"nux",shown:o.shown,onCloseButtonClick:o.onHide,position:"below"},c("React").createElement("strong",null,i._("Vous avez presque fini\u00a0!")),c("React").createElement("br",null),i._("Cliquez maintenant sur \"Autoriser\" pour terminer l\u2019activation des notifications."))))};k=babelHelpers.inherits(n,c("React").Component);l=k&&k.prototype;function n(){__p&&__p();var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=l.constructor).call.apply(o,[this].concat(r)),this.state={acceptPromptShown:false,dialogShown:true,spinnerShown:false},this.$NotificationPermissionRequestWithPreview2=function(t){this.setState({dialogShown:t})}.bind(this),this.$NotificationPermissionRequestWithPreview3=function(){this.setState({acceptPromptShown:!this.props.showSpinnerWhileRequesting,dialogShown:this.props.showSpinnerWhileRequesting,spinnerShown:this.props.showSpinnerWhileRequesting});this.props.onAccept&&this.props.onAccept(this.$NotificationPermissionRequestWithPreview4)}.bind(this),this.$NotificationPermissionRequestWithPreview4=function(){if(this.$NotificationPermissionRequestWithPreview1)this.setState({acceptPromptShown:false,dialogShown:false})}.bind(this),this.$NotificationPermissionRequestWithPreview5=function(){this.setState({acceptPromptShown:false})}.bind(this),p}n.prototype.componentWillMount=function(){this.$NotificationPermissionRequestWithPreview1=true};n.prototype.componentWillUnmount=function(){this.$NotificationPermissionRequestWithPreview1=false};n.prototype.render=function(){var o=this.props,p=o.notificationImage,q=o.notificationMessage,r=o.showFixedTopDialog,s=o.showTurnOffMessage,t=o.showModalRedesign,u=c("React").createElement(c("MockBrowserNotification.react"),{className:"_m4x",image:p,message:q}),v=this.state.spinnerShown?c("React").createElement(c("XUIDialogBody.react"),{className:"_mjv"},c("React").createElement(c("ImageBlock.react"),{spacing:"large"},c("React").createElement(c("Image.react"),{draggable:false,src:j("287648"),width:40,height:40,className:"_mjw"}),c("React").createElement("div",null,c("React").createElement("strong",null,i._("Vous avez presque fini\u00a0!")),c("React").createElement("p",{className:"_mjx"},i._("Cliquez maintenant sur \"Autoriser\" pour terminer l\u2019activation des notifications.")))),s?c("React").createElement(c("ImageBlock.react"),{spacing:"large",className:"_1k1v"},c("React").createElement(c("Image.react"),{draggable:false,src:j("420120"),width:40,height:40,className:"_mjw"}),c("React").createElement("div",null,c("React").createElement("strong",null,i._("Change Your Mind?")),c("React").createElement("p",{className:"_mjx"},i._("You can mute or turn off notifications later by visiting {=Notifications Settings}.",[i.param("=Notifications Settings",c("React").createElement("strong",null,i._("Notifications Settings")))])))):null):c("React").createElement(c("XUIDialogBody.react"),{className:"_mjy"},c("React").createElement(c("ImageBlock.react"),{spacing:"large"},c("React").createElement(c("Image.react"),{draggable:false,src:j("287648"),className:"_mjw"}),c("React").createElement("div",null,this.props.isWebNotifications?c("BrowserPushStrings").explanation_web_notifications:c("BrowserPushStrings").explanation)),u),w=this.state.spinnerShown?null:c("React").createElement(c("XUIDialogFooter.react"),null,c("React").createElement(c("XUIDialogButton.react"),{action:"cancel",label:i._("Plus tard"),onClick:this.props.onClose}),c("React").createElement(c("XUIDialogButton.react"),{action:"button",label:i._("Activer"),onClick:this.$NotificationPermissionRequestWithPreview3,use:"special"})),x=r?40:null;return c("React").createElement("div",{className:"_m4y"},c("React").createElement(c("XUIDialog.react"),{className:t?"_mk3":"",layerHideOnBlur:false,onToggle:this.$NotificationPermissionRequestWithPreview2,shown:this.state.dialogShown,titleID:"notification-permission-title",width:t?540:445,fixedTopPosition:x},t?null:c("React").createElement(c("XUIDialogTitle.react"),{showCloseButton:false},c("React").createElement("span",{id:"notification-permission-title"},c("BrowserPushStrings").turn_on)),v,w),c("React").createElement(m,{shown:this.state.acceptPromptShown,onHide:this.$NotificationPermissionRequestWithPreview5}))};f.exports=n}),null);
__d("incognito",["regeneratorRuntime","Promise","UserAgent","WebStorage"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(){__p&&__p();var i;return c("regeneratorRuntime").async(function j(k){__p&&__p();while(1)switch(k.prev=k.next){case 0:i=window.RequestFileSystem||window.webkitRequestFileSystem;if(!i){k.next=3;break}return k.abrupt("return",new(c("Promise"))(function(l){return i(window.TEMPORARY,10,function(){return l(false)},function(){return l(true)})}));case 3:if(!(c("UserAgent").isBrowser("IE >= 10")||c("UserAgent").isBrowser("Edge"))){k.next=5;break}return k.abrupt("return",!window.indexedDB);case 5:if(!c("UserAgent").isBrowser("Firefox >= 16")){k.next=7;break}return k.abrupt("return",new(c("Promise"))(function(l){var m=window.indexedDB.open("__test__");m.onsuccess=function(){return l(false)};m.onerror=function(n){n.preventDefault();l(true)}}));case 7:if(!c("UserAgent").isBrowser("Safari")){k.next=9;break}return k.abrupt("return",!c("WebStorage").getLocalStorage());case 9:return k.abrupt("return",false);case 10:case"end":return k.stop()}},null,this)}f.exports=h}),null);
__d("BrowserPushCommands",[],(function a(b,c,d,e,f,g){var h="browser_push_ack",i="browser_push_redirect",j="browser_push_window_visible",k={ACK:h,REDIRECT:i,WINDOW_VISIBLE:j};f.exports=k}),null);
__d("BrowserPushMessageRedirectUtil",["Bootloader"],(function a(b,c,d,e,f,g){var h=function h(i){var j="(messages)(.*?)(?:(tid=))([^&]*)",k=i.match(j);if(!k)return true;var l=k.pop();c("Bootloader").loadModules(["FantaTabActions"],function(m){m.openTab(l)},"BrowserPushMessageRedirectUtil");return false};f.exports=h}),null);
__d("BrowserPushMessageHandler",["BrowserPushCommands","BrowserPushMessageRedirectUtil","EventListener","URI","URISchemes","isFacebookURI"],(function a(b,c,d,e,f,g){__p&&__p();function h(event){__p&&__p();if(event.data.command&&event.data.command===c("BrowserPushCommands").REDIRECT){if(window.onbeforeunload()===undefined)event.ports[0].postMessage({command:c("BrowserPushCommands").ACK,success:true});else{event.ports[0].postMessage({command:c("BrowserPushCommands").ACK,success:false});return}var j=event.data.uri;if(/^([^.:/?#]+):/.test(j)&&!c("URISchemes").isAllowed(/^([^.:/?#]+):/.exec(j)[1])||!c("isFacebookURI")(new(c("URI"))(j)))throw new Error("goURI: URI scheme rejected, URI: "+j);if(c("BrowserPushMessageRedirectUtil")(j))window.location.href=j}}var i={registerRedirectHandler:function j(){c("EventListener").listen(window,"message",function(event){if(event.origin==="")h(event)});if(navigator.serviceWorker&&navigator.serviceWorker.addEventListener)navigator.serviceWorker.addEventListener("message",function(event){if(navigator.serviceWorker&&navigator.serviceWorker.controller&&event.target&&event.target.controller&&event.target.controller===navigator.serviceWorker.controller||new RegExp("^"+window.location.protocol+"//"+window.location.host+"$").test(event.origin))h(event)})}};f.exports=i}),null);
__d("BrowserPushVisibilityChanger",["BrowserPushCommands","ClientServiceWorkerMessage","Visibility"],(function a(b,c,d,e,f,g){function h(){new(c("ClientServiceWorkerMessage"))(c("BrowserPushCommands").WINDOW_VISIBLE,null).sendViaController()}var i={listenForVisibility:function j(){if(!c("Visibility").isHidden())h();c("Visibility").addListener(c("Visibility").VISIBLE,h)}};f.exports=i}),null);
__d("PushRegistration",["Promise","BrowserPushMessageHandler","BrowserPushVisibilityChanger","Map","ServiceWorkerRegistration","emptyFunction"],(function a(b,c,d,e,f,g){__p&&__p();var h=window.Notification,i=new(c("Map"))();j.get=function(k,l){"use strict";if(i.has(l))return i.get(l);var m=new j(k,l);i.set(l,m);return m};function j(k,l){"use strict";this.$PushRegistration3=k;this.appID=l;if(!j.$PushRegistration1&&!j.$PushRegistration2){j.$PushRegistration1=false;j.$PushRegistration2=false}}j.prototype.getPushSubscription=function(){"use strict";__p&&__p();return new(c("Promise"))(function(k,l){if(j.pushPermissionIsDenied())l(new Error("No permission or not supported"));c("ServiceWorkerRegistration").getWorkerRegistration(this.$PushRegistration3).then(function(m){if(!m){k(null);return}m.pushManager.getSubscription().then(function(n){k(n)})["catch"](l)})["catch"](l)}.bind(this))};j.prototype.$PushRegistration4=function(k){"use strict";var l=k.endpoint;if("subscriptionId"in k&&!new RegExp("/"+k.subscriptionId+"$").test(l))l+="/"+k.subscriptionId;return l};j.prototype.$PushRegistration5=function(k,l,m,n){"use strict";__p&&__p();var o=this.$PushRegistration4(m),p=k.getURIBuilder().getURI(),q=new l(p),r=null;if(m.toJSON)r=m.toJSON().keys;else if(m.keys)r=m.keys;q.setData({app_id:this.appID,push_endpoint:o,subscription_keys:JSON.stringify(r)});q.setMethod("post");if(q.setHandler)q.setHandler(function(s){if(s.payload&&s.payload.session_change)n()});q.send()};j.prototype.getSubscription=function(){"use strict";return new(c("Promise"))(function(k,l){this.getPushSubscription().then(function(m){if(m)k(this.$PushRegistration4(m));else k(null)}.bind(this))["catch"](l)}.bind(this))};j.prototype.maybeRegisterPushAgain=function(k,l,m){"use strict";return new(c("Promise"))(function(n,o){this.getPushSubscription().then(function(p){if(p){this.$PushRegistration5(k,l,p,m);n(this.$PushRegistration4(p))}else n(null)}.bind(this))["catch"](function(){n(null)})}.bind(this))};j.prototype.$PushRegistration6=function(k,l,m){"use strict";__p&&__p();return new(c("Promise"))(function(n,o){__p&&__p();if(j.$PushRegistration2&&!m){o(new Error("sending disable info already"));return}j.$PushRegistration2=true;var p=k.getURIBuilder().getURI(),q=new l(p.toString());q.setData({appid:this.appID,from_browser_settings:m});q.setMethod("post");if(q.listen){q.listen("finally",n);q.listen("fail",function(){j.$PushRegistration2=false;o()})}else if(q.setErrorHandler&&q.setHandler){q.setErrorHandler(function(){j.$PushRegistration2=false;o()});q.setHandler(n)}else n();q.send()}.bind(this))};j.prototype.isPushRegistered=function(k,l,m,n){__p&&__p();var o=arguments.length<=4||arguments[4]===undefined?false:arguments[4],p=arguments.length<=5||arguments[5]===undefined?c("emptyFunction"):arguments[5],q=arguments.length<=6||arguments[6]===undefined?false:arguments[6];"use strict";c("BrowserPushMessageHandler").registerRedirectHandler();return new(c("Promise"))(function(r,s){__p&&__p();this.getPushSubscription().then(function(t){r(!!t||k&&!j.pushPermissionIsPending());if(t)if(o)self.$PushRegistration5(l,n,p,q);else c("BrowserPushVisibilityChanger").listenForVisibility();else if(!t&&k)if(j.pushPermissionIsOn())this.registerPush(l,n,p,q)["catch"](function(){});else this.$PushRegistration6(m,n,false)}.bind(this))["catch"](function(){if(k)this.$PushRegistration6(m,n,false);if(q)c("ServiceWorkerRegistration").unregisterControllingWorker();s()}.bind(this))}.bind(this))};j.prototype.$PushRegistration7=function(){"use strict";return new(c("Promise"))(function(k,l){h.requestPermission(k)})};j.prototype.registerPushAndWaitForEndpoint=function(k,l,m,n){"use strict";return new(c("Promise"))(function(o,p){this.$PushRegistration8(k,l,m,true,null,n).then(function(q){if(typeof q!=="string"){p(new Error("registerPushImpl did not return an endpoint"));return}o(q)})["catch"](p)}.bind(this))};j.prototype.registerPushOnKaiOS=function(k,l,m){"use strict";return new(c("Promise"))(function(n,o){m.waitForKaiOS().done(function(){m.registerPush(function(p){var q=JSON.parse(p.get("push_endpoint"));this.$PushRegistration5(k,l,q,c("emptyFunction"));n(this.$PushRegistration4(q))}.bind(this))}.bind(this))}.bind(this))};j.prototype.registerPush=function(k,l){var m=arguments.length<=2||arguments[2]===undefined?c("emptyFunction"):arguments[2],n=arguments.length<=3||arguments[3]===undefined?false:arguments[3];"use strict";return this.registerPushWithFinishedCallBack(k,l,m,null,n)};j.prototype.registerPushWithFinishedCallBack=function(k,l,m,n,o){"use strict";return new(c("Promise"))(function(p,q){this.$PushRegistration8(k,l,m,false,n,o).then(function(r){if(typeof r!=="boolean"){q(new Error("registerPushImpl did not return a boolean"));return}p(r)})["catch"](q)}.bind(this))};j.prototype.$PushRegistration8=function(k,l,m,n,o,p){"use strict";__p&&__p();if(j.$PushRegistration1)return new(c("Promise"))(function(q,r){r(new Error("registering already"))});if(!self.PushManager)return c("Promise").reject(new Error("PushManager not found."));j.$PushRegistration1=true;return new(c("Promise"))(function(q,r){__p&&__p();var s=c("ServiceWorkerRegistration").registerWorkerIfUnregistered(this.$PushRegistration3),t=this.$PushRegistration7();c("Promise").all([s,t]).then(function(u){__p&&__p();var v=u[0];if(!j.pushPermissionIsOn()){if(p)v.unregister();throw new Error("Push permission was denied")}if(!n)q(true);v.pushManager.subscribe({userVisibleOnly:true}).then(function(w){if(n)q(this.$PushRegistration4(w));this.$PushRegistration5(k,l,w,m);if(o)o();c("BrowserPushVisibilityChanger").listenForVisibility()}.bind(this))["catch"](function(w){j.$PushRegistration1=false;if(p)v.unregister();r(w)})}.bind(this))["catch"](function(u){j.$PushRegistration1=false;r(u)})}.bind(this))};j.prototype.unregisterPushAndSWOnKaiOS=function(k,l,m,n){"use strict";return new(c("Promise"))(function(o,p){this.$PushRegistration6(k,l,n).then(function(){m.unregisterPush();o()})["catch"](p)}.bind(this))};j.prototype.unregisterPushAndSW=function(k,l){"use strict";return new(c("Promise"))(function(m,n){this.$PushRegistration6(k,l,true).then(function(){c("ServiceWorkerRegistration").unregisterControllingWorker().done(m)})["catch"](n)}.bind(this))};j.prototype.unregisterPushOnly=function(k,l){"use strict";return new(c("Promise"))(function(m,n){this.getPushSubscription().then(function(o){if(o)o.unsubscribe().then(this.$PushRegistration6(k,l,true)).then(function(){m(true)})["catch"](n);else n()}.bind(this))["catch"](n)}.bind(this))};j.pushPermissionIsPending=function(){"use strict";return window.Notification&&window.Notification.permission==="default"};j.pushPermissionIsOn=function(){"use strict";return window.Notification&&window.Notification.permission==="granted"};j.pushPermissionIsDenied=function(){"use strict";return window.Notification&&window.Notification.permission==="denied"};f.exports=j}),null);
__d("XBrowserWebNotificationsEnableController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/notifications/client/web_notifications/enable/",{})}),null);
__d("XPushRegisterServiceWorkerController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/push/register/service_worker/",{})}),null);
__d("BrowserPushDirectPromptInstaller",["Promise","Arbiter","AsyncRequest","BanzaiLogger","BrowserPushSessionChange.react","Bootloader","CrossWindowEventEmitter","DOM","NotificationPermissionNotice.react","NotificationPermissionRequest.react","NotificationPermissionRequestWithPreview.react","PushRegistration","QE2Logger","React","ReactDOM","XBrowserPushDisabledController","XBrowserPushXOutController","XBrowserWebNotificationsEnableController","XPushRegisterServiceWorkerController","emptyFunction","incognito"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=window.Notification,i=new(c("CrossWindowEventEmitter"))("BrowserPushInstall"),j={},k,l=false;function m(event,u){var v=babelHelpers["extends"]({event:event,appid:u,surface:"prompt"},j);c("BanzaiLogger").log("BrowserPushLoggerConfig",v)}function n(){if(j.xout_count===0&&k)c("QE2Logger").logExposureForUser(k)}function o(u){var v=c("XBrowserPushXOutController").getURIBuilder().getURI();new(c("AsyncRequest"))().setURI(v).setMethod("POST").send();m("xout",u)}function p(u){var v=c("XBrowserWebNotificationsEnableController").getURIBuilder().getURI();new(c("AsyncRequest"))().setURI(v).setMethod("POST").send();c("Arbiter").inform("WebNotifications/enabled");i.emitRemote("complete");c("Bootloader").loadModules(["WebNotificationsPresenter"],function(w){w.init(u.toString())},"BrowserPushDirectPromptInstaller")}function q(u){if(!l){l=true;c("ReactDOM").unmountComponentAtNode(u)}}function r(u,v){var w=c("DOM").insertBefore(u,c("DOM").create("span")),x=w.pop();c("ReactDOM").render(c("React").createElement(c("BrowserPushSessionChange.react"),{onHide:function y(){c("ReactDOM").unmountComponentAtNode(u)},push:v}),x)}function s(u,v,w,x,y){__p&&__p();var z=c("PushRegistration").get(u,v);m("turn_on",v);return z.registerPushWithFinishedCallBack(c("XPushRegisterServiceWorkerController"),c("AsyncRequest"),function(){r(w,z)},function(){c("Arbiter").inform("BrowserPushInstall/installed")},y).then(function(){q(w);m("install",v)})["catch"](function(A){q(w);if(c("PushRegistration").pushPermissionIsDenied()){c("ReactDOM").render(c("React").createElement(c("NotificationPermissionNotice.react"),{onHide:function B(){c("ReactDOM").unmountComponentAtNode(w)},browserName:x}),w);m("deny",v)}else m("install_ignore",v);o(v)})}var t={setLogExtraData:function u(v){j=v},setQEUniverseName:function u(v){k=v},requestThenInstallWebNotifications:function u(v,w,x,y,z,A){__p&&__p();n();this._showRequestPermissions({appID:v,baseElement:w,browserName:x,hasEnoughFriendsToRequestPush:y,sampleNotificationAvatarURI:A,sampleNotificationMessage:z,showSpinnerWhileRequesting:true,isWebNotifications:true,onAcceptCallback:this._getOnWebNotificationsDialogAccept({appID:v,callback:function B(C){if(C==="granted"){m("install",v);i.emitRemote("complete");q(w);p(v)}else{m("deny",v);o(v)}}})})},requestThenInstallPush:function u(v,w,x,y,z,A,B,C,D,E,F,G,H,I,J){__p&&__p();var K=c("PushRegistration").get(v,w),L=K.isPushRegistered(y,c("XPushRegisterServiceWorkerController"),c("XBrowserPushDisabledController"),c("AsyncRequest"),!!A,function(){r(x,K)},C);c("Promise").all([L,c("incognito")()]).then(function(M){var N=M[0],O=M[1];if(N||O)return;n();if(c("PushRegistration").pushPermissionIsPending())this._showRequestPermissions({appID:w,baseElement:x,hasEnoughFriendsToRequestPush:D,isWebNotifications:false,onAcceptCallback:this._getOnPushNotificationsAccept({appID:w,baseElement:x,browserName:B,path:v,workerIsForPushOnly:C}),sampleNotificationAvatarURI:F,sampleNotificationMessage:E,showSpinnerWhileRequesting:G,wasXOuted:z,showFixedTopDialog:H,showTurnOffMessage:I,showModalRedesign:J});else if(!z&&c("PushRegistration").pushPermissionIsOn())s(v,w,x,B,C)}.bind(this))["catch"](function(){if(c("PushRegistration").pushPermissionIsDenied())n()})},installPush:function u(v,w,x,y,z,A,B,C,D){__p&&__p();var E=c("PushRegistration").get(v,w),F=E.isPushRegistered(y,c("XPushRegisterServiceWorkerController"),c("XBrowserPushDisabledController"),c("AsyncRequest"),!!A,function(){r(x,E)},C);c("Promise").all([F,c("incognito")()]).then(function(G){__p&&__p();var H=G[0],I=G[1];if(H||I)return;n();if(c("PushRegistration").pushPermissionIsPending()){if(!D||z)return;c("ReactDOM").render(c("React").createElement(c("NotificationPermissionRequest.react"),{onHide:function J(){q(x)}}),x);s(v,w,x,B,C)}else if(!z)s(v,w,x,B,C)})["catch"](function(){if(c("PushRegistration").pushPermissionIsDenied())n()})},_showRequestPermissions:function u(v){__p&&__p();var w=v.appID,x=v.baseElement,y=v.hasEnoughFriendsToRequestPush,z=v.isWebNotifications,A=v.onAcceptCallback,B=v.sampleNotificationAvatarURI,C=v.sampleNotificationMessage,D=v.showSpinnerWhileRequesting,E=v.wasXOuted,F=v.showFixedTopDialog,G=v.showTurnOffMessage,H=v.showModalRedesign;i.once("complete",function(I){q(x);m("twostep_suppressed",w)});if(!y||E)return;m("twostep_request",w);c("ReactDOM").render(c("React").createElement(c("NotificationPermissionRequestWithPreview.react"),{isWebNotifications:z,notificationImage:B||undefined,notificationMessage:C||undefined,onAccept:A,onClose:function I(){m("twostep_notnow",w);i.emitRemote("complete");o(w);q(x)},showSpinnerWhileRequesting:D,showFixedTopDialog:F,showTurnOffMessage:G,showModalRedesign:H}),x)},_getOnPushNotificationsAccept:function u(v){var w=v.appID,x=v.baseElement,y=v.browserName,z=v.callback,A=v.path,B=v.workerIsForPushOnly;return function(){m("twostep_accept",w);i.emitRemote("complete");s(A,w,x,y,B).then(z,z).done()}},_getOnWebNotificationsDialogAccept:function u(v){var w=v.appID,x=v.callback;return function(){m("twostep_accept",w);this._requestWebNotificationsFromBrowser(w,x)}.bind(this)},_requestWebNotificationsFromBrowser:function u(v,w){m("turn_on",v);h.requestPermission(w)}};f.exports=t}),null);
__d("XBrowserPushMuteController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/notifications/client/push/mute/",{appid:{type:"Int",required:true},push_endpoint:{type:"String",required:true},surface:{type:"Enum",required:true,enumType:1},mute_for:{type:"Enum",enumType:0},__asyncDialog:{type:"Int"}})}),null);
__d("BrowserPushMuteOptions",["fbt","AsyncRequest","PushRegistration","React","ReactDOM","XBrowserPushMuteController"],(function a(b,c,d,e,f,g,h){__p&&__p();function i(k,l,m){var n=c("PushRegistration").get(l,m);n.getPushSubscription().done(function(o){if(o){var p=c("XBrowserPushMuteController").getURIBuilder().setEnum("surface","jewel").setString("push_endpoint",o.endpoint).setInt("appid",m).getURI();new(c("AsyncRequest"))().setURI(p).setRelativeTo(k).send()}})}var j={showMuteOptions:function k(l,m,n){if(!c("PushRegistration").pushPermissionIsOn())return;c("ReactDOM").render(c("React").createElement("a",{href:"#",onClick:function o(){i(l,m,n)}},h._("Sourdine")),l)}};f.exports=j}),null);