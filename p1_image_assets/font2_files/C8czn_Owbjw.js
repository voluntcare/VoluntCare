if (self.CavalryLogger) { CavalryLogger.start_js(["U8IIn"]); }

__d("gl-matrix-common",[],(function a(b,c,d,e,f,g){var h={};h.EPSILON=1e-6;h.ARRAY_TYPE=typeof Float32Array!=="undefined"?Float32Array:Array;h.RANDOM=Math.random;h.ENABLE_SIMD=false;h.SIMD_AVAILABLE=h.ARRAY_TYPE===this.Float32Array&&"SIMD"in this;h.USE_SIMD=h.ENABLE_SIMD&&h.SIMD_AVAILABLE;h.setMatrixArrayType=function(j){h.ARRAY_TYPE=j};var i=Math.PI/180;h.toRadian=function(j){return j*i};h.equals=function(j,k){return Math.abs(j-k)<=h.EPSILON*Math.max(1,Math.abs(j),Math.abs(k))};f.exports=h}),null);
__d("gl-matrix-mat4",["gl-matrix-common"],(function a(b,c,d,e,f,g){var h=c("gl-matrix-common"),i={scalar:{},SIMD:{}};i.create=function(){var j=new h.ARRAY_TYPE(16);j[0]=1;j[1]=0;j[2]=0;j[3]=0;j[4]=0;j[5]=1;j[6]=0;j[7]=0;j[8]=0;j[9]=0;j[10]=1;j[11]=0;j[12]=0;j[13]=0;j[14]=0;j[15]=1;return j};i.clone=function(j){var k=new h.ARRAY_TYPE(16);k[0]=j[0];k[1]=j[1];k[2]=j[2];k[3]=j[3];k[4]=j[4];k[5]=j[5];k[6]=j[6];k[7]=j[7];k[8]=j[8];k[9]=j[9];k[10]=j[10];k[11]=j[11];k[12]=j[12];k[13]=j[13];k[14]=j[14];k[15]=j[15];return k};i.copy=function(j,k){j[0]=k[0];j[1]=k[1];j[2]=k[2];j[3]=k[3];j[4]=k[4];j[5]=k[5];j[6]=k[6];j[7]=k[7];j[8]=k[8];j[9]=k[9];j[10]=k[10];j[11]=k[11];j[12]=k[12];j[13]=k[13];j[14]=k[14];j[15]=k[15];return j};i.fromValues=function(j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){var z=new h.ARRAY_TYPE(16);z[0]=j;z[1]=k;z[2]=l;z[3]=m;z[4]=n;z[5]=o;z[6]=p;z[7]=q;z[8]=r;z[9]=s;z[10]=t;z[11]=u;z[12]=v;z[13]=w;z[14]=x;z[15]=y;return z};i.set=function(j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){j[0]=k;j[1]=l;j[2]=m;j[3]=n;j[4]=o;j[5]=p;j[6]=q;j[7]=r;j[8]=s;j[9]=t;j[10]=u;j[11]=v;j[12]=w;j[13]=x;j[14]=y;j[15]=z;return j};i.identity=function(j){j[0]=1;j[1]=0;j[2]=0;j[3]=0;j[4]=0;j[5]=1;j[6]=0;j[7]=0;j[8]=0;j[9]=0;j[10]=1;j[11]=0;j[12]=0;j[13]=0;j[14]=0;j[15]=1;return j};i.scalar.transpose=function(j,k){if(j===k){var l=k[1],m=k[2],n=k[3],o=k[6],p=k[7],q=k[11];j[1]=k[4];j[2]=k[8];j[3]=k[12];j[4]=l;j[6]=k[9];j[7]=k[13];j[8]=m;j[9]=o;j[11]=k[14];j[12]=n;j[13]=p;j[14]=q}else{j[0]=k[0];j[1]=k[4];j[2]=k[8];j[3]=k[12];j[4]=k[1];j[5]=k[5];j[6]=k[9];j[7]=k[13];j[8]=k[2];j[9]=k[6];j[10]=k[10];j[11]=k[14];j[12]=k[3];j[13]=k[7];j[14]=k[11];j[15]=k[15]}return j};i.SIMD.transpose=function(j,k){var l,m,n,o,p,q,r,s,t,u;l=SIMD.Float32x4.load(k,0);m=SIMD.Float32x4.load(k,4);n=SIMD.Float32x4.load(k,8);o=SIMD.Float32x4.load(k,12);p=SIMD.Float32x4.shuffle(l,m,0,1,4,5);q=SIMD.Float32x4.shuffle(n,o,0,1,4,5);r=SIMD.Float32x4.shuffle(p,q,0,2,4,6);s=SIMD.Float32x4.shuffle(p,q,1,3,5,7);SIMD.Float32x4.store(j,0,r);SIMD.Float32x4.store(j,4,s);p=SIMD.Float32x4.shuffle(l,m,2,3,6,7);q=SIMD.Float32x4.shuffle(n,o,2,3,6,7);t=SIMD.Float32x4.shuffle(p,q,0,2,4,6);u=SIMD.Float32x4.shuffle(p,q,1,3,5,7);SIMD.Float32x4.store(j,8,t);SIMD.Float32x4.store(j,12,u);return j};i.transpose=h.USE_SIMD?i.SIMD.transpose:i.scalar.transpose;i.scalar.invert=function(j,k){var l=k[0],m=k[1],n=k[2],o=k[3],p=k[4],q=k[5],r=k[6],s=k[7],t=k[8],u=k[9],v=k[10],w=k[11],x=k[12],y=k[13],z=k[14],A=k[15],B=l*q-m*p,C=l*r-n*p,D=l*s-o*p,E=m*r-n*q,F=m*s-o*q,G=n*s-o*r,H=t*y-u*x,I=t*z-v*x,J=t*A-w*x,K=u*z-v*y,L=u*A-w*y,M=v*A-w*z,N=B*M-C*L+D*K+E*J-F*I+G*H;if(!N)return null;N=1/N;j[0]=(q*M-r*L+s*K)*N;j[1]=(n*L-m*M-o*K)*N;j[2]=(y*G-z*F+A*E)*N;j[3]=(v*F-u*G-w*E)*N;j[4]=(r*J-p*M-s*I)*N;j[5]=(l*M-n*J+o*I)*N;j[6]=(z*D-x*G-A*C)*N;j[7]=(t*G-v*D+w*C)*N;j[8]=(p*L-q*J+s*H)*N;j[9]=(m*J-l*L-o*H)*N;j[10]=(x*F-y*D+A*B)*N;j[11]=(u*D-t*F-w*B)*N;j[12]=(q*I-p*K-r*H)*N;j[13]=(l*K-m*I+n*H)*N;j[14]=(y*C-x*E-z*B)*N;j[15]=(t*E-u*C+v*B)*N;return j};i.SIMD.invert=function(j,k){var l,m,n,o,p,q,r,s,t,u,v=SIMD.Float32x4.load(k,0),w=SIMD.Float32x4.load(k,4),x=SIMD.Float32x4.load(k,8),y=SIMD.Float32x4.load(k,12);p=SIMD.Float32x4.shuffle(v,w,0,1,4,5);m=SIMD.Float32x4.shuffle(x,y,0,1,4,5);l=SIMD.Float32x4.shuffle(p,m,0,2,4,6);m=SIMD.Float32x4.shuffle(m,p,1,3,5,7);p=SIMD.Float32x4.shuffle(v,w,2,3,6,7);o=SIMD.Float32x4.shuffle(x,y,2,3,6,7);n=SIMD.Float32x4.shuffle(p,o,0,2,4,6);o=SIMD.Float32x4.shuffle(o,p,1,3,5,7);p=SIMD.Float32x4.mul(n,o);p=SIMD.Float32x4.swizzle(p,1,0,3,2);q=SIMD.Float32x4.mul(m,p);r=SIMD.Float32x4.mul(l,p);p=SIMD.Float32x4.swizzle(p,2,3,0,1);q=SIMD.Float32x4.sub(SIMD.Float32x4.mul(m,p),q);r=SIMD.Float32x4.sub(SIMD.Float32x4.mul(l,p),r);r=SIMD.Float32x4.swizzle(r,2,3,0,1);p=SIMD.Float32x4.mul(m,n);p=SIMD.Float32x4.swizzle(p,1,0,3,2);q=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,p),q);t=SIMD.Float32x4.mul(l,p);p=SIMD.Float32x4.swizzle(p,2,3,0,1);q=SIMD.Float32x4.sub(q,SIMD.Float32x4.mul(o,p));t=SIMD.Float32x4.sub(SIMD.Float32x4.mul(l,p),t);t=SIMD.Float32x4.swizzle(t,2,3,0,1);p=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(m,2,3,0,1),o);p=SIMD.Float32x4.swizzle(p,1,0,3,2);n=SIMD.Float32x4.swizzle(n,2,3,0,1);q=SIMD.Float32x4.add(SIMD.Float32x4.mul(n,p),q);s=SIMD.Float32x4.mul(l,p);p=SIMD.Float32x4.swizzle(p,2,3,0,1);q=SIMD.Float32x4.sub(q,SIMD.Float32x4.mul(n,p));s=SIMD.Float32x4.sub(SIMD.Float32x4.mul(l,p),s);s=SIMD.Float32x4.swizzle(s,2,3,0,1);p=SIMD.Float32x4.mul(l,m);p=SIMD.Float32x4.swizzle(p,1,0,3,2);s=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,p),s);t=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,p),t);p=SIMD.Float32x4.swizzle(p,2,3,0,1);s=SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,p),s);t=SIMD.Float32x4.sub(t,SIMD.Float32x4.mul(n,p));p=SIMD.Float32x4.mul(l,o);p=SIMD.Float32x4.swizzle(p,1,0,3,2);r=SIMD.Float32x4.sub(r,SIMD.Float32x4.mul(n,p));s=SIMD.Float32x4.add(SIMD.Float32x4.mul(m,p),s);p=SIMD.Float32x4.swizzle(p,2,3,0,1);r=SIMD.Float32x4.add(SIMD.Float32x4.mul(n,p),r);s=SIMD.Float32x4.sub(s,SIMD.Float32x4.mul(m,p));p=SIMD.Float32x4.mul(l,n);p=SIMD.Float32x4.swizzle(p,1,0,3,2);r=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,p),r);t=SIMD.Float32x4.sub(t,SIMD.Float32x4.mul(m,p));p=SIMD.Float32x4.swizzle(p,2,3,0,1);r=SIMD.Float32x4.sub(r,SIMD.Float32x4.mul(o,p));t=SIMD.Float32x4.add(SIMD.Float32x4.mul(m,p),t);u=SIMD.Float32x4.mul(l,q);u=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(u,2,3,0,1),u);u=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(u,1,0,3,2),u);p=SIMD.Float32x4.reciprocalApproximation(u);u=SIMD.Float32x4.sub(SIMD.Float32x4.add(p,p),SIMD.Float32x4.mul(u,SIMD.Float32x4.mul(p,p)));u=SIMD.Float32x4.swizzle(u,0,0,0,0);if(!u)return null;SIMD.Float32x4.store(j,0,SIMD.Float32x4.mul(u,q));SIMD.Float32x4.store(j,4,SIMD.Float32x4.mul(u,r));SIMD.Float32x4.store(j,8,SIMD.Float32x4.mul(u,s));SIMD.Float32x4.store(j,12,SIMD.Float32x4.mul(u,t));return j};i.invert=h.USE_SIMD?i.SIMD.invert:i.scalar.invert;i.scalar.adjoint=function(j,k){var l=k[0],m=k[1],n=k[2],o=k[3],p=k[4],q=k[5],r=k[6],s=k[7],t=k[8],u=k[9],v=k[10],w=k[11],x=k[12],y=k[13],z=k[14],A=k[15];j[0]=q*(v*A-w*z)-u*(r*A-s*z)+y*(r*w-s*v);j[1]=-(m*(v*A-w*z)-u*(n*A-o*z)+y*(n*w-o*v));j[2]=m*(r*A-s*z)-q*(n*A-o*z)+y*(n*s-o*r);j[3]=-(m*(r*w-s*v)-q*(n*w-o*v)+u*(n*s-o*r));j[4]=-(p*(v*A-w*z)-t*(r*A-s*z)+x*(r*w-s*v));j[5]=l*(v*A-w*z)-t*(n*A-o*z)+x*(n*w-o*v);j[6]=-(l*(r*A-s*z)-p*(n*A-o*z)+x*(n*s-o*r));j[7]=l*(r*w-s*v)-p*(n*w-o*v)+t*(n*s-o*r);j[8]=p*(u*A-w*y)-t*(q*A-s*y)+x*(q*w-s*u);j[9]=-(l*(u*A-w*y)-t*(m*A-o*y)+x*(m*w-o*u));j[10]=l*(q*A-s*y)-p*(m*A-o*y)+x*(m*s-o*q);j[11]=-(l*(q*w-s*u)-p*(m*w-o*u)+t*(m*s-o*q));j[12]=-(p*(u*z-v*y)-t*(q*z-r*y)+x*(q*v-r*u));j[13]=l*(u*z-v*y)-t*(m*z-n*y)+x*(m*v-n*u);j[14]=-(l*(q*z-r*y)-p*(m*z-n*y)+x*(m*r-n*q));j[15]=l*(q*v-r*u)-p*(m*v-n*u)+t*(m*r-n*q);return j};i.SIMD.adjoint=function(j,k){var l,m,n,o,p,q,r,s,t,u,v,w,x;l=SIMD.Float32x4.load(k,0);m=SIMD.Float32x4.load(k,4);n=SIMD.Float32x4.load(k,8);o=SIMD.Float32x4.load(k,12);t=SIMD.Float32x4.shuffle(l,m,0,1,4,5);q=SIMD.Float32x4.shuffle(n,o,0,1,4,5);p=SIMD.Float32x4.shuffle(t,q,0,2,4,6);q=SIMD.Float32x4.shuffle(q,t,1,3,5,7);t=SIMD.Float32x4.shuffle(l,m,2,3,6,7);s=SIMD.Float32x4.shuffle(n,o,2,3,6,7);r=SIMD.Float32x4.shuffle(t,s,0,2,4,6);s=SIMD.Float32x4.shuffle(s,t,1,3,5,7);t=SIMD.Float32x4.mul(r,s);t=SIMD.Float32x4.swizzle(t,1,0,3,2);u=SIMD.Float32x4.mul(q,t);v=SIMD.Float32x4.mul(p,t);t=SIMD.Float32x4.swizzle(t,2,3,0,1);u=SIMD.Float32x4.sub(SIMD.Float32x4.mul(q,t),u);v=SIMD.Float32x4.sub(SIMD.Float32x4.mul(p,t),v);v=SIMD.Float32x4.swizzle(v,2,3,0,1);t=SIMD.Float32x4.mul(q,r);t=SIMD.Float32x4.swizzle(t,1,0,3,2);u=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,t),u);x=SIMD.Float32x4.mul(p,t);t=SIMD.Float32x4.swizzle(t,2,3,0,1);u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(s,t));x=SIMD.Float32x4.sub(SIMD.Float32x4.mul(p,t),x);x=SIMD.Float32x4.swizzle(x,2,3,0,1);t=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(q,2,3,0,1),s);t=SIMD.Float32x4.swizzle(t,1,0,3,2);r=SIMD.Float32x4.swizzle(r,2,3,0,1);u=SIMD.Float32x4.add(SIMD.Float32x4.mul(r,t),u);w=SIMD.Float32x4.mul(p,t);t=SIMD.Float32x4.swizzle(t,2,3,0,1);u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(r,t));w=SIMD.Float32x4.sub(SIMD.Float32x4.mul(p,t),w);w=SIMD.Float32x4.swizzle(w,2,3,0,1);t=SIMD.Float32x4.mul(p,q);t=SIMD.Float32x4.swizzle(t,1,0,3,2);w=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,t),w);x=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,t),x);t=SIMD.Float32x4.swizzle(t,2,3,0,1);w=SIMD.Float32x4.sub(SIMD.Float32x4.mul(s,t),w);x=SIMD.Float32x4.sub(x,SIMD.Float32x4.mul(r,t));t=SIMD.Float32x4.mul(p,s);t=SIMD.Float32x4.swizzle(t,1,0,3,2);v=SIMD.Float32x4.sub(v,SIMD.Float32x4.mul(r,t));w=SIMD.Float32x4.add(SIMD.Float32x4.mul(q,t),w);t=SIMD.Float32x4.swizzle(t,2,3,0,1);v=SIMD.Float32x4.add(SIMD.Float32x4.mul(r,t),v);w=SIMD.Float32x4.sub(w,SIMD.Float32x4.mul(q,t));t=SIMD.Float32x4.mul(p,r);t=SIMD.Float32x4.swizzle(t,1,0,3,2);v=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,t),v);x=SIMD.Float32x4.sub(x,SIMD.Float32x4.mul(q,t));t=SIMD.Float32x4.swizzle(t,2,3,0,1);v=SIMD.Float32x4.sub(v,SIMD.Float32x4.mul(s,t));x=SIMD.Float32x4.add(SIMD.Float32x4.mul(q,t),x);SIMD.Float32x4.store(j,0,u);SIMD.Float32x4.store(j,4,v);SIMD.Float32x4.store(j,8,w);SIMD.Float32x4.store(j,12,x);return j};i.adjoint=h.USE_SIMD?i.SIMD.adjoint:i.scalar.adjoint;i.determinant=function(j){var k=j[0],l=j[1],m=j[2],n=j[3],o=j[4],p=j[5],q=j[6],r=j[7],s=j[8],t=j[9],u=j[10],v=j[11],w=j[12],x=j[13],y=j[14],z=j[15],A=k*p-l*o,B=k*q-m*o,C=k*r-n*o,D=l*q-m*p,E=l*r-n*p,F=m*r-n*q,G=s*x-t*w,H=s*y-u*w,I=s*z-v*w,J=t*y-u*x,K=t*z-v*x,L=u*z-v*y;return A*L-B*K+C*J+D*I-E*H+F*G};i.SIMD.multiply=function(j,k,l){var m=SIMD.Float32x4.load(k,0),n=SIMD.Float32x4.load(k,4),o=SIMD.Float32x4.load(k,8),p=SIMD.Float32x4.load(k,12),q=SIMD.Float32x4.load(l,0),r=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(q,0,0,0,0),m),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(q,1,1,1,1),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(q,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(q,3,3,3,3),p))));SIMD.Float32x4.store(j,0,r);var s=SIMD.Float32x4.load(l,4),t=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,0,0,0,0),m),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,1,1,1,1),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,3,3,3,3),p))));SIMD.Float32x4.store(j,4,t);var u=SIMD.Float32x4.load(l,8),v=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,0,0,0,0),m),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,1,1,1,1),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(u,3,3,3,3),p))));SIMD.Float32x4.store(j,8,v);var w=SIMD.Float32x4.load(l,12),x=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(w,0,0,0,0),m),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(w,1,1,1,1),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(w,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(w,3,3,3,3),p))));SIMD.Float32x4.store(j,12,x);return j};i.scalar.multiply=function(j,k,l){var m=k[0],n=k[1],o=k[2],p=k[3],q=k[4],r=k[5],s=k[6],t=k[7],u=k[8],v=k[9],w=k[10],x=k[11],y=k[12],z=k[13],A=k[14],B=k[15],C=l[0],D=l[1],E=l[2],F=l[3];j[0]=C*m+D*q+E*u+F*y;j[1]=C*n+D*r+E*v+F*z;j[2]=C*o+D*s+E*w+F*A;j[3]=C*p+D*t+E*x+F*B;C=l[4];D=l[5];E=l[6];F=l[7];j[4]=C*m+D*q+E*u+F*y;j[5]=C*n+D*r+E*v+F*z;j[6]=C*o+D*s+E*w+F*A;j[7]=C*p+D*t+E*x+F*B;C=l[8];D=l[9];E=l[10];F=l[11];j[8]=C*m+D*q+E*u+F*y;j[9]=C*n+D*r+E*v+F*z;j[10]=C*o+D*s+E*w+F*A;j[11]=C*p+D*t+E*x+F*B;C=l[12];D=l[13];E=l[14];F=l[15];j[12]=C*m+D*q+E*u+F*y;j[13]=C*n+D*r+E*v+F*z;j[14]=C*o+D*s+E*w+F*A;j[15]=C*p+D*t+E*x+F*B;return j};i.multiply=h.USE_SIMD?i.SIMD.multiply:i.scalar.multiply;i.mul=i.multiply;i.scalar.translate=function(j,k,l){var m=l[0],n=l[1],o=l[2],p,q,r,s,t,u,v,w,x,y,z,A;if(k===j){j[12]=k[0]*m+k[4]*n+k[8]*o+k[12];j[13]=k[1]*m+k[5]*n+k[9]*o+k[13];j[14]=k[2]*m+k[6]*n+k[10]*o+k[14];j[15]=k[3]*m+k[7]*n+k[11]*o+k[15]}else{p=k[0];q=k[1];r=k[2];s=k[3];t=k[4];u=k[5];v=k[6];w=k[7];x=k[8];y=k[9];z=k[10];A=k[11];j[0]=p;j[1]=q;j[2]=r;j[3]=s;j[4]=t;j[5]=u;j[6]=v;j[7]=w;j[8]=x;j[9]=y;j[10]=z;j[11]=A;j[12]=p*m+t*n+x*o+k[12];j[13]=q*m+u*n+y*o+k[13];j[14]=r*m+v*n+z*o+k[14];j[15]=s*m+w*n+A*o+k[15]}return j};i.SIMD.translate=function(j,k,l){var m=SIMD.Float32x4.load(k,0),n=SIMD.Float32x4.load(k,4),o=SIMD.Float32x4.load(k,8),p=SIMD.Float32x4.load(k,12),q=SIMD.Float32x4(l[0],l[1],l[2],0);if(k!==j){j[0]=k[0];j[1]=k[1];j[2]=k[2];j[3]=k[3];j[4]=k[4];j[5]=k[5];j[6]=k[6];j[7]=k[7];j[8]=k[8];j[9]=k[9];j[10]=k[10];j[11]=k[11]}m=SIMD.Float32x4.mul(m,SIMD.Float32x4.swizzle(q,0,0,0,0));n=SIMD.Float32x4.mul(n,SIMD.Float32x4.swizzle(q,1,1,1,1));o=SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(q,2,2,2,2));var r=SIMD.Float32x4.add(m,SIMD.Float32x4.add(n,SIMD.Float32x4.add(o,p)));SIMD.Float32x4.store(j,12,r);return j};i.translate=h.USE_SIMD?i.SIMD.translate:i.scalar.translate;i.scalar.scale=function(j,k,l){var m=l[0],n=l[1],o=l[2];j[0]=k[0]*m;j[1]=k[1]*m;j[2]=k[2]*m;j[3]=k[3]*m;j[4]=k[4]*n;j[5]=k[5]*n;j[6]=k[6]*n;j[7]=k[7]*n;j[8]=k[8]*o;j[9]=k[9]*o;j[10]=k[10]*o;j[11]=k[11]*o;j[12]=k[12];j[13]=k[13];j[14]=k[14];j[15]=k[15];return j};i.SIMD.scale=function(j,k,l){var m,n,o,p=SIMD.Float32x4(l[0],l[1],l[2],0);m=SIMD.Float32x4.load(k,0);SIMD.Float32x4.store(j,0,SIMD.Float32x4.mul(m,SIMD.Float32x4.swizzle(p,0,0,0,0)));n=SIMD.Float32x4.load(k,4);SIMD.Float32x4.store(j,4,SIMD.Float32x4.mul(n,SIMD.Float32x4.swizzle(p,1,1,1,1)));o=SIMD.Float32x4.load(k,8);SIMD.Float32x4.store(j,8,SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(p,2,2,2,2)));j[12]=k[12];j[13]=k[13];j[14]=k[14];j[15]=k[15];return j};i.scale=h.USE_SIMD?i.SIMD.scale:i.scalar.scale;i.rotate=function(j,k,l,m){var n=m[0],o=m[1],p=m[2],q=Math.sqrt(n*n+o*o+p*p),r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O;if(Math.abs(q)<h.EPSILON)return null;q=1/q;n*=q;o*=q;p*=q;r=Math.sin(l);s=Math.cos(l);t=1-s;u=k[0];v=k[1];w=k[2];x=k[3];y=k[4];z=k[5];A=k[6];B=k[7];C=k[8];D=k[9];E=k[10];F=k[11];G=n*n*t+s;H=o*n*t+p*r;I=p*n*t-o*r;J=n*o*t-p*r;K=o*o*t+s;L=p*o*t+n*r;M=n*p*t+o*r;N=o*p*t-n*r;O=p*p*t+s;j[0]=u*G+y*H+C*I;j[1]=v*G+z*H+D*I;j[2]=w*G+A*H+E*I;j[3]=x*G+B*H+F*I;j[4]=u*J+y*K+C*L;j[5]=v*J+z*K+D*L;j[6]=w*J+A*K+E*L;j[7]=x*J+B*K+F*L;j[8]=u*M+y*N+C*O;j[9]=v*M+z*N+D*O;j[10]=w*M+A*N+E*O;j[11]=x*M+B*N+F*O;if(k!==j){j[12]=k[12];j[13]=k[13];j[14]=k[14];j[15]=k[15]}return j};i.scalar.rotateX=function(j,k,l){var m=Math.sin(l),n=Math.cos(l),o=k[4],p=k[5],q=k[6],r=k[7],s=k[8],t=k[9],u=k[10],v=k[11];if(k!==j){j[0]=k[0];j[1]=k[1];j[2]=k[2];j[3]=k[3];j[12]=k[12];j[13]=k[13];j[14]=k[14];j[15]=k[15]}j[4]=o*n+s*m;j[5]=p*n+t*m;j[6]=q*n+u*m;j[7]=r*n+v*m;j[8]=s*n-o*m;j[9]=t*n-p*m;j[10]=u*n-q*m;j[11]=v*n-r*m;return j};i.SIMD.rotateX=function(j,k,l){var m=SIMD.Float32x4.splat(Math.sin(l)),n=SIMD.Float32x4.splat(Math.cos(l));if(k!==j){j[0]=k[0];j[1]=k[1];j[2]=k[2];j[3]=k[3];j[12]=k[12];j[13]=k[13];j[14]=k[14];j[15]=k[15]}var o=SIMD.Float32x4.load(k,4),p=SIMD.Float32x4.load(k,8);SIMD.Float32x4.store(j,4,SIMD.Float32x4.add(SIMD.Float32x4.mul(o,n),SIMD.Float32x4.mul(p,m)));SIMD.Float32x4.store(j,8,SIMD.Float32x4.sub(SIMD.Float32x4.mul(p,n),SIMD.Float32x4.mul(o,m)));return j};i.rotateX=h.USE_SIMD?i.SIMD.rotateX:i.scalar.rotateX;i.scalar.rotateY=function(j,k,l){var m=Math.sin(l),n=Math.cos(l),o=k[0],p=k[1],q=k[2],r=k[3],s=k[8],t=k[9],u=k[10],v=k[11];if(k!==j){j[4]=k[4];j[5]=k[5];j[6]=k[6];j[7]=k[7];j[12]=k[12];j[13]=k[13];j[14]=k[14];j[15]=k[15]}j[0]=o*n-s*m;j[1]=p*n-t*m;j[2]=q*n-u*m;j[3]=r*n-v*m;j[8]=o*m+s*n;j[9]=p*m+t*n;j[10]=q*m+u*n;j[11]=r*m+v*n;return j};i.SIMD.rotateY=function(j,k,l){var m=SIMD.Float32x4.splat(Math.sin(l)),n=SIMD.Float32x4.splat(Math.cos(l));if(k!==j){j[4]=k[4];j[5]=k[5];j[6]=k[6];j[7]=k[7];j[12]=k[12];j[13]=k[13];j[14]=k[14];j[15]=k[15]}var o=SIMD.Float32x4.load(k,0),p=SIMD.Float32x4.load(k,8);SIMD.Float32x4.store(j,0,SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,n),SIMD.Float32x4.mul(p,m)));SIMD.Float32x4.store(j,8,SIMD.Float32x4.add(SIMD.Float32x4.mul(o,m),SIMD.Float32x4.mul(p,n)));return j};i.rotateY=h.USE_SIMD?i.SIMD.rotateY:i.scalar.rotateY;i.scalar.rotateZ=function(j,k,l){var m=Math.sin(l),n=Math.cos(l),o=k[0],p=k[1],q=k[2],r=k[3],s=k[4],t=k[5],u=k[6],v=k[7];if(k!==j){j[8]=k[8];j[9]=k[9];j[10]=k[10];j[11]=k[11];j[12]=k[12];j[13]=k[13];j[14]=k[14];j[15]=k[15]}j[0]=o*n+s*m;j[1]=p*n+t*m;j[2]=q*n+u*m;j[3]=r*n+v*m;j[4]=s*n-o*m;j[5]=t*n-p*m;j[6]=u*n-q*m;j[7]=v*n-r*m;return j};i.SIMD.rotateZ=function(j,k,l){var m=SIMD.Float32x4.splat(Math.sin(l)),n=SIMD.Float32x4.splat(Math.cos(l));if(k!==j){j[8]=k[8];j[9]=k[9];j[10]=k[10];j[11]=k[11];j[12]=k[12];j[13]=k[13];j[14]=k[14];j[15]=k[15]}var o=SIMD.Float32x4.load(k,0),p=SIMD.Float32x4.load(k,4);SIMD.Float32x4.store(j,0,SIMD.Float32x4.add(SIMD.Float32x4.mul(o,n),SIMD.Float32x4.mul(p,m)));SIMD.Float32x4.store(j,4,SIMD.Float32x4.sub(SIMD.Float32x4.mul(p,n),SIMD.Float32x4.mul(o,m)));return j};i.rotateZ=h.USE_SIMD?i.SIMD.rotateZ:i.scalar.rotateZ;i.fromTranslation=function(j,k){j[0]=1;j[1]=0;j[2]=0;j[3]=0;j[4]=0;j[5]=1;j[6]=0;j[7]=0;j[8]=0;j[9]=0;j[10]=1;j[11]=0;j[12]=k[0];j[13]=k[1];j[14]=k[2];j[15]=1;return j};i.fromScaling=function(j,k){j[0]=k[0];j[1]=0;j[2]=0;j[3]=0;j[4]=0;j[5]=k[1];j[6]=0;j[7]=0;j[8]=0;j[9]=0;j[10]=k[2];j[11]=0;j[12]=0;j[13]=0;j[14]=0;j[15]=1;return j};i.fromRotation=function(j,k,l){var m=l[0],n=l[1],o=l[2],p=Math.sqrt(m*m+n*n+o*o),q,r,s;if(Math.abs(p)<h.EPSILON)return null;p=1/p;m*=p;n*=p;o*=p;q=Math.sin(k);r=Math.cos(k);s=1-r;j[0]=m*m*s+r;j[1]=n*m*s+o*q;j[2]=o*m*s-n*q;j[3]=0;j[4]=m*n*s-o*q;j[5]=n*n*s+r;j[6]=o*n*s+m*q;j[7]=0;j[8]=m*o*s+n*q;j[9]=n*o*s-m*q;j[10]=o*o*s+r;j[11]=0;j[12]=0;j[13]=0;j[14]=0;j[15]=1;return j};i.fromXRotation=function(j,k){var l=Math.sin(k),m=Math.cos(k);j[0]=1;j[1]=0;j[2]=0;j[3]=0;j[4]=0;j[5]=m;j[6]=l;j[7]=0;j[8]=0;j[9]=-l;j[10]=m;j[11]=0;j[12]=0;j[13]=0;j[14]=0;j[15]=1;return j};i.fromYRotation=function(j,k){var l=Math.sin(k),m=Math.cos(k);j[0]=m;j[1]=0;j[2]=-l;j[3]=0;j[4]=0;j[5]=1;j[6]=0;j[7]=0;j[8]=l;j[9]=0;j[10]=m;j[11]=0;j[12]=0;j[13]=0;j[14]=0;j[15]=1;return j};i.fromZRotation=function(j,k){var l=Math.sin(k),m=Math.cos(k);j[0]=m;j[1]=l;j[2]=0;j[3]=0;j[4]=-l;j[5]=m;j[6]=0;j[7]=0;j[8]=0;j[9]=0;j[10]=1;j[11]=0;j[12]=0;j[13]=0;j[14]=0;j[15]=1;return j};i.fromRotationTranslation=function(j,k,l){var m=k[0],n=k[1],o=k[2],p=k[3],q=m+m,r=n+n,s=o+o,t=m*q,u=m*r,v=m*s,w=n*r,x=n*s,y=o*s,z=p*q,A=p*r,B=p*s;j[0]=1-(w+y);j[1]=u+B;j[2]=v-A;j[3]=0;j[4]=u-B;j[5]=1-(t+y);j[6]=x+z;j[7]=0;j[8]=v+A;j[9]=x-z;j[10]=1-(t+w);j[11]=0;j[12]=l[0];j[13]=l[1];j[14]=l[2];j[15]=1;return j};i.getTranslation=function(j,k){j[0]=k[12];j[1]=k[13];j[2]=k[14];return j};i.getRotation=function(j,k){var l=k[0]+k[5]+k[10],m=0;if(l>0){m=Math.sqrt(l+1)*2;j[3]=.25*m;j[0]=(k[6]-k[9])/m;j[1]=(k[8]-k[2])/m;j[2]=(k[1]-k[4])/m}else if(k[0]>k[5]&k[0]>k[10]){m=Math.sqrt(1+k[0]-k[5]-k[10])*2;j[3]=(k[6]-k[9])/m;j[0]=.25*m;j[1]=(k[1]+k[4])/m;j[2]=(k[8]+k[2])/m}else if(k[5]>k[10]){m=Math.sqrt(1+k[5]-k[0]-k[10])*2;j[3]=(k[8]-k[2])/m;j[0]=(k[1]+k[4])/m;j[1]=.25*m;j[2]=(k[6]+k[9])/m}else{m=Math.sqrt(1+k[10]-k[0]-k[5])*2;j[3]=(k[1]-k[4])/m;j[0]=(k[8]+k[2])/m;j[1]=(k[6]+k[9])/m;j[2]=.25*m}return j};i.fromRotationTranslationScale=function(j,k,l,m){var n=k[0],o=k[1],p=k[2],q=k[3],r=n+n,s=o+o,t=p+p,u=n*r,v=n*s,w=n*t,x=o*s,y=o*t,z=p*t,A=q*r,B=q*s,C=q*t,D=m[0],E=m[1],F=m[2];j[0]=(1-(x+z))*D;j[1]=(v+C)*D;j[2]=(w-B)*D;j[3]=0;j[4]=(v-C)*E;j[5]=(1-(u+z))*E;j[6]=(y+A)*E;j[7]=0;j[8]=(w+B)*F;j[9]=(y-A)*F;j[10]=(1-(u+x))*F;j[11]=0;j[12]=l[0];j[13]=l[1];j[14]=l[2];j[15]=1;return j};i.fromRotationTranslationScaleOrigin=function(j,k,l,m,n){var o=k[0],p=k[1],q=k[2],r=k[3],s=o+o,t=p+p,u=q+q,v=o*s,w=o*t,x=o*u,y=p*t,z=p*u,A=q*u,B=r*s,C=r*t,D=r*u,E=m[0],F=m[1],G=m[2],H=n[0],I=n[1],J=n[2];j[0]=(1-(y+A))*E;j[1]=(w+D)*E;j[2]=(x-C)*E;j[3]=0;j[4]=(w-D)*F;j[5]=(1-(v+A))*F;j[6]=(z+B)*F;j[7]=0;j[8]=(x+C)*G;j[9]=(z-B)*G;j[10]=(1-(v+y))*G;j[11]=0;j[12]=l[0]+H-(j[0]*H+j[4]*I+j[8]*J);j[13]=l[1]+I-(j[1]*H+j[5]*I+j[9]*J);j[14]=l[2]+J-(j[2]*H+j[6]*I+j[10]*J);j[15]=1;return j};i.fromQuat=function(j,k){var l=k[0],m=k[1],n=k[2],o=k[3],p=l+l,q=m+m,r=n+n,s=l*p,t=m*p,u=m*q,v=n*p,w=n*q,x=n*r,y=o*p,z=o*q,A=o*r;j[0]=1-u-x;j[1]=t+A;j[2]=v-z;j[3]=0;j[4]=t-A;j[5]=1-s-x;j[6]=w+y;j[7]=0;j[8]=v+z;j[9]=w-y;j[10]=1-s-u;j[11]=0;j[12]=0;j[13]=0;j[14]=0;j[15]=1;return j};i.frustum=function(j,k,l,m,n,o,p){var q=1/(l-k),r=1/(n-m),s=1/(o-p);j[0]=o*2*q;j[1]=0;j[2]=0;j[3]=0;j[4]=0;j[5]=o*2*r;j[6]=0;j[7]=0;j[8]=(l+k)*q;j[9]=(n+m)*r;j[10]=(p+o)*s;j[11]=-1;j[12]=0;j[13]=0;j[14]=p*o*2*s;j[15]=0;return j};i.perspective=function(j,k,l,m,n){var o=1/Math.tan(k/2),p=1/(m-n);j[0]=o/l;j[1]=0;j[2]=0;j[3]=0;j[4]=0;j[5]=o;j[6]=0;j[7]=0;j[8]=0;j[9]=0;j[10]=(n+m)*p;j[11]=-1;j[12]=0;j[13]=0;j[14]=2*n*m*p;j[15]=0;return j};i.perspectiveFromFieldOfView=function(j,k,l,m){var n=Math.tan(k.upDegrees*Math.PI/180),o=Math.tan(k.downDegrees*Math.PI/180),p=Math.tan(k.leftDegrees*Math.PI/180),q=Math.tan(k.rightDegrees*Math.PI/180),r=2/(p+q),s=2/(n+o);j[0]=r;j[1]=0;j[2]=0;j[3]=0;j[4]=0;j[5]=s;j[6]=0;j[7]=0;j[8]=-((p-q)*r*.5);j[9]=(n-o)*s*.5;j[10]=m/(l-m);j[11]=-1;j[12]=0;j[13]=0;j[14]=m*l/(l-m);j[15]=0;return j};i.ortho=function(j,k,l,m,n,o,p){var q=1/(k-l),r=1/(m-n),s=1/(o-p);j[0]=-2*q;j[1]=0;j[2]=0;j[3]=0;j[4]=0;j[5]=-2*r;j[6]=0;j[7]=0;j[8]=0;j[9]=0;j[10]=2*s;j[11]=0;j[12]=(k+l)*q;j[13]=(n+m)*r;j[14]=(p+o)*s;j[15]=1;return j};i.lookAt=function(j,k,l,m){var n,o,p,q,r,s,t,u,v,w,x=k[0],y=k[1],z=k[2],A=m[0],B=m[1],C=m[2],D=l[0],E=l[1],F=l[2];if(Math.abs(x-D)<h.EPSILON&&Math.abs(y-E)<h.EPSILON&&Math.abs(z-F)<h.EPSILON)return i.identity(j);t=x-D;u=y-E;v=z-F;w=1/Math.sqrt(t*t+u*u+v*v);t*=w;u*=w;v*=w;n=B*v-C*u;o=C*t-A*v;p=A*u-B*t;w=Math.sqrt(n*n+o*o+p*p);if(!w){n=0;o=0;p=0}else{w=1/w;n*=w;o*=w;p*=w}q=u*p-v*o;r=v*n-t*p;s=t*o-u*n;w=Math.sqrt(q*q+r*r+s*s);if(!w){q=0;r=0;s=0}else{w=1/w;q*=w;r*=w;s*=w}j[0]=n;j[1]=q;j[2]=t;j[3]=0;j[4]=o;j[5]=r;j[6]=u;j[7]=0;j[8]=p;j[9]=s;j[10]=v;j[11]=0;j[12]=-(n*x+o*y+p*z);j[13]=-(q*x+r*y+s*z);j[14]=-(t*x+u*y+v*z);j[15]=1;return j};i.str=function(j){return"mat4("+j[0]+", "+j[1]+", "+j[2]+", "+j[3]+", "+j[4]+", "+j[5]+", "+j[6]+", "+j[7]+", "+j[8]+", "+j[9]+", "+j[10]+", "+j[11]+", "+j[12]+", "+j[13]+", "+j[14]+", "+j[15]+")"};i.frob=function(j){return Math.sqrt(Math.pow(j[0],2)+Math.pow(j[1],2)+Math.pow(j[2],2)+Math.pow(j[3],2)+Math.pow(j[4],2)+Math.pow(j[5],2)+Math.pow(j[6],2)+Math.pow(j[7],2)+Math.pow(j[8],2)+Math.pow(j[9],2)+Math.pow(j[10],2)+Math.pow(j[11],2)+Math.pow(j[12],2)+Math.pow(j[13],2)+Math.pow(j[14],2)+Math.pow(j[15],2))};i.add=function(j,k,l){j[0]=k[0]+l[0];j[1]=k[1]+l[1];j[2]=k[2]+l[2];j[3]=k[3]+l[3];j[4]=k[4]+l[4];j[5]=k[5]+l[5];j[6]=k[6]+l[6];j[7]=k[7]+l[7];j[8]=k[8]+l[8];j[9]=k[9]+l[9];j[10]=k[10]+l[10];j[11]=k[11]+l[11];j[12]=k[12]+l[12];j[13]=k[13]+l[13];j[14]=k[14]+l[14];j[15]=k[15]+l[15];return j};i.subtract=function(j,k,l){j[0]=k[0]-l[0];j[1]=k[1]-l[1];j[2]=k[2]-l[2];j[3]=k[3]-l[3];j[4]=k[4]-l[4];j[5]=k[5]-l[5];j[6]=k[6]-l[6];j[7]=k[7]-l[7];j[8]=k[8]-l[8];j[9]=k[9]-l[9];j[10]=k[10]-l[10];j[11]=k[11]-l[11];j[12]=k[12]-l[12];j[13]=k[13]-l[13];j[14]=k[14]-l[14];j[15]=k[15]-l[15];return j};i.sub=i.subtract;i.multiplyScalar=function(j,k,l){j[0]=k[0]*l;j[1]=k[1]*l;j[2]=k[2]*l;j[3]=k[3]*l;j[4]=k[4]*l;j[5]=k[5]*l;j[6]=k[6]*l;j[7]=k[7]*l;j[8]=k[8]*l;j[9]=k[9]*l;j[10]=k[10]*l;j[11]=k[11]*l;j[12]=k[12]*l;j[13]=k[13]*l;j[14]=k[14]*l;j[15]=k[15]*l;return j};i.multiplyScalarAndAdd=function(j,k,l,m){j[0]=k[0]+l[0]*m;j[1]=k[1]+l[1]*m;j[2]=k[2]+l[2]*m;j[3]=k[3]+l[3]*m;j[4]=k[4]+l[4]*m;j[5]=k[5]+l[5]*m;j[6]=k[6]+l[6]*m;j[7]=k[7]+l[7]*m;j[8]=k[8]+l[8]*m;j[9]=k[9]+l[9]*m;j[10]=k[10]+l[10]*m;j[11]=k[11]+l[11]*m;j[12]=k[12]+l[12]*m;j[13]=k[13]+l[13]*m;j[14]=k[14]+l[14]*m;j[15]=k[15]+l[15]*m;return j};i.exactEquals=function(j,k){return j[0]===k[0]&&j[1]===k[1]&&j[2]===k[2]&&j[3]===k[3]&&j[4]===k[4]&&j[5]===k[5]&&j[6]===k[6]&&j[7]===k[7]&&j[8]===k[8]&&j[9]===k[9]&&j[10]===k[10]&&j[11]===k[11]&&j[12]===k[12]&&j[13]===k[13]&&j[14]===k[14]&&j[15]===k[15]};i.equals=function(j,k){var l=j[0],m=j[1],n=j[2],o=j[3],p=j[4],q=j[5],r=j[6],s=j[7],t=j[8],u=j[9],v=j[10],w=j[11],x=j[12],y=j[13],z=j[14],A=j[15],B=k[0],C=k[1],D=k[2],E=k[3],F=k[4],G=k[5],H=k[6],I=k[7],J=k[8],K=k[9],L=k[10],M=k[11],N=k[12],O=k[13],P=k[14],Q=k[15];return Math.abs(l-B)<=h.EPSILON*Math.max(1,Math.abs(l),Math.abs(B))&&Math.abs(m-C)<=h.EPSILON*Math.max(1,Math.abs(m),Math.abs(C))&&Math.abs(n-D)<=h.EPSILON*Math.max(1,Math.abs(n),Math.abs(D))&&Math.abs(o-E)<=h.EPSILON*Math.max(1,Math.abs(o),Math.abs(E))&&Math.abs(p-F)<=h.EPSILON*Math.max(1,Math.abs(p),Math.abs(F))&&Math.abs(q-G)<=h.EPSILON*Math.max(1,Math.abs(q),Math.abs(G))&&Math.abs(r-H)<=h.EPSILON*Math.max(1,Math.abs(r),Math.abs(H))&&Math.abs(s-I)<=h.EPSILON*Math.max(1,Math.abs(s),Math.abs(I))&&Math.abs(t-J)<=h.EPSILON*Math.max(1,Math.abs(t),Math.abs(J))&&Math.abs(u-K)<=h.EPSILON*Math.max(1,Math.abs(u),Math.abs(K))&&Math.abs(v-L)<=h.EPSILON*Math.max(1,Math.abs(v),Math.abs(L))&&Math.abs(w-M)<=h.EPSILON*Math.max(1,Math.abs(w),Math.abs(M))&&Math.abs(x-N)<=h.EPSILON*Math.max(1,Math.abs(x),Math.abs(N))&&Math.abs(y-O)<=h.EPSILON*Math.max(1,Math.abs(y),Math.abs(O))&&Math.abs(z-P)<=h.EPSILON*Math.max(1,Math.abs(z),Math.abs(P))&&Math.abs(A-Q)<=h.EPSILON*Math.max(1,Math.abs(A),Math.abs(Q))};f.exports=i}),null);
__d("gl-matrix-vec3",["gl-matrix-common"],(function a(b,c,d,e,f,g){var h=c("gl-matrix-common"),i={};i.create=function(){var j=new h.ARRAY_TYPE(3);j[0]=0;j[1]=0;j[2]=0;return j};i.clone=function(j){var k=new h.ARRAY_TYPE(3);k[0]=j[0];k[1]=j[1];k[2]=j[2];return k};i.fromValues=function(j,k,l){var m=new h.ARRAY_TYPE(3);m[0]=j;m[1]=k;m[2]=l;return m};i.copy=function(j,k){j[0]=k[0];j[1]=k[1];j[2]=k[2];return j};i.set=function(j,k,l,m){j[0]=k;j[1]=l;j[2]=m;return j};i.add=function(j,k,l){j[0]=k[0]+l[0];j[1]=k[1]+l[1];j[2]=k[2]+l[2];return j};i.subtract=function(j,k,l){j[0]=k[0]-l[0];j[1]=k[1]-l[1];j[2]=k[2]-l[2];return j};i.sub=i.subtract;i.multiply=function(j,k,l){j[0]=k[0]*l[0];j[1]=k[1]*l[1];j[2]=k[2]*l[2];return j};i.mul=i.multiply;i.divide=function(j,k,l){j[0]=k[0]/l[0];j[1]=k[1]/l[1];j[2]=k[2]/l[2];return j};i.div=i.divide;i.ceil=function(j,k){j[0]=Math.ceil(k[0]);j[1]=Math.ceil(k[1]);j[2]=Math.ceil(k[2]);return j};i.floor=function(j,k){j[0]=Math.floor(k[0]);j[1]=Math.floor(k[1]);j[2]=Math.floor(k[2]);return j};i.min=function(j,k,l){j[0]=Math.min(k[0],l[0]);j[1]=Math.min(k[1],l[1]);j[2]=Math.min(k[2],l[2]);return j};i.max=function(j,k,l){j[0]=Math.max(k[0],l[0]);j[1]=Math.max(k[1],l[1]);j[2]=Math.max(k[2],l[2]);return j};i.round=function(j,k){j[0]=Math.round(k[0]);j[1]=Math.round(k[1]);j[2]=Math.round(k[2]);return j};i.scale=function(j,k,l){j[0]=k[0]*l;j[1]=k[1]*l;j[2]=k[2]*l;return j};i.scaleAndAdd=function(j,k,l,m){j[0]=k[0]+l[0]*m;j[1]=k[1]+l[1]*m;j[2]=k[2]+l[2]*m;return j};i.distance=function(j,k){var l=k[0]-j[0],m=k[1]-j[1],n=k[2]-j[2];return Math.sqrt(l*l+m*m+n*n)};i.dist=i.distance;i.squaredDistance=function(j,k){var l=k[0]-j[0],m=k[1]-j[1],n=k[2]-j[2];return l*l+m*m+n*n};i.sqrDist=i.squaredDistance;i.length=function(j){var k=j[0],l=j[1],m=j[2];return Math.sqrt(k*k+l*l+m*m)};i.len=i.length;i.squaredLength=function(j){var k=j[0],l=j[1],m=j[2];return k*k+l*l+m*m};i.sqrLen=i.squaredLength;i.negate=function(j,k){j[0]=-k[0];j[1]=-k[1];j[2]=-k[2];return j};i.inverse=function(j,k){j[0]=1/k[0];j[1]=1/k[1];j[2]=1/k[2];return j};i.normalize=function(j,k){var l=k[0],m=k[1],n=k[2],o=l*l+m*m+n*n;if(o>0){o=1/Math.sqrt(o);j[0]=k[0]*o;j[1]=k[1]*o;j[2]=k[2]*o}return j};i.dot=function(j,k){return j[0]*k[0]+j[1]*k[1]+j[2]*k[2]};i.cross=function(j,k,l){var m=k[0],n=k[1],o=k[2],p=l[0],q=l[1],r=l[2];j[0]=n*r-o*q;j[1]=o*p-m*r;j[2]=m*q-n*p;return j};i.lerp=function(j,k,l,m){var n=k[0],o=k[1],p=k[2];j[0]=n+m*(l[0]-n);j[1]=o+m*(l[1]-o);j[2]=p+m*(l[2]-p);return j};i.hermite=function(j,k,l,m,n,o){var p=o*o,q=p*(2*o-3)+1,r=p*(o-2)+o,s=p*(o-1),t=p*(3-2*o);j[0]=k[0]*q+l[0]*r+m[0]*s+n[0]*t;j[1]=k[1]*q+l[1]*r+m[1]*s+n[1]*t;j[2]=k[2]*q+l[2]*r+m[2]*s+n[2]*t;return j};i.bezier=function(j,k,l,m,n,o){var p=1-o,q=p*p,r=o*o,s=q*p,t=3*o*q,u=3*r*p,v=r*o;j[0]=k[0]*s+l[0]*t+m[0]*u+n[0]*v;j[1]=k[1]*s+l[1]*t+m[1]*u+n[1]*v;j[2]=k[2]*s+l[2]*t+m[2]*u+n[2]*v;return j};i.random=function(j,k){k=k||1;var l=h.RANDOM()*2*Math.PI,m=h.RANDOM()*2-1,n=Math.sqrt(1-m*m)*k;j[0]=Math.cos(l)*n;j[1]=Math.sin(l)*n;j[2]=m*k;return j};i.transformMat4=function(j,k,l){var m=k[0],n=k[1],o=k[2],p=l[3]*m+l[7]*n+l[11]*o+l[15];p=p||1;j[0]=(l[0]*m+l[4]*n+l[8]*o+l[12])/p;j[1]=(l[1]*m+l[5]*n+l[9]*o+l[13])/p;j[2]=(l[2]*m+l[6]*n+l[10]*o+l[14])/p;return j};i.transformMat3=function(j,k,l){var m=k[0],n=k[1],o=k[2];j[0]=m*l[0]+n*l[3]+o*l[6];j[1]=m*l[1]+n*l[4]+o*l[7];j[2]=m*l[2]+n*l[5]+o*l[8];return j};i.transformQuat=function(j,k,l){var m=k[0],n=k[1],o=k[2],p=l[0],q=l[1],r=l[2],s=l[3],t=s*m+q*o-r*n,u=s*n+r*m-p*o,v=s*o+p*n-q*m,w=-p*m-q*n-r*o;j[0]=t*s+w*-p+u*-r-v*-q;j[1]=u*s+w*-q+v*-p-t*-r;j[2]=v*s+w*-r+t*-q-u*-p;return j};i.rotateX=function(j,k,l,m){var n=[],o=[];n[0]=k[0]-l[0];n[1]=k[1]-l[1];n[2]=k[2]-l[2];o[0]=n[0];o[1]=n[1]*Math.cos(m)-n[2]*Math.sin(m);o[2]=n[1]*Math.sin(m)+n[2]*Math.cos(m);j[0]=o[0]+l[0];j[1]=o[1]+l[1];j[2]=o[2]+l[2];return j};i.rotateY=function(j,k,l,m){var n=[],o=[];n[0]=k[0]-l[0];n[1]=k[1]-l[1];n[2]=k[2]-l[2];o[0]=n[2]*Math.sin(m)+n[0]*Math.cos(m);o[1]=n[1];o[2]=n[2]*Math.cos(m)-n[0]*Math.sin(m);j[0]=o[0]+l[0];j[1]=o[1]+l[1];j[2]=o[2]+l[2];return j};i.rotateZ=function(j,k,l,m){var n=[],o=[];n[0]=k[0]-l[0];n[1]=k[1]-l[1];n[2]=k[2]-l[2];o[0]=n[0]*Math.cos(m)-n[1]*Math.sin(m);o[1]=n[0]*Math.sin(m)+n[1]*Math.cos(m);o[2]=n[2];j[0]=o[0]+l[0];j[1]=o[1]+l[1];j[2]=o[2]+l[2];return j};i.forEach=function(){var j=i.create();return function(k,l,m,n,o,p){var q,r;if(!l)l=3;if(!m)m=0;if(n)r=Math.min(n*l+m,k.length);else r=k.length;for(q=m;q<r;q+=l){j[0]=k[q];j[1]=k[q+1];j[2]=k[q+2];o(j,j,p);k[q]=j[0];k[q+1]=j[1];k[q+2]=j[2]}return k}}();i.angle=function(j,k){var l=i.fromValues(j[0],j[1],j[2]),m=i.fromValues(k[0],k[1],k[2]);i.normalize(l,l);i.normalize(m,m);var n=i.dot(l,m);if(n>1)return 0;else return Math.acos(n)};i.str=function(j){return"vec3("+j[0]+", "+j[1]+", "+j[2]+")"};i.exactEquals=function(j,k){return j[0]===k[0]&&j[1]===k[1]&&j[2]===k[2]};i.equals=function(j,k){var l=j[0],m=j[1],n=j[2],o=k[0],p=k[1],q=k[2];return Math.abs(l-o)<=h.EPSILON*Math.max(1,Math.abs(l),Math.abs(o))&&Math.abs(m-p)<=h.EPSILON*Math.max(1,Math.abs(m),Math.abs(p))&&Math.abs(n-q)<=h.EPSILON*Math.max(1,Math.abs(n),Math.abs(q))};f.exports=i}),null);
__d("GLMatrix",["gl-matrix-common","gl-matrix-mat4","gl-matrix-vec3"],(function a(b,c,d,e,f,g){g.glMatrix=c("gl-matrix-common");g.mat4=c("gl-matrix-mat4");g.vec3=c("gl-matrix-vec3")}),null);
__d("degToRad",[],(function a(b,c,d,e,f,g){"use strict";function h(i){return i*Math.PI/180}f.exports=h}),null);
__d("radToDeg",[],(function a(b,c,d,e,f,g){"use strict";function h(i){return i*180/Math.PI}f.exports=h}),null);
__d("SphericalPhotoProjectionUtils",["GLMatrix","degToRad","radToDeg"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("GLMatrix").glMatrix,i=c("GLMatrix").mat4,j=c("GLMatrix").vec3,k={getMaxMinVfov:function l(m,n){var o=c("degToRad")(m.partialRightDegrees||180),p=c("degToRad")(m.partialLeftDegrees||180),q=c("degToRad")(m.partialTopDegrees||90),r=c("degToRad")(m.partialBottomDegrees||90),s=(o+p)/2,t=(q+r)/2,u=2*Math.atan(s/n),v=this.getMinFullVfov(t,t);return{maxVfov:c("radToDeg")(Math.max(u,v)),minVfov:c("radToDeg")(Math.min(v,u/2))}},getMaxVfov:function l(m,n){return this.getMaxMinVfov(m,n).maxVfov},getMinFullVfov:function l(m,n){var o=(m+n)/2;return 2*Math.atan(o)},getMinFullHfov:function l(m,n){var o=(m+n)/2;return 2*Math.atan(o)},getZoomProgressFromFov:function l(m,n,o){return Math.max(0,Math.min(1,(m-o)/(n-o)))},getZoomProgress:function l(m,n,o){var p=this.getMaxMinVfov(n,o),q=p.maxVfov,r=p.minVfov;return this.getZoomProgressFromFov(m,q,r)},getHfov:function l(m,n){var o=2*Math.atan(Math.tan(m/2)*n);return o},normalizeLimits:function l(m){__p&&__p();var n=m.partialLeftDegrees||0,o=m.partialRightDegrees||0,p=m.partialTopDegrees||0,q=m.partialBottomDegrees||0;if(n<0&&o<0){var r=Math.max(n,o);n-=r;o-=r}if(p<0&&q<0){var s=Math.max(p,q);p-=s;q-=s}return{partialLeftDegrees:n,partialRightDegrees:o,partialTopDegrees:p,partialBottomDegrees:q}},getPartialLimits:function l(m,n,o){var p=this.getMaxMinVfov(o,n),q=p.maxVfov,r=p.minVfov,s=c("degToRad")(m),t=this.getHfov(s,n),u=this.getZoomProgressFromFov(m,q,r),v=Math.tan(t/2),w=Math.tan(s/2),x=Math.sin(v)*u+v*(1-u),y=Math.cos(v)*u+1*(1-u),z=Math.sin(w)*u+w*(1-u),A=Math.cos(w)*u+1*(1-u),B=function B(G,H,I){var J=Math.sin(G),K=Math.cos(G);return m>q?0:c("radToDeg")(Math.atan2(J*I-K*H,J*H+K*I))},C=c("degToRad")(o.partialLeftDegrees||180),D=c("degToRad")(o.partialRightDegrees||180),E=c("degToRad")(o.partialTopDegrees||90),F=c("degToRad")(o.partialBottomDegrees||90);return this.normalizeLimits({partialLeftDegrees:B(C,x,y),partialRightDegrees:B(D,x,y),partialTopDegrees:B(E,z,A),partialBottomDegrees:B(F,z,A)})},projectVertex:function l(m,n,o,p){var q=m[0],r=m[1],s=o?Math.sin(q):Math.sin(q)*Math.cos(r),t=o?r:Math.sin(r),u=o?Math.cos(q):Math.cos(q)*Math.cos(r);s=p*s+(1-p)*q;t=p*t+(1-p)*r;u=p*u+(1-p)*1;var v=j.fromValues(s,t,u);j.transformMat4(v,v,n);return v},getSphericalFromVertex:function l(m){var n=m[0],o=m[1],p=m[2],q=Math.atan2(n,p),r=Math.atan2(o,Math.sqrt(n*n+p*p));return{yaw:q,pitch:r}},getRelativeHfov:function l(m,n,o){var p=this.getPartialLimits(m,n,o),q=o.partialLeftDegrees||180,r=o.partialRightDegrees||180,s=p.partialLeftDegrees||0,t=p.partialRightDegrees||0;return c("degToRad")(r-t+q-s)},getRelativeVfov:function l(m,n,o){var p=this.getPartialLimits(m,n,o),q=o.partialTopDegrees||90,r=o.partialBottomDegrees||90,s=p.partialTopDegrees||0,t=p.partialBottomDegrees||0;return c("degToRad")(q-s+r-t)},convert2dTo3d:function l(m,n,o,p,q,r){var s=p/q,t=p/2,u=q/2,v=(m-t)*(2/p),w=(n-u)*(2/q),x=c("degToRad")(o.fov),y=this.getHfov(x,s),z=this.getMinFullHfov(c("degToRad")(r.partialLeftDegrees||180),c("degToRad")(r.partialRightDegrees||180)),A=Math.tan(x/2),B=Math.tan(y/2),C=Math.tan(Math.min(y,z)/2),D=v*B,E=-w*A;if(D>C||D<-C)return null;var F=this.getZoomProgress(o.fov,r,s),G=i.create();i.rotateY(G,G,c("degToRad")(o.yaw));i.rotateX(G,G,-c("degToRad")(o.pitch));var H=this.projectVertex(j.fromValues(D,E,-1),G,false,F),I=this.getSphericalFromVertex(H),J=c("radToDeg")(I.yaw);return{yaw:J<0?360+J:J,pitch:c("radToDeg")(I.pitch)}},convert3dTo2d:function l(m,n,o,p,q,r){var s=c("degToRad")(m),t=c("degToRad")(n),u=c("degToRad")(o.fov),v=p/q,w=this.getHfov(u,v),x=this.getMinFullHfov(c("degToRad")(r.partialLeftDegrees||180),c("degToRad")(r.partialRightDegrees||180)),y=Math.tan(w/2),z=Math.tan(Math.min(w,x)/2),A=z/y,B=this.getMinFullVfov(c("degToRad")(r.partialTopDegrees||90),c("degToRad")(r.partialBottomDegrees||90)),C=Math.tan(u/2),D=Math.tan(Math.min(u,B)/2),E=D/C,F=this.getRelativeHfov(o.fov,v,r),G=this.getRelativeVfov(o.fov,v,r),H=i.create();i.rotateY(H,H,c("degToRad")(o.yaw));i.rotateX(H,H,-c("degToRad")(o.pitch));i.invert(H,H);var I=s+Math.PI,J=t+Math.PI/2,K=-Math.sin(J)*Math.sin(I),L=-Math.cos(J),M=-Math.sin(J)*Math.cos(I),N=j.fromValues(K,L,M);j.transformMat4(N,N,H);var O=Math.atan2(N[0],N[2]),P=Math.atan2(N[1],Math.sqrt(N[0]*N[0]+N[2]*N[2])),Q=.5+O*A/F,R=.5-P*E/G;return{x:Q*p,y:R*q}}};f.exports=k}),null);
__d("SphericalViewportControl",["cx","CSS","DOMQuery","Event","EventEmitter","Keys","Map","SphericalPhotoConfig","SubscriptionsHandler","UserAgent","VelocityTracker","SphericalPhotoProjectionUtils","debounce","getElementRect","performanceNow","requestAnimationFrame","throttle","uniqueID","degToRad","radToDeg","queryThenMutateDOM"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j,k=c("DOMQuery").scry(window.document.body,"_li")[0]||window.document.body,l=2.5,m=20,n=110,o=179,p=.01,q=1e3,r=.5,s=["W","A","S","D"].reduce(function(v,w){v[w]=w.charCodeAt(0);return v},{}),t={Up:"__tu",Down:"__tz",Left:"_2a6u",Right:"_2a6v",UpLeft:"__t-",UpRight:"__u0",DownLeft:"__u1",DownRight:"__u3"};i=babelHelpers.inherits(u,c("EventEmitter"));j=i&&i.prototype;function u(v,w){__p&&__p();var x=arguments.length<=2||arguments[2]===undefined?{}:arguments[2],y=arguments.length<=3||arguments[3]===undefined?false:arguments[3],z=arguments.length<=4||arguments[4]===undefined?k:arguments[4];"use strict";j.constructor.call(this);this.$SphericalViewportControl55={x:1,y:1};this.$SphericalViewportControl85=function(A){A.deliberateSync=true;if(this.$SphericalViewportControl31)A.preventDefault();this.$SphericalViewportControl105(A);if(this.$SphericalViewportControl39)c("Event").kill(A)}.bind(this);this.$SphericalViewportControl105=c("throttle")(function(A){this.emit("wheelScroll",A);if(!this.$SphericalViewportControl39)return;var B=(A.deltaX||0)+(A.deltaY||0)+(A.deltaZ||0),C=B/120*45/10;this.$SphericalViewportControl79(C)}.bind(this),30);this.$SphericalViewportControl108=function(){__p&&__p();var A=c("performanceNow")(),B=(A-this.$SphericalViewportControl50)/1e3;this.$SphericalViewportControl50=A;this.$SphericalViewportControl109();if(!this.$SphericalViewportControl51)c("queryThenMutateDOM")(this.$SphericalViewportControl71.bind(this),function(){return null});var C=this.$SphericalViewportControl92(),D=false;if(this.$SphericalViewportControl35&&this.$SphericalViewportControl45&&this.$SphericalViewportControl40&&!this.$SphericalViewportControl12&&!this.$SphericalViewportControl13){var E=this.$SphericalViewportControl110()*B;C.x+=E;var F=this.$SphericalViewportControl111()*B;C.y+=F;if(E||F)D=true}C.x+=this.$SphericalViewportControl2.getVelocityX()*B;C.y+=this.$SphericalViewportControl2.getVelocityY()*B;C.x+=this.$SphericalViewportControl3.getVelocityX()*B;C.y+=this.$SphericalViewportControl3.getVelocityY()*B;C.x*=this.$SphericalViewportControl55.x;C.y*=this.$SphericalViewportControl55.y;this.$SphericalViewportControl112(C.x,C.y);var G=this.$SphericalViewportControl2.getSpeed()>0||this.$SphericalViewportControl3.getSpeed()>0;if(this.$SphericalViewportControl12||this.$SphericalViewportControl11||this.$SphericalViewportControl13||this.$SphericalViewportControl48||this.$SphericalViewportControl38||G||D)c("requestAnimationFrame")(this.$SphericalViewportControl108);else{this.$SphericalViewportControl8=false;this.emit("updateViewportEnd",this.$SphericalViewportControl19.x,this.$SphericalViewportControl19.y)}}.bind(this);this.$SphericalViewportControl2=new(c("VelocityTracker"))(300);this.$SphericalViewportControl3=new(c("VelocityTracker"))(300);this.$SphericalViewportControl6=new(c("SubscriptionsHandler"))();this.$SphericalViewportControl25=v;this.$SphericalViewportControl4=z;this.$SphericalViewportControl44=m;this.$SphericalViewportControl54=y;this.$SphericalViewportControl56(w);this.$SphericalViewportControl14={x:0,y:0};this.$SphericalViewportControl50=0;this.$SphericalViewportControl10={left:0,right:0,up:0,down:0};this.$SphericalViewportControl16={x:0,y:0};this.$SphericalViewportControl17={x:0,y:0};this.$SphericalViewportControl18=new(c("VelocityTracker"))();this.$SphericalViewportControl23=new(c("Map"))();this.$SphericalViewportControl31=false;this.$SphericalViewportControl15=false;this.$SphericalViewportControl20=false;this.$SphericalViewportControl36=x.enableGyro||false;this.$SphericalViewportControl37=x.slipFactor||0;this.$SphericalViewportControl40=x.springFactor||0;this.$SphericalViewportControl41=x.maxSpringDegrees||15;this.$SphericalViewportControl42=x.maxStretchXDegrees||20;this.$SphericalViewportControl43=x.maxStretchYDegrees||20;this.$SphericalViewportControl46=x.rubberBandConstant||0;this.$SphericalViewportControl45=x.enableRubberBanding||false;this.$SphericalViewportControl48=false;this.$SphericalViewportControl49=0;this.$SphericalViewportControl47=c("debounce")(function(){return this.emit("zoomStart")}.bind(this),q);this.$SphericalViewportControl30=this.$SphericalViewportControl57();this.$SphericalViewportControl51=x.disableAutoClientSizeUpdate||false;this.$SphericalViewportControl52=[];this.$SphericalViewportControl53=false;this.$SphericalViewportControl24=this.addNewLayer(this.$SphericalViewportControl25)}u.prototype.isListening=function(v){"use strict";return Boolean(this.getSubscriptionKeyFromElement(v))};u.prototype.getSubscriptionKeyFromElement=function(v){"use strict";__p&&__p();for(var w=this.$SphericalViewportControl23,x=Array.isArray(w),y=0,w=x?w:w[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var z;if(x){if(y>=w.length)break;z=w[y++]}else{y=w.next();if(y.done)break;z=y.value}var A=z,B=A[0],C=A[1];if(C.element===v)return B}return null};u.prototype.addNewLayer=function(v){"use strict";var w=this.getSubscriptionKeyFromElement(v);if(!w){w=c("uniqueID")();var x=new(c("SubscriptionsHandler"))();this.$SphericalViewportControl58(x,v);this.$SphericalViewportControl23.set(w,{handler:x,element:v})}return w};u.prototype.removeLayer=function(v){"use strict";var w=this.$SphericalViewportControl23.get(v);if(w){w.handler.release();this.$SphericalViewportControl23["delete"](v)}};u.prototype.destroy=function(){"use strict";this.removeAllListeners();this.getSubscriptions().remove()};u.prototype.$SphericalViewportControl58=function(v,w){"use strict";__p&&__p();v.addSubscriptions(c("Event").listen(w,"mousedown",function(x){return this.$SphericalViewportControl59(x)}.bind(this)),c("Event").listen(w,"mouseenter",function(x){return this.$SphericalViewportControl60(x,w)}.bind(this)),c("Event").listen(w,"mouseleave",function(x){return this.$SphericalViewportControl61(x,w)}.bind(this)),c("Event").listen(w,"mousemove",function(x){return this.$SphericalViewportControl62(x)}.bind(this)),c("Event").listen(w,"mouseup",function(x){return this.$SphericalViewportControl63(x)}.bind(this)),c("Event").listen(w,"click",function(x){return this.$SphericalViewportControl64(x)}.bind(this)),c("Event").listen(w,"keydown",function(x){return this.$SphericalViewportControl65(x)}.bind(this)),c("Event").listen(w,"keyup",function(x){return this.$SphericalViewportControl66(x)}.bind(this)),c("Event").listen(w,"blur",function(x){return this.$SphericalViewportControl67(x)}.bind(this)),c("Event").listen(w,"touchstart",function(x){return this.$SphericalViewportControl68(x)}.bind(this)),c("Event").listen(w,"touchmove",function(x){return this.$SphericalViewportControl69(x)}.bind(this)),c("Event").listen(w,"touchend",function(x){return this.$SphericalViewportControl70(x)}.bind(this)),c("Event").listen(w,"touchcancel",function(x){return this.$SphericalViewportControl70(x)}.bind(this)))};u.prototype.$SphericalViewportControl56=function(v){"use strict";__p&&__p();this.$SphericalViewportControl71();this.$SphericalViewportControl1=this.$SphericalViewportControl27/this.$SphericalViewportControl28;var w=v.fieldOfView;this.$SphericalViewportControl39=Boolean(v.enableZoom);this.$SphericalViewportControl22=(v.panningVelocityFactor||0)/15*80||80;this.$SphericalViewportControl9=(v.keyboardVelocityFactor||0)*1e3||80;if(v.partialLimits){this.$SphericalViewportControl32=v.partialLimits;this.$SphericalViewportControl35=true}else{this.$SphericalViewportControl35=false;this.$SphericalViewportControl32={partialLeftDegrees:null,partialRightDegrees:null,partialTopDegrees:null,partialBottomDegrees:null}}this.$SphericalViewportControl33=this.$SphericalViewportControl32;this.$SphericalViewportControl34=1;if(this.$SphericalViewportControl54)this.$SphericalViewportControl35=true;this.$SphericalViewportControl21={x:v.initialHeading,y:v.initialPitch};var x=this.$SphericalViewportControl32,y=x.partialTopDegrees,z=x.partialBottomDegrees;if(!this.$SphericalViewportControl54&&(y||y===0)&&(z||z===0)){var A=y,B=z,C=A+B;if(w>C){w=C;this.$SphericalViewportControl21.y=(A-B)/2}}this.$SphericalViewportControl5=this.$SphericalViewportControl72(w);this.$SphericalViewportControl73();this.$SphericalViewportControl19={x:this.$SphericalViewportControl21.x,y:this.$SphericalViewportControl21.y}};u.prototype.reconfigure=function(v){"use strict";this.$SphericalViewportControl56(v)};u.prototype.setEnableGyro=function(v){"use strict";this.$SphericalViewportControl36=v};u.prototype.$SphericalViewportControl59=function(v){"use strict";if(this.$SphericalViewportControl13)this.$SphericalViewportControl74();if(this.isListening(v.target)){this.$SphericalViewportControl12=true;this.$SphericalViewportControl75(v)}};u.prototype.$SphericalViewportControl68=function(v){"use strict";__p&&__p();this.$SphericalViewportControl53=false;if(this.$SphericalViewportControl12)this.$SphericalViewportControl74();if(this.$SphericalViewportControl13){this.$SphericalViewportControl76(v);this.$SphericalViewportControl13=false;this.$SphericalViewportControl74()}else this.$SphericalViewportControl13=true;this.$SphericalViewportControl75(v)};u.prototype.$SphericalViewportControl76=function(v){"use strict";if(v.touches.length===2&&this.$SphericalViewportControl39){this.$SphericalViewportControl48=true;this.$SphericalViewportControl49=this.$SphericalViewportControl77(v)}};u.prototype.$SphericalViewportControl69=function(v){"use strict";this.$SphericalViewportControl53=true;if(this.$SphericalViewportControl48){this.$SphericalViewportControl78(v);if(this.$SphericalViewportControl39)c("Event").kill(v)}};u.prototype.$SphericalViewportControl78=function(v){"use strict";var w=this.$SphericalViewportControl77(v),x=this.$SphericalViewportControl5*(this.$SphericalViewportControl49/w),y=x-this.$SphericalViewportControl5;this.$SphericalViewportControl79(y);this.$SphericalViewportControl49=w};u.prototype.$SphericalViewportControl77=function(v){"use strict";var w=v.touches[0].pageX-v.touches[1].pageX,x=v.touches[0].pageY-v.touches[1].pageY;return Math.sqrt(Math.pow(w,2)+Math.pow(x,2))};u.prototype.$SphericalViewportControl70=function(v){"use strict";if(!this.$SphericalViewportControl53&&c("SphericalPhotoConfig").is_www_tap_to_click_on){v.target.focus(v);this.$SphericalViewportControl64(v)}if(this.$SphericalViewportControl48)this.$SphericalViewportControl48=false;else if(this.$SphericalViewportControl13)this.$SphericalViewportControl80(v,null)};u.prototype.$SphericalViewportControl75=function(v){"use strict";this.emit("onMovementStart");this.$SphericalViewportControl81();this.$SphericalViewportControl82(v);this.$SphericalViewportControl83(v);this.$SphericalViewportControl84();v.preventDefault()};u.prototype.$SphericalViewportControl80=function(v,w){"use strict";if(w)w.removeEventListener("wheel",this.$SphericalViewportControl85);if(this.$SphericalViewportControl38&&!this.$SphericalViewportControl12){this.$SphericalViewportControl86();this.$SphericalViewportControl38=false}};u.prototype.$SphericalViewportControl87=function(v){"use strict";if(this.$SphericalViewportControl13||this.$SphericalViewportControl12)this.$SphericalViewportControl74()};u.prototype.$SphericalViewportControl88=function(v){"use strict";this.$SphericalViewportControl83(v);this.$SphericalViewportControl7=true;this.emit("updateViewportMove")};u.prototype.$SphericalViewportControl89=function(v){"use strict";if(this.$SphericalViewportControl38){this.$SphericalViewportControl90(v);this.emit("updateViewportMove")}};u.prototype.$SphericalViewportControl81=function(){"use strict";this.$SphericalViewportControl8=false;this.$SphericalViewportControl38=false;this.$SphericalViewportControl36=false};u.prototype.$SphericalViewportControl91=function(v){"use strict";this.$SphericalViewportControl83(v);this.$SphericalViewportControl92();this.$SphericalViewportControl74();this.$SphericalViewportControl86();v.preventDefault()};u.prototype.$SphericalViewportControl74=function(v){"use strict";__p&&__p();c("queryThenMutateDOM")(function(){},function(){return this.$SphericalViewportControl25.style.cursor=""}.bind(this));this.$SphericalViewportControl13=false;this.$SphericalViewportControl12=false;this.$SphericalViewportControl6.release();if(this.$SphericalViewportControl29){c("CSS").removeClass(this.$SphericalViewportControl4,this.$SphericalViewportControl29);this.$SphericalViewportControl29=""}};u.prototype.$SphericalViewportControl93=function(v){"use strict";if(this.$SphericalViewportControl13&&v.changedTouches)return v.changedTouches[0];else if(this.$SphericalViewportControl12)return v;else if(this.$SphericalViewportControl38)return v;return null};u.prototype.setMovementPosition=function(v){"use strict";this.$SphericalViewportControl16=this.$SphericalViewportControl94(v)};u.prototype.$SphericalViewportControl94=function(v){"use strict";var w=this.$SphericalViewportControl93(v);if(!w)return this.$SphericalViewportControl16;return{x:w.screenX,y:w.screenY}};u.prototype.$SphericalViewportControl95=function(v){"use strict";var w=this.$SphericalViewportControl93(v);if(!w)return this.$SphericalViewportControl17;return{x:w.clientX,y:w.clientY}};u.prototype.$SphericalViewportControl82=function(v){"use strict";__p&&__p();this.$SphericalViewportControl16=this.$SphericalViewportControl94(v);this.$SphericalViewportControl14={x:0,y:0};this.$SphericalViewportControl18=new(c("VelocityTracker"))();this.$SphericalViewportControl3=new(c("VelocityTracker"))(300);c("queryThenMutateDOM")(function(){},function(){return this.$SphericalViewportControl25.style.cursor=this.$SphericalViewportControl30}.bind(this));this.$SphericalViewportControl6.engage();var w=this.$SphericalViewportControl4;if(this.$SphericalViewportControl13)this.$SphericalViewportControl6.addSubscriptions(c("Event").listen(w,"touchmove",function(v){return this.$SphericalViewportControl88(v)}.bind(this)),c("Event").listen(w,"touchend",function(v){return this.$SphericalViewportControl91(v)}.bind(this)),c("Event").listen(w,"touchcancel",function(v){return this.$SphericalViewportControl87(v)}.bind(this)));else this.$SphericalViewportControl6.addSubscriptions(c("Event").listen(w,"mousemove",function(v){return this.$SphericalViewportControl88(v)}.bind(this)),c("Event").listen(w,"mouseup",function(v){return this.$SphericalViewportControl91(v)}.bind(this)),c("Event").listen(w,"mouseleave",function(v){return this.$SphericalViewportControl87(v)}.bind(this)))};u.prototype.$SphericalViewportControl90=function(v){"use strict";this.$SphericalViewportControl96(v,this.$SphericalViewportControl37)};u.prototype.$SphericalViewportControl83=function(v){"use strict";this.$SphericalViewportControl96(v,1)};u.prototype.reEnableGyro=function(){"use strict";this.$SphericalViewportControl14={x:0,y:0};this.$SphericalViewportControl36=true;this.$SphericalViewportControl38=true;this.$SphericalViewportControl74()};u.prototype.$SphericalViewportControl96=function(v,w){"use strict";var x=this.$SphericalViewportControl94(v),y=this.$SphericalViewportControl15?{x:0,y:0}:this.$SphericalViewportControl14;this.$SphericalViewportControl14={x:w*(x.x-this.$SphericalViewportControl16.x)+y.x,y:w*(x.y-this.$SphericalViewportControl16.y)+y.y};this.$SphericalViewportControl15=false;this.$SphericalViewportControl16=x;this.$SphericalViewportControl18.update(x.x,x.y);this.$SphericalViewportControl17=this.$SphericalViewportControl95(v)};u.prototype.$SphericalViewportControl97=function(){"use strict";var v=this.$SphericalViewportControl98(),w=-this.$SphericalViewportControl18.getVelocityX()*v,x=this.$SphericalViewportControl18.getVelocityY()*v,y=this.$SphericalViewportControl38?this.$SphericalViewportControl37:1;if(this.$SphericalViewportControl99())w=-w;return{x:w*y,y:x*y}};u.prototype.$SphericalViewportControl100=function(v,w){"use strict";return c("radToDeg")(Math.atan(v/w))};u.prototype.$SphericalViewportControl101=function(v,w,x){"use strict";return{x:this.$SphericalViewportControl100(v.x-this.$SphericalViewportControl27/2,x),y:-this.$SphericalViewportControl100(v.y-this.$SphericalViewportControl28/2,w)}};u.prototype.$SphericalViewportControl102=function(v,w){"use strict";__p&&__p();var x={x:v.x-w.x,y:v.y-w.y},y=this.$SphericalViewportControl28/(2*Math.tan(c("degToRad")(this.getVerticalFieldOfView()/2))),z=y*Math.cos(c("degToRad")(this.$SphericalViewportControl19.y)),A=z-(this.$SphericalViewportControl28/2-v.y)*Math.sin(c("degToRad")(this.$SphericalViewportControl19.y));if(this.$SphericalViewportControl19.y==-90&&w.y<0||this.$SphericalViewportControl19.y==90&&w.y>0){var B=this.$SphericalViewportControl100(x.y-this.$SphericalViewportControl28/2,x.x-this.$SphericalViewportControl27/2),C=this.$SphericalViewportControl100(v.y-this.$SphericalViewportControl28/2,v.x-this.$SphericalViewportControl27/2),D=C-B;if(D>90)D=180-D;else if(D<-90)D=180+D;return{x:D*Math.sign(this.$SphericalViewportControl19.y),y:0}}else{var E=this.$SphericalViewportControl101(x,y,A),F=this.$SphericalViewportControl101(v,y,A);return{x:E.x-F.x,y:E.y-F.y}}};u.prototype.$SphericalViewportControl99=function(){"use strict";var v=this.$SphericalViewportControl26?this.$SphericalViewportControl26.top:c("getElementRect")(this.$SphericalViewportControl25).top,w=this.$SphericalViewportControl17.y-v,x=this.$SphericalViewportControl28/(2*Math.tan(c("degToRad")(this.getVerticalFieldOfView()/2))),y=-x/Math.tan(c("degToRad")(this.$SphericalViewportControl19.y))+this.$SphericalViewportControl28/2,z=w>y&&this.$SphericalViewportControl19.y<0||w<y&&this.$SphericalViewportControl19.y>0;return z};u.prototype.$SphericalViewportControl92=function(){"use strict";__p&&__p();var v={x:0,y:0};if(!this.$SphericalViewportControl15){this.$SphericalViewportControl15=true;var w=this.$SphericalViewportControl26,x=this.$SphericalViewportControl17.x<w.left,y=this.$SphericalViewportControl17.x>w.right,z=this.$SphericalViewportControl17.y<w.top,A=this.$SphericalViewportControl17.y>w.bottom;this.$SphericalViewportControl103(x,y,z,A);var B={x:this.$SphericalViewportControl17.x-w.left,y:this.$SphericalViewportControl17.y-w.top};if(!x&&!y)v.x=this.$SphericalViewportControl102(B,this.$SphericalViewportControl14).x;else v.x=-this.$SphericalViewportControl14.x*this.$SphericalViewportControl98()*r;if(!z&&!A)v.y=this.$SphericalViewportControl102(B,this.$SphericalViewportControl14).y;else v.y=this.$SphericalViewportControl14.y*this.$SphericalViewportControl98()*r}this.$SphericalViewportControl3.updateVelocity(0,0);return this.$SphericalViewportControl104(v)};u.prototype.$SphericalViewportControl104=function(v){"use strict";__p&&__p();if(!this.$SphericalViewportControl45||!this.$SphericalViewportControl35)return v;var w=this.$SphericalViewportControl19,x=w.x,y=w.y,z=this.$SphericalViewportControl33,A=z.partialLeftDegrees,B=z.partialRightDegrees,C=z.partialTopDegrees,D=z.partialBottomDegrees,E=v.x,F=v.y,G=x+E,H=y+F,I=true,J=true,K=true,L=true;if(this.$SphericalViewportControl54){var M=this.$SphericalViewportControl32.partialLeftDegrees,N=this.$SphericalViewportControl32.partialRightDegrees,O=this.$SphericalViewportControl34===0;if(G<180&&E<0||G>180&&E>0)G=x-E;if((M!=null||!O)&&A!=null)I=A<0?(G<180?G+360:G)>360-A:G>360-A;if((N!=null||!O)&&B!=null)J=B<0?(G<180?G+360:G)<360+B:(G>180?360-G:G)<B;K=C!=null?H<C:true;L=D!=null?H>-D:true}else{var P=this.getVerticalFieldOfView(),Q=this.getHorizontalFieldOfView(),R=G<180?G+360:G,S=G>180?G-360:G;I=A!=null?R>360-A+Q/2:true;J=B!=null?S<B-Q/2:true;K=C!=null?H<C-P/2:true;L=D!=null?H>-D+P/2:true}if(!I&&!J)E*=this.$SphericalViewportControl46;if(!K||!L)F*=this.$SphericalViewportControl46;return{x:E,y:F}};u.prototype.$SphericalViewportControl60=function(v,w){"use strict";__p&&__p();w.addEventListener("wheel",this.$SphericalViewportControl85);this.emit("mouseEnter");if(this.$SphericalViewportControl12)this.$SphericalViewportControl3=new(c("VelocityTracker"))(300);else if(this.$SphericalViewportControl36&&this.$SphericalViewportControl37){this.$SphericalViewportControl3=new(c("VelocityTracker"))(300);this.$SphericalViewportControl38=true;this.$SphericalViewportControl16=this.$SphericalViewportControl94(v);this.$SphericalViewportControl14={x:0,y:0};this.$SphericalViewportControl84()}};u.prototype.$SphericalViewportControl61=function(v,w){"use strict";this.emit("mouseLeave",v);this.$SphericalViewportControl80(v,w)};u.prototype.$SphericalViewportControl62=function(v){"use strict";this.emit("mouseMove",v);if(this.$SphericalViewportControl36)this.$SphericalViewportControl89(v)};u.prototype.$SphericalViewportControl63=function(v){"use strict";this.emit("mouseUp",v)};u.prototype.$SphericalViewportControl64=function(v){"use strict";if(this.isListening(v.target)){v.target.focus();if(!this.$SphericalViewportControl7)this.emit("DOM/click",v);this.$SphericalViewportControl7=false}return false};u.prototype.$SphericalViewportControl79=function(v){"use strict";var w=this.setFieldOfView(this.$SphericalViewportControl5+v);if(w)this.$SphericalViewportControl47()};u.prototype.disableKeyboard=function(){"use strict";this.$SphericalViewportControl20=true};u.prototype.enableKeyboard=function(){"use strict";this.$SphericalViewportControl20=false};u.prototype.$SphericalViewportControl65=function(v){"use strict";__p&&__p();var w=this.$SphericalViewportControl106(v);if(w&&!this.$SphericalViewportControl20){this.$SphericalViewportControl10[w]=1;if(!this.$SphericalViewportControl11){this.$SphericalViewportControl11=true;this.$SphericalViewportControl81();this.$SphericalViewportControl84();this.emit("updateViewportMove")}return false}return true};u.prototype.$SphericalViewportControl66=function(v){"use strict";__p&&__p();var w=this.$SphericalViewportControl106(v);if(w&&!this.$SphericalViewportControl20){this.$SphericalViewportControl10[w]=0;var x=false;for(var y in this.$SphericalViewportControl10)if(Object.prototype.hasOwnProperty.call(this.$SphericalViewportControl10,y)&&this.$SphericalViewportControl10[y]>0){x=true;break}this.$SphericalViewportControl11=x;return false}return true};u.prototype.$SphericalViewportControl86=function(){"use strict";var v=this.$SphericalViewportControl97();this.$SphericalViewportControl3=new(c("VelocityTracker"))(300,v)};u.prototype.$SphericalViewportControl84=function(){__p&&__p();var v,w=this;"use strict";if(!this.$SphericalViewportControl8)(function(){__p&&__p();if(w.$SphericalViewportControl51)w.$SphericalViewportControl107();w.$SphericalViewportControl8=true;w.$SphericalViewportControl2.updateVelocity(0,0);w.emit("updateViewportBegin");var x=w.once("updateViewportMove",function(){return this.emit("updateViewportMoveStart",this.$SphericalViewportControl38)}.bind(w));w.once("updateViewportEnd",function(){return x.remove()});w.$SphericalViewportControl50=c("performanceNow")();c("requestAnimationFrame")(w.$SphericalViewportControl108)})()};u.prototype.$SphericalViewportControl107=function(){"use strict";this.$SphericalViewportControl26=c("getElementRect")(this.$SphericalViewportControl25)};u.prototype.updateViewportClientSize=function(v){"use strict";this.$SphericalViewportControl27=v.width;this.$SphericalViewportControl28=v.height};u.prototype.updateMinVFOV=function(v){"use strict";this.$SphericalViewportControl44=Math.max(l,Math.min(m,v))};u.prototype.$SphericalViewportControl71=function(){"use strict";this.$SphericalViewportControl26=c("getElementRect")(this.$SphericalViewportControl25);this.$SphericalViewportControl27=this.$SphericalViewportControl25.clientWidth||1;this.$SphericalViewportControl28=this.$SphericalViewportControl25.clientHeight||1};u.prototype.setAngularVelocityScaleFactor=function(v){"use strict";this.$SphericalViewportControl55=v};u.prototype.$SphericalViewportControl110=function(){"use strict";__p&&__p();var v=180,w=0,x=this.$SphericalViewportControl33,y=x.partialLeftDegrees,z=x.partialRightDegrees;if(y!=null&&z!=null)v=(z-y)/2+180;if(this.$SphericalViewportControl54){var A=this.$SphericalViewportControl32.partialLeftDegrees,B=this.$SphericalViewportControl32.partialRightDegrees,C=this.$SphericalViewportControl34===0;if((A!=null||!C)&&y!=null){var D=y<0&&this.$SphericalViewportControl19.x<180?this.$SphericalViewportControl19.x+360:this.$SphericalViewportControl19.x;if(D>v){var E=360-y-D;if(E>0)w=Math.min(E,this.$SphericalViewportControl41)*this.$SphericalViewportControl40}}if((B!=null||!C)&&z!=null){var F=z<0&&this.$SphericalViewportControl19.x>180?this.$SphericalViewportControl19.x-360:this.$SphericalViewportControl19.x;if(F<v){var G=z-F;if(G<0)w=Math.max(G,-this.$SphericalViewportControl41)*this.$SphericalViewportControl40}}}else{var H=this.getHorizontalFieldOfView(),I=this.$SphericalViewportControl19.x<180?this.$SphericalViewportControl19.x+360:this.$SphericalViewportControl19.x,J=this.$SphericalViewportControl19.x>180?this.$SphericalViewportControl19.x-360:this.$SphericalViewportControl19.x;if(y!=null&&z!=null&&y+z<H){var K=(z-y)/2-J;if(K>0)w=Math.min(K,this.$SphericalViewportControl41)*this.$SphericalViewportControl40;else if(K<0)w=Math.max(K,-this.$SphericalViewportControl41)*this.$SphericalViewportControl40;return Math.abs(w)<p?0:w}if(y!=null&&I>=v){var L=360-y+H/2-I;if(L>0)w=Math.min(L,this.$SphericalViewportControl41)*this.$SphericalViewportControl40}if(z!=null&&J<=v){var M=z-H/2-J;if(M<0)w=Math.max(M,-this.$SphericalViewportControl41)*this.$SphericalViewportControl40}}return Math.abs(w)<p?0:w};u.prototype.$SphericalViewportControl111=function(){"use strict";__p&&__p();var v=0,w=0,x=this.$SphericalViewportControl33,y=x.partialTopDegrees,z=x.partialBottomDegrees;if(this.$SphericalViewportControl54){if(z!=null&&y!=null){if(z<0&&y<-z||y<0&&-y>z)return 0;w=(y-z)/2}if(y!=null&&this.$SphericalViewportControl19.y>w){var A=y-this.$SphericalViewportControl19.y;if(A<0)v=Math.max(A,-this.$SphericalViewportControl41)*this.$SphericalViewportControl40}if(z!=null&&this.$SphericalViewportControl19.y<w){var B=-z-this.$SphericalViewportControl19.y;if(B>0)v=Math.min(B,this.$SphericalViewportControl41)*this.$SphericalViewportControl40}}else{var C=this.getVerticalFieldOfView();if(z!=null&&y!=null&&z+y<C){var D=(y-z)/2-this.$SphericalViewportControl19.y;if(D>0)v=Math.min(D,this.$SphericalViewportControl41)*this.$SphericalViewportControl40;else if(D<0)v=Math.max(D,-this.$SphericalViewportControl41)*this.$SphericalViewportControl40;return Math.abs(v)<p?0:v}if(y!=null){var E=y-C/2-this.$SphericalViewportControl19.y;if(E<0)v=Math.max(E,-this.$SphericalViewportControl41)*this.$SphericalViewportControl40}if(z!=null){var F=-z+C/2-this.$SphericalViewportControl19.y;if(F>0)v=Math.min(F,this.$SphericalViewportControl41)*this.$SphericalViewportControl40}}return Math.abs(v)<p?0:v};u.prototype.$SphericalViewportControl103=function(v,w,x,y){"use strict";__p&&__p();var z="";if(v||w||x||y){var A=v?"Left":w?"Right":"",B=x?"Up":y?"Down":"";z=t[B+A]}if(this.$SphericalViewportControl29!=z){if(this.$SphericalViewportControl29){c("CSS").removeClass(this.$SphericalViewportControl4,this.$SphericalViewportControl29);this.$SphericalViewportControl29=""}if(z){this.$SphericalViewportControl29=z;c("CSS").addClass(this.$SphericalViewportControl4,z)}}};u.prototype.getSubscriptions=function(){"use strict";return{remove:function(){this.$SphericalViewportControl23.forEach(function(v){var w=v.handler;return w.release()});this.$SphericalViewportControl23.clear();this.$SphericalViewportControl6.release()}.bind(this)}};u.prototype.$SphericalViewportControl67=function(v){"use strict";for(var w in this.$SphericalViewportControl10)this.$SphericalViewportControl10[w]=0;this.$SphericalViewportControl11=false};u.prototype.getOrientation=function(){"use strict";return this.$SphericalViewportControl19};u.prototype.$SphericalViewportControl73=function(v){"use strict";if(this.$SphericalViewportControl54){var w=v!=null?v:this.getVerticalFieldOfView(),x=this.getAspectRatio();this.$SphericalViewportControl33=c("SphericalPhotoProjectionUtils").getPartialLimits(w,x,this.$SphericalViewportControl32);this.$SphericalViewportControl34=c("SphericalPhotoProjectionUtils").getZoomProgress(w,this.$SphericalViewportControl32,x)}};u.prototype.$SphericalViewportControl113=function(v,w){"use strict";__p&&__p();var x=(v+360)%360,y=Math.max(-90,Math.min(90,w));if(!this.$SphericalViewportControl35)return{x:x,y:y};var z=this.$SphericalViewportControl32.partialLeftDegrees,A=this.$SphericalViewportControl32.partialRightDegrees,B=this.$SphericalViewportControl34===0,C=this.$SphericalViewportControl33.partialLeftDegrees,D=this.$SphericalViewportControl33.partialRightDegrees,E=this.$SphericalViewportControl33.partialTopDegrees,F=this.$SphericalViewportControl33.partialBottomDegrees,G=this.getVerticalFieldOfView(),H=this.getHorizontalFieldOfView(),I=0,J=0;if(this.$SphericalViewportControl54){if(this.$SphericalViewportControl45){if(C!=null&&D!=null)I=Math.min(Math.abs((C+D)/2),this.$SphericalViewportControl42);if(E!=null&&F!=null&&E>=-F)J=Math.min(Math.abs((E+F)/2),this.$SphericalViewportControl43)}if((z!=null||!B)&&C!=null)if(C<0)x=Math.max(x>180?x:x+360,360-C-I)%360;else if(x>180)x=Math.max(x,360-C-I);if((A!=null||!B)&&D!=null)if(D<0)x=Math.min(x<180?x+360:x,360+D+I)%360;else if(x<180)x=Math.min(x,D+I);if(E!=null)if(F!=null&&E<0&&-E>F)y=Math.min(y,-F);else y=Math.min(y,E+J);if(F!=null)if(E!=null&&F<0&&E<-F)y=Math.max(y,E);else y=Math.max(y,-F-J)}else{if(this.$SphericalViewportControl45){I=this.$SphericalViewportControl42;J=this.$SphericalViewportControl43}if(C!=null&&D!=null&&C+D<H){var K=(D-C)/2,L=x>180?x-360:x;if(L<K)x=Math.max(L,K-I);else x=Math.min(L,K+I)}else{if(C!=null)x=x<=180?x:Math.max(x,360-C+H/2-I);if(D!=null)x=x>=180?x:Math.min(x,D-H/2+I)}if(E!=null&&F!=null&&E+F<G){var M=(E-F)/2;if(y<M)y=Math.max(y,M-J);else y=Math.min(y,M+J)}else{if(E!=null)y=Math.min(y,E-G/2+J);if(F!=null)y=Math.max(y,-F+G/2-J)}}return{x:x,y:y}};u.prototype.setInitialOrientation=function(){"use strict";var v=this.$SphericalViewportControl113(0,0),w=v.x,x=v.y,y=!Number.isNaN(w+x)&&(w!==this.$SphericalViewportControl19.x||x!==this.$SphericalViewportControl19.y);if(y){this.$SphericalViewportControl19={x:w,y:x};this.emit("initialViewportChange",w,x);this.emit("viewportChange",w,x,this.$SphericalViewportControl5)}};u.prototype.setSphericalOrientation=function(v,w){"use strict";var x=this.$SphericalViewportControl113(v,w),y=x.x,z=x.y,A=!Number.isNaN(y+z)&&(y!==this.$SphericalViewportControl19.x||z!==this.$SphericalViewportControl19.y);if(A){this.$SphericalViewportControl19={x:y,y:z};this.emit("viewportChange",y,z,this.$SphericalViewportControl5)}};u.prototype.setRelativeSphericalOrientation=function(v,w){"use strict";this.setSphericalOrientation(v+this.$SphericalViewportControl21.x,w+this.$SphericalViewportControl21.y)};u.prototype.$SphericalViewportControl112=function(v,w){"use strict";this.setSphericalOrientation(this.$SphericalViewportControl19.x+v,this.$SphericalViewportControl19.y+w)};u.prototype.$SphericalViewportControl72=function(v){"use strict";__p&&__p();if(this.$SphericalViewportControl54){var w=c("SphericalPhotoProjectionUtils").getMaxVfov(this.$SphericalViewportControl32,this.getAspectRatio());return Math.min(w,Math.max(this.$SphericalViewportControl44,v))}else{var x=Math.min(o/this.getAspectRatio(),n);if(this.$SphericalViewportControl35&&this.$SphericalViewportControl32){var y=this.$SphericalViewportControl32.partialTopDegrees||this.$SphericalViewportControl32.partialTopDegrees===0,z=this.$SphericalViewportControl32.partialBottomDegrees||this.$SphericalViewportControl32.partialBottomDegrees===0;if(y&&z){var A=this.$SphericalViewportControl32.partialTopDegrees||0,B=this.$SphericalViewportControl32.partialBottomDegrees||0;x=Math.min(x,A+B)}}return Math.min(x,Math.max(this.$SphericalViewportControl44,v))}};u.prototype.setFieldOfView=function(v){"use strict";__p&&__p();var w=this.$SphericalViewportControl5,x=this.$SphericalViewportControl72(v);this.$SphericalViewportControl73(x);var y=this.$SphericalViewportControl33,z=y.partialTopDegrees,A=y.partialBottomDegrees,B=y.partialLeftDegrees,C=y.partialRightDegrees,D=z||z===0,E=A||A===0,F=B||B===0,G=C||C===0,H=B||C,I=z||0,J=A||0,K=B||0,L=C||0,M=false,N=this.$SphericalViewportControl19.x,O=this.$SphericalViewportControl19.y;if(this.$SphericalViewportControl54){I=D?I:90;J=E?J:90;K=F?K:180;L=G?L:180;if(-O>J){if(J<0&&I<-J)O=I;else O=-J;M=true}if(O>I){if(I<0&&I<-J)O=-J;else O=I;M=true}var P=((L-K)/2+180)%360;if(N>P&&360-N>K){N=360-K;M=true}if(N<P&&N>L){N=L;M=true}}else{var Q=x*this.getAspectRatio();if(E&&x/2-O>J){O=x/2-J;M=true}if(D&&O+x/2>I){O=I-x/2;M=true}if(D&&E&&I+J<x){O=(I-J)/2;M=true}if(H){var R=((L-K)/2+180)%360;if(N>R&&Q/2+360-N>K){N=360+Q/2-K;M=true}if(N<R&&N+Q/2>L){N=L-Q/2;M=true}if(K+L<Q){N=(L-K)/2%360;M=true}}}if(M&&!Number.isNaN(N+O))this.$SphericalViewportControl19={x:N,y:O};if(!Number.isNaN(x)&&w!==x||M){this.$SphericalViewportControl5=x;this.emit("viewportChange",this.$SphericalViewportControl19.x,this.$SphericalViewportControl19.y,x);return true}return false};u.prototype.getVerticalFieldOfView=function(){"use strict";return this.$SphericalViewportControl5};u.prototype.getAspectRatio=function(){"use strict";if(this.$SphericalViewportControl25&&this.$SphericalViewportControl27&&this.$SphericalViewportControl28)return this.$SphericalViewportControl27/this.$SphericalViewportControl28;return this.$SphericalViewportControl1};u.prototype.getHorizontalFieldOfView=function(){"use strict";return this.$SphericalViewportControl5*this.getAspectRatio()};u.prototype.setPreventScrollDefaultAction=function(v){"use strict";this.$SphericalViewportControl31=v};u.prototype.updateViewport=function(v,w,x){"use strict";this.$SphericalViewportControl19={x:v,y:w};this.$SphericalViewportControl5=this.$SphericalViewportControl72(x);this.$SphericalViewportControl73()};u.prototype.isUpdating=function(){"use strict";return this.$SphericalViewportControl8};u.prototype.$SphericalViewportControl109=function(){"use strict";var v=this.$SphericalViewportControl9*(this.$SphericalViewportControl10.right-this.$SphericalViewportControl10.left),w=this.$SphericalViewportControl9*(this.$SphericalViewportControl10.up-this.$SphericalViewportControl10.down);this.$SphericalViewportControl2.updateVelocity(v,w)};u.prototype.$SphericalViewportControl106=function(v){"use strict";__p&&__p();var w=c("Event").getKeyCode(v),x=null;switch(w){case c("Keys").LEFT:case s.A:x="left";break;case c("Keys").UP:case s.W:x="up";break;case c("Keys").RIGHT:case s.D:x="right";break;case c("Keys").DOWN:case s.S:x="down";break}return x};u.prototype.$SphericalViewportControl98=function(){"use strict";return this.$SphericalViewportControl5/this.$SphericalViewportControl28};u.prototype.$SphericalViewportControl57=function(){"use strict";var v="grabbing";if(c("UserAgent").isEngine("WebKit"))v="-webkit-"+v;else if(c("UserAgent").isEngine("Gecko"))v="-moz-"+v;return v};f.exports=u}),null);
__d("SphericalMediaCanvasPool",["DOM","Map"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=1,i="default",j=function j(l,m){return l+m};function k(){this.$SphericalMediaCanvasPool1=new(c("Map"))();this.$SphericalMediaCanvasPool2=new(c("Map"))()}k.prototype.setLimit=function(l){var m=arguments.length<=1||arguments[1]===undefined?i:arguments[1],n=this.$SphericalMediaCanvasPool2.get(m)||{queue:[],limit:1};n.limit=l;this.$SphericalMediaCanvasPool2.set(m,n)};k.prototype.release=function(l){var m=arguments.length<=1||arguments[1]===undefined?i:arguments[1],n=j(l,m),o=this.$SphericalMediaCanvasPool1.get(n);if(!o)return false;var p=this.$SphericalMediaCanvasPool2.get(m);if(!p||p.queue.length===0)return false;p.queue.splice(p.queue.indexOf(n),1);o.canvas.parentNode&&o.canvas.parentNode.removeChild(o.canvas);return this.$SphericalMediaCanvasPool1["delete"](n)};k.prototype.get=function(l,m){__p&&__p();var n=arguments.length<=2||arguments[2]===undefined?i:arguments[2],o=babelHelpers["extends"]({},m.canvasAttrs);if(!l||!m.beforeCanvasLost)throw new Error("Missing required arguments.");var p=j(l,n);o["data-id"]=o["data-id"]||l;var q=this.$SphericalMediaCanvasPool1.get(p);if(q)return q.canvas;var r=this.$SphericalMediaCanvasPool2.get(n)||{queue:[],limit:h},s=void 0;if(r.queue.length<r.limit)s=c("DOM").create("canvas",o);else{var t=r.queue.shift(),u=this.$SphericalMediaCanvasPool1.get(t);if(!u)throw new Error("Canvas pool could not find the item",t);s=u.canvas;u.beforeCanvasLost();this.$SphericalMediaCanvasPool1["delete"](t);s.className=o.className;s.height=o.height;s.width=o.width;s.tabIndex=o.tabIndex;s.setAttribute("data-id",o["data-id"])}if(!s)throw new Error("Failed to get a canvas.");r.queue.push(p);this.$SphericalMediaCanvasPool2.set(n,r);this.$SphericalMediaCanvasPool1.set(p,{canvas:s,beforeCanvasLost:m.beforeCanvasLost});return s};f.exports=new k()}),null);
__d("SphericalProjectionUtils",["invariant","GLMatrix","degToRad","radToDeg"],(function a(b,c,d,e,f,g,h){__p&&__p();var i=c("GLMatrix").vec3,j=c("GLMatrix").mat4,k=Math.acos,l=Math.sin,m=Math.cos,n=15,o=.2,p={convert3dTo2dNormalized:function q(r,s,t,u,v,w,x){__p&&__p();var y=c("degToRad")(r),z=c("degToRad")(s),A=c("degToRad")(t),B=c("degToRad")(u),C=c("degToRad")(v),D=j.create();j.perspective(D,C,w/x,.1,100);var E=j.create();j.rotateX(E,E,z);j.rotateY(E,E,y);j.invert(E,E);var F=j.create();j.rotateX(F,F,B);j.rotateY(F,F,A);j.multiply(F,F,E);j.multiply(F,D,F);var G=i.fromValues(0,0,-1);i.transformMat4(G,G,F);var H=.5+G[0]/2,I=.5+G[1]/2;return{x:H,y:I,isNegativeTwin:G[2]>1}},convert3dTo2dScaled:function q(r,s,t,u,v,w,x){var y=p.convert3dTo2dNormalized.apply(p,arguments),z=y.x,A=y.y,B=y.isNegativeTwin;return{x:z*w,y:A*x,isNegativeTwin:B}},convert3dTo2dScaledUnique:function q(r,s,t,u,v,w,x){var y=p.convert3dTo2dNormalized.apply(p,arguments),z=y.x,A=y.y,B=y.isNegativeTwin;if(B)z=A=-1;else{z*=w;A*=x}return{x:z,y:A}},convert3dTo2dOnScreen:function q(r,s,t,u,v,w,x){var y=p.convert3dTo2dScaled.apply(p,arguments),z=y.x,A=y.y,B=y.isNegativeTwin;if(B){z=-z;A=s>0?-x:x}z=Math.max(0,Math.min(w,z));A=Math.max(0,Math.min(x,A));return{x:z,y:A}},convert2dTo3dNormalized:function q(r,s,t,u,v,w,x){__p&&__p();r<=1&&r>=-1||h(0);s<=1&&s>=-1||h(0);var y=c("degToRad")(t),z=c("degToRad")(u),A=c("degToRad")(v),B=j.create();j.perspective(B,A,w/x,.1,100);var C=-r/B[0],D=-s/B[5],E=y,F=z,G=Math.atan(Math.tan(A/2)*B[5]/B[0]),H=E+(C<0?G:-G),I=F+(D>0?A/2:-A/2),J=void 0,K=void 0,L=void 0,M=void 0,N=void 0;M=N=J=0;while(J<n&&!(Math.abs(c("radToDeg")(H-E))<o&&Math.abs(c("radToDeg")(I-F))<o)){J++;K=(E+H)/2;L=(F+I)/2;var O=p._getRelativePositionWithoutProjection(y,z,K,L),P=O.x,Q=O.y;if((D-N)*(D-Q)<=0)I=L;else{F=L;N=Q}if((C-M)*(C-P)<=0)H=K;else{E=K;M=P}}var R=void 0,S=void 0;if(J<n){R=Math.ceil(c("radToDeg")(E));S=Math.ceil(c("radToDeg")(F))}else{R=t;S=u}return{yaw:R,pitch:S}},convert2dTo3dScaled:function q(r,s,t,u,v,w,x){var y=w/2,z=x/2;return p.convert2dTo3dNormalized((r-y)*(2/w),(s-z)*(2/x),t,u,v,w,x)},_getRelativePositionWithoutProjection:function q(r,s,t,u){var v=(s-u)/2,w=(s+u)/2,x=Math.cos((r-t)/2),y=Math.sin((r-t)/2),z=Math.cos(v)*x,A=Math.sin(v)*x,B=Math.cos(w)*y,C=Math.sin(w)*y,D=2*A*C+2*z*B,E=2*B*C-2*z*A,F=1-2*A*A-2*B*B;return{x:D/F,y:E/F}},distanceBetweenSphericalCoordinatesDeg:function q(r,s,t,u){return c("radToDeg")(p.distanceBetweenSphericalCoordinatesRad.apply(p,Array.from(arguments).map(c("degToRad"))))},distanceBetweenSphericalCoordinatesRad:function q(r,s,t,u){return k(l(s)*l(u)+m(s)*m(u)*m(r-t))}};f.exports=p}),null);
__d("normalizeDeltaYaw",[],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(i,j){var k=j?Math.PI:180,l=2*k;if(Math.abs(i)>l){var m=Math.trunc(Math.abs(i)/l);i-=Math.sign(i)*m*l}if(Math.abs(i)>k)i-=Math.sign(i)*2*k;return i}f.exports=h}),null);